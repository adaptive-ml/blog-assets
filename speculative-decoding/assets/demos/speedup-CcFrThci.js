import"../modulepreload-polyfill-B5Qt9EMX.js";import{r as hr,g as m,t as _,M as me,s as Ft,a as gr,b as mr,S as yr,m as wr,T as br,R as Er,I as Tr,O as Sr,c as kr,i as xr}from"../canvas-setup-F5JALq5m.js";function Ar(e,t){return t===1?e+1:t===0?1:(1-Math.pow(t,e+1))/(1-t)}function Lr(e){const{targetLatencyMs:t,draftLatencyMs:n,k:r,acceptanceProb:s}=e,i=t,u=t+r*n,l=Ar(r,s),o=u/l,a=t/o;return{sequentialIntervalMs:i,speculativeIntervalMs:u,expectedTokensPerCycle:l,effectiveRateMs:o,speedup:a}}function Mr(e,t){let n=1;for(let r=0;r<e&&Math.random()<t;r++)n++;return n}const Or=-.5,Pr=.5,pt=.5,ht=-30,$t=0,cn=1,Cr=1.5,Nr=.3,Ut=3.5,Rr=10,ft=4886745,ct=9133302;let ee={k:5,targetLatencyMs:500,draftLatencyMs:50,acceptanceProb:.6};const V={id:[],baseX:[],beltId:[]};hr(V,{defaults:()=>({id:0,baseX:0,beltId:0})});let dn,_n,qr=0,vn=!1,F=0;const W=.05,oe=.04,Le=.15,dt=.3,Yt=.12;let Q=-1,je=-1;function pn(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)}function hn(e){return e===1?1:1-Math.pow(2,-10*e)}function gn(e){return e>Or&&e<Pr}function Ir(){return Mr(ee.k,ee.acceptanceProb)}function jt(e,t,n){const r=e.addEntity();return e.addComponent(r,_),e.addComponent(r,m),_.posX[r]=Cr,_.posY[r]=0,_.posZ[r]=t,_.eulerX[r]=-90,_.scaleX[r]=0,_.scaleY[r]=0,_.scaleZ[r]=0,m.content[r]="",m.fontSize[r]=.8,m.color[r]=n,m.anchorX[r]=.5,m.anchorY[r]=.5,r}function Dr(e){const t=e.addEntity();return e.addComponent(t,_),e.addComponent(t,m),_.posX[t]=1.6,_.posY[t]=0,_.posZ[t]=2.7,_.eulerX[t]=-90,_.scaleX[t]=0,_.scaleY[t]=0,_.scaleZ[t]=0,m.content[t]="bonus!",m.fontSize[t]=.4,m.color[t]=12616956,m.anchorX[t]=.5,m.anchorY[t]=.5,t}function Ht(e,t,n){const r=e.addEntity();e.addComponent(r,_),e.addComponent(r,m),_.posX[r]=Ut,_.posY[r]=0,_.posZ[r]=t,_.eulerX[r]=-90,m.content[r]="0.0",m.fontSize[r]=.6,m.color[r]=n,m.anchorX[r]=1,m.anchorY[r]=.5;const s=e.addEntity();return e.addComponent(s,_),e.addComponent(s,m),_.posX[s]=Ut+.1,_.posY[s]=0,_.posZ[s]=t,_.eulerX[s]=-90,m.content[s]="tok/s",m.fontSize[s]=.4,m.color[s]=6710886,m.anchorX[s]=0,m.anchorY[s]=.5,{valueEid:r,unitEid:s}}function Xr(e,t,n){const r=e.addEntity();e.addComponent(r,_),e.addComponent(r,me),e.addComponent(r,V),V.id[r]=qr++,V.baseX[r]=n,V.beltId[r]=t.id,_.posX[r]=n,_.posY[r]=0,_.posZ[r]=t.z;const s=gn(n);return _.scaleX[r]=s?0:1,_.scaleY[r]=s?0:1,_.scaleZ[r]=s?0:1,me.shape[r]=0,me.sizeX[r]=.3,me.sizeY[r]=.3,me.sizeZ[r]=.3,me.color[r]=t.color,r}function mn(e){const t=_.posX[e],n=gn(t);_.scaleX[e]=n?0:1,_.scaleY[e]=n?0:1,_.scaleZ[e]=n?0:1}function Br(e,t){let n=0;if(t.isSliding){const i=Math.min((F-t.slideStartTime)/t.slideTime,1);n=t.slideAmount*hn(i)}let r=ht,s=ht;for(const i of t.tokens){const u=_.posX[i];u>r&&(r=u,s=V.baseX[i])}for(;r<$t;){const i=s+cn,u=i-n;if(u>$t)break;const l=Xr(e,t,i);t.tokens.push(l),_.posX[l]=u,mn(l),s=i,r=u}}function Fr(e,t){t.tokens=t.tokens.filter(n=>_.posX[n]<ht?(e.removeEntity(n),!1):!0)}function $r(e){if(e.labelPopStartTime<0)return;const t=Math.min((F-e.labelPopStartTime)/Nr,1),n=pn(t);_.scaleX[e.labelEid]=n,_.scaleY[e.labelEid]=n,_.scaleZ[e.labelEid]=n}function Ur(){if(je<0||Q<0)return;const e=F-je,t=W+oe+Le+dt+Yt;if(e>=t){_.scaleX[Q]=0,_.scaleY[Q]=0,_.scaleZ[Q]=0,je=-1;return}let n;if(e<W)n=0;else if(e<W+oe)n=.3*((e-W)/oe);else if(e<W+oe+Le){const r=(e-W-oe)/Le;n=.3+.7*pn(r)}else e<W+oe+Le+dt?n=1:n=1-(e-W-oe-Le-dt)/Yt;_.scaleX[Q]=n,_.scaleY[Q]=n,_.scaleZ[Q]=n}function zt(e,t,n){t.timer+=n;const r=t.getInterval(),s=Math.min(r*.8,pt);if(!t.isSliding&&t.timer>=r){const l=t.getTokenCount();t.slideAmount=l*cn,t.slideStartTime=F,t.slideTime=s,t.isSliding=!0,t.timer=0,t.lastTokenCount=l,m.content[t.labelEid]=`+${l}`,t.labelPopStartTime=F,t.id===1&&l===ee.k+1&&(je=F),t.tokenHistory.push({time:F,count:l})}const i=F-Rr;for(;t.tokenHistory.length>0&&t.tokenHistory[0].time<i;)t.tokenHistory.shift();let u=0;if(t.tokenHistory.length>=2){const l=t.tokenHistory.reduce((d,c)=>d+c.count,0),o=t.tokenHistory[0].time,f=t.tokenHistory[t.tokenHistory.length-1].time-o;if(f>0){const d=t.tokenHistory[0].count;u=(l-d)/f}}if(m.content[t.rateValueEid]=u.toFixed(1),t.isSliding){const l=Math.min((F-t.slideStartTime)/t.slideTime,1),o=t.slideAmount*hn(l);for(const a of t.tokens)_.posX[a]=V.baseX[a]-o,mn(a);if(l>=1){for(const a of t.tokens)V.baseX[a]=_.posX[a];t.isSliding=!1}}$r(t),Br(e,t),Fr(e,t)}function Yr(e){const t=Ht(e,0,ft);dn={id:0,z:0,color:ft,tokens:[],getTokenCount:()=>1,getInterval:()=>ee.targetLatencyMs/1e3,timer:0,isSliding:!1,slideStartTime:0,slideTime:pt,slideAmount:0,labelEid:jt(e,0,ft),lastTokenCount:0,labelPopStartTime:-1,rateValueEid:t.valueEid,rateUnitEid:t.unitEid,tokenHistory:[]};const n=Ht(e,2,ct);_n={id:1,z:2,color:ct,tokens:[],getTokenCount:Ir,getInterval:()=>(ee.targetLatencyMs+ee.k*ee.draftLatencyMs)/1e3,timer:0,isSliding:!1,slideStartTime:0,slideTime:pt,slideAmount:0,labelEid:jt(e,2,ct),lastTokenCount:0,labelPopStartTime:-1,rateValueEid:n.valueEid,rateUnitEid:n.unitEid,tokenHistory:[]},Q=Dr(e),vn=!0}const jr={group:"simulation",update(e){vn||Yr(e);const t=Math.min(e.time.deltaTime,.05);F+=t,zt(e,dn,t),zt(e,_n,t),Ur()}},Hr={components:{Token:V},systems:[jr]};function Ue(e){Object.assign(ee,e)}const gt=!1;var zr=Array.isArray,Vr=Array.prototype.indexOf,Zr=Array.from,yn=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,Gr=Object.getOwnPropertyDescriptors,Kr=Object.prototype,Wr=Array.prototype,wn=Object.getPrototypeOf,Vt=Object.isExtensible;const te=()=>{};function Jr(e){return e()}function Ve(e){for(var t=0;t<e.length;t++)e[t]()}function bn(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const k=2,mt=4,De=8,En=1<<24,G=16,ae=32,ge=64,kt=128,D=512,x=1024,P=2048,H=4096,ne=8192,re=16384,xt=32768,Ze=65536,Zt=1<<17,Tn=1<<18,ke=1<<19,Sn=1<<20,ve=32768,yt=1<<21,At=1<<22,se=1<<23,Re=Symbol("$state"),be=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Qr(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function es(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ts(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ns(e){throw new Error("https://svelte.dev/e/effect_orphan")}function rs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ss(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function is(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ls(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function as(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const os=2,S=Symbol(),us="http://www.w3.org/1999/xhtml";function fs(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function kn(e){return e===this.v}function xn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function An(e){return!xn(e,this.v)}let rt=!1,cs=!1;function ds(){rt=!0}let w=null;function Ee(e){w=e}function Ln(e,t=!1,n){w={p:w,i:!1,c:null,e:null,s:e,x:null,l:rt&&!t?{s:null,u:null,$:[]}:null}}function Mn(e){var t=w,n=t.e;if(n!==null){t.e=null;for(var r of n)Vn(r)}return t.i=!0,w=t.p,{}}function Xe(){return!rt||w!==null&&w.l===null}let fe=[];function On(){var e=fe;fe=[],Ve(e)}function st(e){if(fe.length===0&&!qe){var t=fe;queueMicrotask(()=>{t===fe&&On()})}fe.push(e)}function _s(){for(;fe.length>0;)On()}function Pn(e){var t=g;if(t===null)return p.f|=se,e;if((t.f&xt)===0){if((t.f&kt)===0)throw e;t.b.error(e)}else Te(e,t)}function Te(e,t){for(;t!==null;){if((t.f&kt)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const vs=-7169;function b(e,t){e.f=e.f&vs|t}function Lt(e){(e.f&D)!==0||e.deps===null?b(e,x):b(e,H)}function Cn(e){if(e!==null)for(const t of e)(t.f&k)===0||(t.f&ve)===0||(t.f^=ve,Cn(t.deps))}function Nn(e,t,n){(e.f&P)!==0?t.add(e):(e.f&H)!==0&&n.add(e),Cn(e.deps),b(e,x)}const Ye=new Set;let y=null,He=null,X=null,q=[],it=null,wt=!1,qe=!1;class U{committed=!1;current=new Map;previous=new Map;#t=new Set;#d=new Set;#r=0;#l=0;#s=null;#n=new Set;#e=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#l>0}process(t){q=[],He=null,this.apply();var n=[],r=[];for(const s of t)this.#i(s,n,r);this.is_fork||this.#o(),this.is_deferred()?(this.#a(r),this.#a(n)):(He=this,y=null,Gt(r),Gt(n),He=null,this.#s?.resolve()),X=null}#i(t,n,r){t.f^=x;for(var s=t.first,i=null;s!==null;){var u=s.f,l=(u&(ae|ge))!==0,o=l&&(u&x)!==0,a=o||(u&ne)!==0||this.skipped_effects.has(s);if(!a&&s.fn!==null){l?s.f^=x:i!==null&&(u&(mt|De|En))!==0?i.b.defer_effect(s):(u&mt)!==0?n.push(s):xe(s)&&((u&G)!==0&&this.#n.add(s),Se(s));var f=s.first;if(f!==null){s=f;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===i&&(i=null),s=d.next,d=d.parent}}#a(t){for(var n=0;n<t.length;n+=1)Nn(t[n],this.#n,this.#e)}capture(t,n){n!==S&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&se)===0&&(this.current.set(t,t.v),X?.set(t,t.v))}activate(){y=this,this.apply()}deactivate(){y===this&&(y=null,X=null)}flush(){if(this.activate(),q.length>0){if(Rn(),y!==null&&y!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#d)t(this);this.#d.clear()}#o(){if(this.#l===0){for(const t of this.#t)t();this.#t.clear()}this.#r===0&&this.#u()}#u(){if(Ye.size>1){this.previous.clear();var t=X,n=!0;for(const s of Ye){if(s===this){n=!1;continue}const i=[];for(const[l,o]of this.current){if(s.current.has(l))if(n&&o!==s.current.get(l))s.current.set(l,o);else continue;i.push(l)}if(i.length===0)continue;const u=[...s.current.keys()].filter(l=>!this.current.has(l));if(u.length>0){var r=q;q=[];const l=new Set,o=new Map;for(const a of i)qn(a,u,l,o);if(q.length>0){y=s,s.apply();for(const a of q)s.#i(a,[],[]);s.deactivate()}q=r}}y=null,X=t}this.committed=!0,Ye.delete(this)}increment(t){this.#r+=1,t&&(this.#l+=1)}decrement(t){this.#r-=1,t&&(this.#l-=1),this.revive()}revive(){for(const t of this.#n)this.#e.delete(t),b(t,P),le(t);for(const t of this.#e)b(t,H),le(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#d.add(t)}settled(){return(this.#s??=bn()).promise}static ensure(){if(y===null){const t=y=new U;Ye.add(y),qe||U.enqueue(()=>{y===t&&t.flush()})}return y}static enqueue(t){st(t)}apply(){}}function ps(e){var t=qe;qe=!0;try{for(var n;;){if(_s(),q.length===0&&(y?.flush(),q.length===0))return it=null,n;Rn()}}finally{qe=t}}function Rn(){var e=de;wt=!0;var t=null;try{var n=0;for(We(!0);q.length>0;){var r=U.ensure();if(n++>1e3){var s,i;hs()}r.process(q),ie.clear()}}finally{wt=!1,We(e),it=null}}function hs(){try{rs()}catch(e){Te(e,it)}}let z=null;function Gt(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(re|ne))===0&&xe(r)&&(z=new Set,Se(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Kn(r):r.fn=null),z?.size>0)){ie.clear();for(const s of z){if((s.f&(re|ne))!==0)continue;const i=[s];let u=s.parent;for(;u!==null;)z.has(u)&&(z.delete(u),i.push(u)),u=u.parent;for(let l=i.length-1;l>=0;l--){const o=i[l];(o.f&(re|ne))===0&&Se(o)}}z.clear()}}z=null}}function qn(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&k)!==0?qn(s,t,n,r):(i&(At|G))!==0&&(i&P)===0&&In(s,t,r)&&(b(s,P),le(s))}}function In(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&k)!==0&&In(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function le(e){for(var t=it=e;t.parent!==null;){t=t.parent;var n=t.f;if(wt&&t===g&&(n&G)!==0&&(n&Tn)===0)return;if((n&(ge|ae))!==0){if((n&x)===0)return;t.f^=x}}q.push(t)}function gs(e){let t=0,n=Be(0),r;return()=>{Ct()&&(I(n),at(()=>(t===0&&(r=he(()=>e(()=>Ie(n)))),t+=1,()=>{st(()=>{t-=1,t===0&&(r?.(),r=void 0,Ie(n))})})))}}var ms=Ze|ke|kt;function ys(e,t,n){new ws(e,t,n)}class ws{parent;is_pending=!1;#t;#d=null;#r;#l;#s;#n=null;#e=null;#i=null;#a=null;#o=null;#u=0;#f=0;#_=!1;#v=new Set;#p=new Set;#c=null;#w=gs(()=>(this.#c=Be(this.#u),()=>{this.#c=null}));constructor(t,n,r){this.#t=t,this.#r=n,this.#l=r,this.parent=g.b,this.is_pending=!!this.#r.pending,this.#s=Is(()=>{g.b=this;{var s=this.#m();try{this.#n=ue(()=>r(s))}catch(i){this.error(i)}this.#f>0?this.#g():this.is_pending=!1}return()=>{this.#o?.remove()}},ms)}#b(){try{this.#n=ue(()=>this.#l(this.#t))}catch(t){this.error(t)}}#E(){const t=this.#r.pending;t&&(this.#e=ue(()=>t(this.#t)),U.enqueue(()=>{var n=this.#m();this.#n=this.#h(()=>(U.ensure(),ue(()=>this.#l(n)))),this.#f>0?this.#g():(ze(this.#e,()=>{this.#e=null}),this.is_pending=!1)}))}#m(){var t=this.#t;return this.is_pending&&(this.#o=jn(),this.#t.before(this.#o),t=this.#o),t}defer_effect(t){Nn(t,this.#v,this.#p)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#r.pending}#h(t){var n=g,r=p,s=w;j(this.#s),O(this.#s),Ee(this.#s.ctx);try{return t()}catch(i){return Pn(i),null}finally{j(n),O(r),Ee(s)}}#g(){const t=this.#r.pending;this.#n!==null&&(this.#a=document.createDocumentFragment(),this.#a.append(this.#o),Bs(this.#n,this.#a)),this.#e===null&&(this.#e=ue(()=>t(this.#t)))}#y(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(t);return}if(this.#f+=t,this.#f===0){this.is_pending=!1;for(const n of this.#v)b(n,P),le(n);for(const n of this.#p)b(n,H),le(n);this.#v.clear(),this.#p.clear(),this.#e&&ze(this.#e,()=>{this.#e=null}),this.#a&&(this.#t.before(this.#a),this.#a=null)}}update_pending_count(t){this.#y(t),this.#u+=t,this.#c&&Ke(this.#c,this.#u)}get_effect_pending(){return this.#w(),I(this.#c)}error(t){var n=this.#r.onerror;let r=this.#r.failed;if(this.#_||!n&&!r)throw t;this.#n&&(Y(this.#n),this.#n=null),this.#e&&(Y(this.#e),this.#e=null),this.#i&&(Y(this.#i),this.#i=null);var s=!1,i=!1;const u=()=>{if(s){fs();return}s=!0,i&&as(),U.ensure(),this.#u=0,this.#i!==null&&ze(this.#i,()=>{this.#i=null}),this.is_pending=this.has_pending_snippet(),this.#n=this.#h(()=>(this.#_=!1,ue(()=>this.#l(this.#t)))),this.#f>0?this.#g():this.is_pending=!1};var l=p;try{O(null),i=!0,n?.(t,u),i=!1}catch(o){Te(o,this.#s&&this.#s.parent)}finally{O(l)}r&&st(()=>{this.#i=this.#h(()=>{U.ensure(),this.#_=!0;try{return ue(()=>{r(this.#t,()=>t,()=>u)})}catch(o){return Te(o,this.#s.parent),null}finally{this.#_=!1}})})}}function bs(e,t,n,r){const s=Xe()?Mt:Ss;if(n.length===0&&e.length===0){r(t.map(s));return}var i=y,u=g,l=Es();function o(){Promise.all(n.map(a=>Ts(a))).then(a=>{l();try{r([...t.map(s),...a])}catch(f){(u.f&re)===0&&Te(f,u)}i?.deactivate(),Ge()}).catch(a=>{Te(a,u)})}e.length>0?Promise.all(e).then(()=>{l();try{return o()}finally{i?.deactivate(),Ge()}}):o()}function Es(){var e=g,t=p,n=w,r=y;return function(i=!0){j(e),O(t),Ee(n),i&&r?.activate()}}function Ge(){j(null),O(null),Ee(null)}function Mt(e){var t=k|P,n=p!==null&&(p.f&k)!==0?p:null;return g!==null&&(g.f|=ke),{ctx:w,deps:null,effects:null,equals:kn,f:t,fn:e,reactions:null,rv:0,v:S,wv:0,parent:n??g,ac:null}}function Ts(e,t,n){let r=g;r===null&&Qr();var s=r.b,i=void 0,u=Be(S),l=!p,o=new Map;return Rs(()=>{var a=bn();i=a.promise;try{Promise.resolve(e()).then(a.resolve,a.reject).then(()=>{f===y&&f.committed&&f.deactivate(),Ge()})}catch(v){a.reject(v),Ge()}var f=y;if(l){var d=s.is_rendered();s.update_pending_count(1),f.increment(d),o.get(f)?.reject(be),o.delete(f),o.set(f,a)}const c=(v,h=void 0)=>{if(f.activate(),h)h!==be&&(u.f|=se,Ke(u,h));else{(u.f&se)!==0&&(u.f^=se),Ke(u,v);for(const[E,A]of o){if(o.delete(E),E===f)break;A.reject(be)}}l&&(s.update_pending_count(-1),f.decrement(d))};a.promise.then(c,v=>c(null,v||"unknown"))}),Nt(()=>{for(const a of o.values())a.reject(be)}),new Promise(a=>{function f(d){function c(){d===i?a(u):f(i)}d.then(c,c)}f(i)})}function Ss(e){const t=Mt(e);return t.equals=An,t}function Dn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Y(t[n])}}function ks(e){for(var t=e.parent;t!==null;){if((t.f&k)===0)return(t.f&re)===0?t:null;t=t.parent}return null}function Ot(e){var t,n=g;j(ks(e));try{e.f&=~ve,Dn(e),t=tr(e)}finally{j(n)}return t}function Xn(e){var t=Ot(e);if(!e.equals(t)&&(e.wv=Qn(),(!y?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){b(e,x);return}pe||(X!==null?(Ct()||y?.is_fork)&&X.set(e,t):Lt(e))}let bt=new Set;const ie=new Map;let Bn=!1;function Be(e,t){var n={f:0,v:e,reactions:null,equals:kn,rv:0,wv:0};return n}function J(e,t){const n=Be(e);return Fs(n),n}function Et(e,t=!1,n=!0){const r=Be(e);return t||(r.equals=An),rt&&n&&w!==null&&w.l!==null&&(w.l.s??=[]).push(r),r}function $(e,t,n=!1){p!==null&&(!B||(p.f&Zt)!==0)&&Xe()&&(p.f&(k|G|At|Zt))!==0&&!Z?.includes(e)&&ls();let r=n?Pe(t):t;return Ke(e,r)}function Ke(e,t){if(!e.equals(t)){var n=e.v;pe?ie.set(e,t):ie.set(e,n),e.v=t;var r=U.ensure();if(r.capture(e,n),(e.f&k)!==0){const s=e;(e.f&P)!==0&&Ot(s),Lt(s)}e.wv=Qn(),Fn(e,P),Xe()&&g!==null&&(g.f&x)!==0&&(g.f&(ae|ge))===0&&(R===null?$s([e]):R.push(e)),!r.is_fork&&bt.size>0&&!Bn&&xs()}return t}function xs(){Bn=!1;var e=de;We(!0);const t=Array.from(bt);try{for(const n of t)(n.f&x)!==0&&b(n,H),xe(n)&&Se(n)}finally{We(e)}bt.clear()}function Ie(e){$(e,e.v+1)}function Fn(e,t){var n=e.reactions;if(n!==null)for(var r=Xe(),s=n.length,i=0;i<s;i++){var u=n[i],l=u.f;if(!(!r&&u===g)){var o=(l&P)===0;if(o&&b(u,t),(l&k)!==0){var a=u;X?.delete(a),(l&ve)===0&&(l&D&&(u.f|=ve),Fn(a,H))}else o&&((l&G)!==0&&z!==null&&z.add(u),le(u))}}}function Pe(e){if(typeof e!="object"||e===null||Re in e)return e;const t=wn(e);if(t!==Kr&&t!==Wr)return e;var n=new Map,r=zr(e),s=J(0),i=_e,u=l=>{if(_e===i)return l();var o=p,a=_e;O(null),tn(i);var f=l();return O(o),tn(a),f};return r&&n.set("length",J(e.length)),new Proxy(e,{defineProperty(l,o,a){(!("value"in a)||a.configurable===!1||a.enumerable===!1||a.writable===!1)&&ss();var f=n.get(o);return f===void 0?f=u(()=>{var d=J(a.value);return n.set(o,d),d}):$(f,a.value,!0),!0},deleteProperty(l,o){var a=n.get(o);if(a===void 0){if(o in l){const f=u(()=>J(S));n.set(o,f),Ie(s)}}else $(a,S),Ie(s);return!0},get(l,o,a){if(o===Re)return e;var f=n.get(o),d=o in l;if(f===void 0&&(!d||Ne(l,o)?.writable)&&(f=u(()=>{var v=Pe(d?l[o]:S),h=J(v);return h}),n.set(o,f)),f!==void 0){var c=I(f);return c===S?void 0:c}return Reflect.get(l,o,a)},getOwnPropertyDescriptor(l,o){var a=Reflect.getOwnPropertyDescriptor(l,o);if(a&&"value"in a){var f=n.get(o);f&&(a.value=I(f))}else if(a===void 0){var d=n.get(o),c=d?.v;if(d!==void 0&&c!==S)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return a},has(l,o){if(o===Re)return!0;var a=n.get(o),f=a!==void 0&&a.v!==S||Reflect.has(l,o);if(a!==void 0||g!==null&&(!f||Ne(l,o)?.writable)){a===void 0&&(a=u(()=>{var c=f?Pe(l[o]):S,v=J(c);return v}),n.set(o,a));var d=I(a);if(d===S)return!1}return f},set(l,o,a,f){var d=n.get(o),c=o in l;if(r&&o==="length")for(var v=a;v<d.v;v+=1){var h=n.get(v+"");h!==void 0?$(h,S):v in l&&(h=u(()=>J(S)),n.set(v+"",h))}if(d===void 0)(!c||Ne(l,o)?.writable)&&(d=u(()=>J(void 0)),$(d,Pe(a)),n.set(o,d));else{c=d.v!==S;var E=u(()=>Pe(a));$(d,E)}var A=Reflect.getOwnPropertyDescriptor(l,o);if(A?.set&&A.set.call(f,a),!c){if(r&&typeof o=="string"){var $e=n.get("length"),Ae=Number(o);Number.isInteger(Ae)&&Ae>=$e.v&&$($e,Ae+1)}Ie(s)}return!0},ownKeys(l){I(s);var o=Reflect.ownKeys(l).filter(d=>{var c=n.get(d);return c===void 0||c.v!==S});for(var[a,f]of n)f.v!==S&&!(a in l)&&o.push(a);return o},setPrototypeOf(){is()}})}var Kt,$n,Un,Yn;function As(){if(Kt===void 0){Kt=window,$n=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Un=Ne(t,"firstChild").get,Yn=Ne(t,"nextSibling").get,Vt(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Vt(n)&&(n.__t=void 0)}}function jn(e=""){return document.createTextNode(e)}function Hn(e){return Un.call(e)}function Pt(e){return Yn.call(e)}function C(e,t){return Hn(e)}function L(e,t=1,n=!1){let r=e;for(;t--;)r=Pt(r);return r}let Wt=!1;function Ls(){Wt||(Wt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function lt(e){var t=p,n=g;O(null),j(null);try{return e()}finally{O(t),j(n)}}function Ms(e,t,n,r=n){e.addEventListener(t,()=>lt(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),Ls()}function zn(e){g===null&&(p===null&&ns(),ts()),pe&&es()}function Os(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function K(e,t,n){var r=g;r!==null&&(r.f&ne)!==0&&(e|=ne);var s={ctx:w,deps:null,nodes:null,f:e|P|D,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{Se(s),s.f|=xt}catch(l){throw Y(s),l}else t!==null&&le(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&ke)===0&&(i=i.first,(e&G)!==0&&(e&Ze)!==0&&i!==null&&(i.f|=Ze)),i!==null&&(i.parent=r,r!==null&&Os(i,r),p!==null&&(p.f&k)!==0&&(e&ge)===0)){var u=p;(u.effects??=[]).push(i)}return s}function Ct(){return p!==null&&!B}function Nt(e){const t=K(De,null,!1);return b(t,x),t.teardown=e,t}function Jt(e){zn();var t=g.f,n=!p&&(t&ae)!==0&&(t&xt)===0;if(n){var r=w;(r.e??=[]).push(e)}else return Vn(e)}function Vn(e){return K(mt|Sn,e,!1)}function Ps(e){return zn(),K(De|Sn,e,!0)}function Cs(e){U.ensure();const t=K(ge|ke,e,!0);return(n={})=>new Promise(r=>{n.outro?ze(t,()=>{Y(t),r(void 0)}):(Y(t),r(void 0))})}function Qt(e,t){var n=w,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=at(()=>{e(),!r.ran&&(r.ran=!0,he(t))})}function Ns(){var e=w;at(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&x)!==0&&n.deps!==null&&b(n,H),xe(n)&&Se(n),t.ran=!1}})}function Rs(e){return K(At|ke,e,!0)}function at(e,t=0){return K(De|t,e,!0)}function qs(e,t=[],n=[],r=[]){bs(r,t,n,s=>{K(De,()=>e(...s.map(I)),!0)})}function Is(e,t=0){var n=K(G|t,e,!0);return n}function ue(e){return K(ae|ke,e,!0)}function Zn(e){var t=e.teardown;if(t!==null){const n=pe,r=p;en(!0),O(null);try{t.call(null)}finally{en(n),O(r)}}}function Gn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&lt(()=>{s.abort(be)});var r=n.next;(n.f&ge)!==0?n.parent=null:Y(n,t),n=r}}function Ds(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ae)===0&&Y(t),t=n}}function Y(e,t=!0){var n=!1;(t||(e.f&Tn)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Xs(e.nodes.start,e.nodes.end),n=!0),Gn(e,t&&!n),Je(e,0),b(e,re);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();Zn(e);var s=e.parent;s!==null&&s.first!==null&&Kn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Xs(e,t){for(;e!==null;){var n=e===t?null:Pt(e);e.remove(),e=n}}function Kn(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function ze(e,t,n=!0){var r=[];Wn(e,r,!0);var s=()=>{n&&Y(e),t&&t()},i=r.length;if(i>0){var u=()=>--i||s();for(var l of r)l.out(u)}else s()}function Wn(e,t,n){if((e.f&ne)===0){e.f^=ne;var r=e.nodes&&e.nodes.t;if(r!==null)for(const l of r)(l.is_global||n)&&t.push(l);for(var s=e.first;s!==null;){var i=s.next,u=(s.f&Ze)!==0||(s.f&ae)!==0&&(e.f&G)!==0;Wn(s,t,u?n:!1),s=i}}}function Bs(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var s=n===r?null:Pt(n);t.append(n),n=s}}let de=!1;function We(e){de=e}let pe=!1;function en(e){pe=e}let p=null,B=!1;function O(e){p=e}let g=null;function j(e){g=e}let Z=null;function Fs(e){p!==null&&(Z===null?Z=[e]:Z.push(e))}let M=null,N=0,R=null;function $s(e){R=e}let Jn=1,ce=0,_e=ce;function tn(e){_e=e}function Qn(){return++Jn}function xe(e){var t=e.f;if((t&P)!==0)return!0;if(t&k&&(e.f&=~ve),(t&H)!==0){for(var n=e.deps,r=n.length,s=0;s<r;s++){var i=n[s];if(xe(i)&&Xn(i),i.wv>e.wv)return!0}(t&D)!==0&&X===null&&b(e,x)}return!1}function er(e,t,n=!0){var r=e.reactions;if(r!==null&&!Z?.includes(e))for(var s=0;s<r.length;s++){var i=r[s];(i.f&k)!==0?er(i,t,!1):t===i&&(n?b(i,P):(i.f&x)!==0&&b(i,H),le(i))}}function tr(e){var t=M,n=N,r=R,s=p,i=Z,u=w,l=B,o=_e,a=e.f;M=null,N=0,R=null,p=(a&(ae|ge))===0?e:null,Z=null,Ee(e.ctx),B=!1,_e=++ce,e.ac!==null&&(lt(()=>{e.ac.abort(be)}),e.ac=null);try{e.f|=yt;var f=e.fn,d=f(),c=e.deps;if(M!==null){var v;if(Je(e,N),c!==null&&N>0)for(c.length=N+M.length,v=0;v<M.length;v++)c[N+v]=M[v];else e.deps=c=M;if(Ct()&&(e.f&D)!==0)for(v=N;v<c.length;v++)(c[v].reactions??=[]).push(e)}else c!==null&&N<c.length&&(Je(e,N),c.length=N);if(Xe()&&R!==null&&!B&&c!==null&&(e.f&(k|H|P))===0)for(v=0;v<R.length;v++)er(R[v],e);if(s!==null&&s!==e){if(ce++,s.deps!==null)for(let h=0;h<n;h+=1)s.deps[h].rv=ce;if(t!==null)for(const h of t)h.rv=ce;R!==null&&(r===null?r=R:r.push(...R))}return(e.f&se)!==0&&(e.f^=se),d}catch(h){return Pn(h)}finally{e.f^=yt,M=t,N=n,R=r,p=s,Z=i,Ee(u),B=l,_e=o}}function Us(e,t){let n=t.reactions;if(n!==null){var r=Vr.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}if(n===null&&(t.f&k)!==0&&(M===null||!M.includes(t))){var i=t;(i.f&D)!==0&&(i.f^=D,i.f&=~ve),Lt(i),Dn(i),Je(i,0)}}function Je(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Us(e,n[r])}function Se(e){var t=e.f;if((t&re)===0){b(e,x);var n=g,r=de;g=e,de=!0;try{(t&(G|En))!==0?Ds(e):Gn(e),Zn(e);var s=tr(e);e.teardown=typeof s=="function"?s:null,e.wv=Jn;var i;gt&&cs&&(e.f&P)!==0&&e.deps}finally{de=r,g=n}}}async function Ys(){await Promise.resolve(),ps()}function I(e){var t=e.f,n=(t&k)!==0;if(p!==null&&!B){var r=g!==null&&(g.f&re)!==0;if(!r&&!Z?.includes(e)){var s=p.deps;if((p.f&yt)!==0)e.rv<ce&&(e.rv=ce,M===null&&s!==null&&s[N]===e?N++:M===null?M=[e]:M.push(e));else{(p.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[p]:i.includes(p)||i.push(p)}}}if(pe&&ie.has(e))return ie.get(e);if(n){var u=e;if(pe){var l=u.v;return((u.f&x)===0&&u.reactions!==null||rr(u))&&(l=Ot(u)),ie.set(u,l),l}var o=(u.f&D)===0&&!B&&p!==null&&(de||(p.f&D)!==0),a=u.deps===null;xe(u)&&(o&&(u.f|=D),Xn(u)),o&&!a&&nr(u)}if(X?.has(e))return X.get(e);if((e.f&se)!==0)throw e.v;return e.v}function nr(e){if(e.deps!==null){e.f|=D;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&k)!==0&&(t.f&D)===0&&nr(t)}}function rr(e){if(e.v===S)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ie.has(t)||(t.f&k)!==0&&rr(t))return!0;return!1}function he(e){var t=B;try{return B=!0,e()}finally{B=t}}function js(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Re in e)Tt(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Re in n&&Tt(n)}}}function Tt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Tt(e[r],t)}catch{}const n=wn(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Gr(n);for(let s in r){const i=r[s].get;if(i)try{i.call(e)}catch{}}}}}const Hs=["touchstart","touchmove"];function zs(e){return Hs.includes(e)}const Vs=new Set,nn=new Set;function Zs(e,t,n,r={}){function s(i){if(r.capture||Ce.call(t,i),!i.cancelBubble)return lt(()=>n?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?st(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function rn(e,t,n,r,s){var i={capture:r,passive:s},u=Zs(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Nt(()=>{t.removeEventListener(e,u,i)})}let sn=null;function Ce(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;sn=e;var u=0,l=sn===e&&e.__root;if(l){var o=s.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var a=s.indexOf(t);if(a===-1)return;o<=a&&(u=o)}if(i=s[u]||e.target,i!==t){yn(e,"currentTarget",{configurable:!0,get(){return i||n}});var f=p,d=g;O(null),j(null);try{for(var c,v=[];i!==null;){var h=i.assignedSlot||i.parentNode||i.host||null;try{var E=i["__"+r];E!=null&&(!i.disabled||e.target===i)&&E.call(i,e)}catch(A){c?v.push(A):c=A}if(e.cancelBubble||h===t||h===null)break;i=h}if(c){for(let A of v)queueMicrotask(()=>{throw A});throw c}}finally{e.__root=t,delete e.currentTarget,O(f),j(d)}}}function Gs(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ks(e,t){var n=g;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function Ws(e,t){var n=(t&os)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=Gs(s?e:"<!>"+e),r=Hn(r));var i=n||$n?document.importNode(r,!0):r.cloneNode(!0);return Ks(i,i),i}}function Js(e,t){e!==null&&e.before(t)}function Me(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Qs(e,t){return ei(e,t)}const ye=new Map;function ei(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:u=!0}){As();var l=new Set,o=d=>{for(var c=0;c<d.length;c++){var v=d[c];if(!l.has(v)){l.add(v);var h=zs(v);t.addEventListener(v,Ce,{passive:h});var E=ye.get(v);E===void 0?(document.addEventListener(v,Ce,{passive:h}),ye.set(v,1)):ye.set(v,E+1)}}};o(Zr(Vs)),nn.add(o);var a=void 0,f=Cs(()=>{var d=n??t.appendChild(jn());return ys(d,{pending:()=>{}},c=>{if(i){Ln({});var v=w;v.c=i}s&&(r.$$events=s),a=e(c,r)||{},i&&Mn()}),()=>{for(var c of l){t.removeEventListener(c,Ce);var v=ye.get(c);--v===0?(document.removeEventListener(c,Ce),ye.delete(c)):ye.set(c,v)}nn.delete(o),d!==n&&d.parentNode?.removeChild(d)}});return ti.set(a,f),a}let ti=new WeakMap;const ni=Symbol("is custom element"),ri=Symbol("is html");function ln(e,t){var n=si(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function si(e){return e.__attributes??={[ni]:e.nodeName.includes("-"),[ri]:e.namespaceURI===us}}function an(e,t,n=t){var r=new WeakSet;Ms(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=_t(e)?vt(i):i,n(i),y!==null&&r.add(y),await Ys(),i!==(i=t())){var u=e.selectionStart,l=e.selectionEnd,o=e.value.length;if(e.value=i??"",l!==null){var a=e.value.length;u===l&&l===o&&a>o?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=u,e.selectionEnd=Math.min(l,a))}}}),he(t)==null&&e.value&&(n(_t(e)?vt(e.value):e.value),y!==null&&r.add(y)),at(()=>{var s=t();if(e===document.activeElement){var i=He??y;if(r.has(i))return}_t(e)&&s===vt(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function _t(e){var t=e.type;return t==="number"||t==="range"}function vt(e){return e===""?null:+e}function ii(e=!1){const t=w,n=t.l.u;if(!n)return;let r=()=>js(t.s);if(e){let s=0,i={};const u=Mt(()=>{let l=!1;const o=t.s;for(const a in o)o[a]!==i[a]&&(i[a]=o[a],l=!0);return l&&s++,s});r=()=>I(u)}n.b.length&&Ps(()=>{on(t,r),Ve(n.b)}),Jt(()=>{const s=he(()=>n.m.map(Jr));return()=>{for(const i of s)typeof i=="function"&&i()}}),n.a.length&&Jt(()=>{on(t,r),Ve(n.a)})}function on(e,t){if(e.l.s)for(const n of e.l.s)I(n);t()}function Rt(e,t,n){if(e==null)return t(void 0),n&&n(void 0),te;const r=he(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const we=[];function li(e,t){return{subscribe:Fe(e,t).subscribe}}function Fe(e,t=te){let n=null;const r=new Set;function s(l){if(xn(e,l)&&(e=l,n)){const o=!we.length;for(const a of r)a[1](),we.push(a,e);if(o){for(let a=0;a<we.length;a+=2)we[a][0](we[a+1]);we.length=0}}}function i(l){s(l(e))}function u(l,o=te){const a=[l,o];return r.add(a),r.size===1&&(n=t(s,i)||te),l(e),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:u}}function ai(e,t,n){const r=!Array.isArray(e),s=r?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return li(n,(u,l)=>{let o=!1;const a=[];let f=0,d=te;const c=()=>{if(f)return;d();const h=t(r?a[0]:a,u,l);i?u(h):d=typeof h=="function"?h:te},v=s.map((h,E)=>Rt(h,A=>{a[E]=A,f&=~(1<<E),o&&c()},()=>{f|=1<<E}));return o=!0,c(),function(){Ve(v),d(),o=!1}})}function oi(e){let t;return Rt(e,n=>t=n)(),t}let St=Symbol();function Oe(e,t,n){const r=n[t]??={store:null,source:Et(void 0),unsubscribe:te};if(r.store!==e&&!(St in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=te;else{var s=!0;r.unsubscribe=Rt(e,i=>{s?r.source.v=i:$(r.source,i)}),s=!1}return e&&St in n?oi(e):I(r.source)}function un(e,t){return e.set(t),t}function ui(){const e={};function t(){Nt(()=>{for(var n in e)e[n].unsubscribe();yn(e,St,{enumerable:!1,value:!0})})}return[e,t]}const fi="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(fi);ds();const Qe=Fe(500),et=Fe(50),tt=Fe(5),nt=Fe(.6),ci=ai([Qe,et,tt,nt],([e,t,n,r])=>Lr({targetLatencyMs:e,draftLatencyMs:t,k:n,acceptanceProb:r}));var di=Ws('<div class="controls svelte-13a2uqt"><div class="speedup-row svelte-13a2uqt"><div class="legend svelte-13a2uqt"><span class="legend-item svelte-13a2uqt"><span class="legend-dot sequential svelte-13a2uqt"></span>Sequential</span> <span class="legend-item svelte-13a2uqt"><span class="legend-dot speculative svelte-13a2uqt"></span>Speculative Decoding</span></div> <div class="speedup-display svelte-13a2uqt"><span class="speedup-label svelte-13a2uqt">Speedup</span> <span class="speedup-value svelte-13a2uqt"> </span></div></div> <div class="sliders svelte-13a2uqt"><div class="slider-row svelte-13a2uqt"><label for="k-slider" class="slider-label svelte-13a2uqt">K</label> <input id="k-slider" type="range" min="1" max="10" step="1" class="slider svelte-13a2uqt"/> <span class="slider-value svelte-13a2uqt"> </span></div> <div class="slider-row svelte-13a2uqt"><label for="accept-slider" class="slider-label svelte-13a2uqt">Accept</label> <input id="accept-slider" type="range" min="0" max="1" step="0.05" class="slider slider-accept svelte-13a2uqt"/> <span class="slider-value svelte-13a2uqt"> </span></div> <div class="slider-row svelte-13a2uqt"><label for="target-slider" class="slider-label svelte-13a2uqt">Target</label> <input id="target-slider" type="range" min="20" max="200" step="5" class="slider slider-target svelte-13a2uqt"/> <span class="slider-value svelte-13a2uqt"> </span></div> <div class="slider-row svelte-13a2uqt"><label for="draft-slider" class="slider-label svelte-13a2uqt">Draft</label> <input id="draft-slider" type="range" min="1" max="50" step="1" class="slider slider-draft svelte-13a2uqt"/> <span class="slider-value svelte-13a2uqt"> </span></div></div></div>');function _i(e,t){Ln(t,!1);const n=()=>Oe(Qe,"$targetLatencyMs",l),r=()=>Oe(et,"$draftLatencyMs",l),s=()=>Oe(ci,"$computation",l),i=()=>Oe(tt,"$k",l),u=()=>Oe(nt,"$acceptanceProb",l),[l,o]=ui(),a=Et(),f=Et();function d(T){return T.toFixed(2)+"Ã—"}function c(T){return Math.round(T*100)+"%"}function v(T){Qe.set(T*10)}function h(T){et.set(T*10)}Qt(()=>n(),()=>{$(a,n()/10)}),Qt(()=>r(),()=>{$(f,r()/10)}),Ns(),ii();var E=di(),A=C(E),$e=L(C(A),2),Ae=L(C($e),2),sr=C(Ae),ir=L(A,2),qt=C(ir),It=L(C(qt),2),lr=L(It,2),ar=C(lr),Dt=L(qt,2),Xt=L(C(Dt),2),or=L(Xt,2),ur=C(or),Bt=L(Dt,2),ot=L(C(Bt),2),fr=L(ot,2),cr=C(fr),dr=L(Bt,2),ut=L(C(dr),2),_r=L(ut,2),vr=C(_r);qs((T,pr)=>{Me(sr,T),Me(ar,i()),Me(ur,pr),ln(ot,I(a)),Me(cr,`${n()??""}ms`),ln(ut,I(f)),Me(vr,`${r()??""}ms`)},[()=>(s(),he(()=>d(s().speedup))),()=>(u(),he(()=>c(u())))]),an(It,i,T=>un(tt,T)),an(Xt,u,T=>un(nt,T)),rn("input",ot,T=>v(+T.currentTarget.value)),rn("input",ut,T=>h(+T.currentTarget.value)),Js(e,E),Mn(),o()}async function fn(){const e=document.getElementById("canvas"),t=document.getElementById("controls");if(!e)return;Ft(e),gr(e),window.addEventListener("resize",()=>Ft(e)),await mr("ABC Diatype",400);const n=await yr.new().withCanvas(e).withLoading(wr(e)).withPlugins(br,Er,Tr,Sr,kr,Hr).withScene("../scenes/speedup.scene").build();xr(n),tt.subscribe(r=>Ue({k:r})),Qe.subscribe(r=>Ue({targetLatencyMs:r})),et.subscribe(r=>Ue({draftLatencyMs:r})),nt.subscribe(r=>Ue({acceptanceProb:r})),t&&Qs(_i,{target:t})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",fn):fn();
//# sourceMappingURL=speedup-CcFrThci.js.map
