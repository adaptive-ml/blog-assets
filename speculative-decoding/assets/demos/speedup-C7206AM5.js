import"../modulepreload-polyfill-B5Qt9EMX.js";import{i as gr,f as y,j as _,M as me,s as Ft,a as mr,S as yr,m as wr,T as br,R as Er,I as Tr,O as Sr,b as kr,g as xr}from"../canvas-setup-FxFxhnX5.js";function Ar(e,t){return t===1?e+1:t===0?1:(1-Math.pow(t,e+1))/(1-t)}function Lr(e){const{targetLatencyMs:t,draftLatencyMs:n,k:r,acceptanceProb:s}=e,i=t,o=t+r*n,l=Ar(r,s),u=o/l,a=t/u;return{sequentialIntervalMs:i,speculativeIntervalMs:o,expectedTokensPerCycle:l,effectiveRateMs:u,speedup:a}}function Mr(e,t){let n=1;for(let r=0;r<e&&Math.random()<t;r++)n++;return n}const Or=-.5,Pr=.5,_t=.5,pt=-30,$t=0,cn=1,Cr=1.5,Nr=.3,Ut=3.5,Rr=10,ot=4886745,ut=9133302;let ee={k:5,targetLatencyMs:500,draftLatencyMs:50,acceptanceProb:.6};const V={id:[],baseX:[],beltId:[]};gr(V,{defaults:()=>({id:0,baseX:0,beltId:0})});let dn,_n,qr=0,pn=!1,$=0;const W=.05,oe=.04,Me=.15,ft=.3,Yt=.12;let Q=-1,He=-1;function vn(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)}function hn(e){return e===1?1:1-Math.pow(2,-10*e)}function gn(e){return e>Or&&e<Pr}function Ir(){return Mr(ee.k,ee.acceptanceProb)}function jt(e,t,n){const r=e.addEntity();return e.addComponent(r,_),e.addComponent(r,y),_.posX[r]=Cr,_.posY[r]=0,_.posZ[r]=t,_.eulerX[r]=-90,_.scaleX[r]=0,_.scaleY[r]=0,_.scaleZ[r]=0,y.content[r]="",y.fontSize[r]=.8,y.color[r]=n,y.anchorX[r]=.5,y.anchorY[r]=.5,r}function Dr(e){const t=e.addEntity();return e.addComponent(t,_),e.addComponent(t,y),_.posX[t]=1.6,_.posY[t]=0,_.posZ[t]=2.7,_.eulerX[t]=-90,_.scaleX[t]=0,_.scaleY[t]=0,_.scaleZ[t]=0,y.content[t]="bonus!",y.fontSize[t]=.4,y.color[t]=12616956,y.anchorX[t]=.5,y.anchorY[t]=.5,t}function Ht(e,t,n){const r=e.addEntity();e.addComponent(r,_),e.addComponent(r,y),_.posX[r]=Ut,_.posY[r]=0,_.posZ[r]=t,_.eulerX[r]=-90,y.content[r]="0.0",y.fontSize[r]=.6,y.color[r]=n,y.anchorX[r]=1,y.anchorY[r]=.5;const s=e.addEntity();return e.addComponent(s,_),e.addComponent(s,y),_.posX[s]=Ut+.1,_.posY[s]=0,_.posZ[s]=t,_.eulerX[s]=-90,y.content[s]="tok/s",y.fontSize[s]=.4,y.color[s]=6710886,y.anchorX[s]=0,y.anchorY[s]=.5,{valueEid:r,unitEid:s}}function Xr(e,t,n){const r=e.addEntity();e.addComponent(r,_),e.addComponent(r,me),e.addComponent(r,V),V.id[r]=qr++,V.baseX[r]=n,V.beltId[r]=t.id,_.posX[r]=n,_.posY[r]=0,_.posZ[r]=t.z;const s=gn(n);return _.scaleX[r]=s?0:1,_.scaleY[r]=s?0:1,_.scaleZ[r]=s?0:1,me.shape[r]=0,me.sizeX[r]=.3,me.sizeY[r]=.3,me.sizeZ[r]=.3,me.color[r]=t.color,r}function mn(e){const t=_.posX[e],n=gn(t);_.scaleX[e]=n?0:1,_.scaleY[e]=n?0:1,_.scaleZ[e]=n?0:1}function Br(e,t){let n=0;if(t.isSliding){const i=Math.min(($-t.slideStartTime)/t.slideTime,1);n=t.slideAmount*hn(i)}let r=pt,s=pt;for(const i of t.tokens){const o=_.posX[i];o>r&&(r=o,s=V.baseX[i])}for(;r<$t;){const i=s+cn,o=i-n;if(o>$t)break;const l=Xr(e,t,i);t.tokens.push(l),_.posX[l]=o,mn(l),s=i,r=o}}function Fr(e,t){t.tokens=t.tokens.filter(n=>_.posX[n]<pt?(e.removeEntity(n),!1):!0)}function $r(e){if(e.labelPopStartTime<0)return;const t=Math.min(($-e.labelPopStartTime)/Nr,1),n=vn(t);_.scaleX[e.labelEid]=n,_.scaleY[e.labelEid]=n,_.scaleZ[e.labelEid]=n}function Ur(){if(He<0||Q<0)return;const e=$-He,t=W+oe+Me+ft+Yt;if(e>=t){_.scaleX[Q]=0,_.scaleY[Q]=0,_.scaleZ[Q]=0,He=-1;return}let n;if(e<W)n=0;else if(e<W+oe)n=.3*((e-W)/oe);else if(e<W+oe+Me){const r=(e-W-oe)/Me;n=.3+.7*vn(r)}else e<W+oe+Me+ft?n=1:n=1-(e-W-oe-Me-ft)/Yt;_.scaleX[Q]=n,_.scaleY[Q]=n,_.scaleZ[Q]=n}function zt(e,t,n){t.timer+=n;const r=t.getInterval(),s=Math.min(r*.8,_t);if(!t.isSliding&&t.timer>=r){const l=t.getTokenCount();t.slideAmount=l*cn,t.slideStartTime=$,t.slideTime=s,t.isSliding=!0,t.timer=0,t.lastTokenCount=l,y.content[t.labelEid]=`+${l}`,t.labelPopStartTime=$,t.id===1&&l===ee.k+1&&(He=$),t.tokenHistory.push({time:$,count:l})}const i=$-Rr;for(;t.tokenHistory.length>0&&t.tokenHistory[0].time<i;)t.tokenHistory.shift();let o=0;if(t.tokenHistory.length>=2){const l=t.tokenHistory.reduce((d,f)=>d+f.count,0),u=t.tokenHistory[0].time,c=t.tokenHistory[t.tokenHistory.length-1].time-u;if(c>0){const d=t.tokenHistory[0].count;o=(l-d)/c}}if(y.content[t.rateValueEid]=o.toFixed(1),t.isSliding){const l=Math.min(($-t.slideStartTime)/t.slideTime,1),u=t.slideAmount*hn(l);for(const a of t.tokens)_.posX[a]=V.baseX[a]-u,mn(a);if(l>=1){for(const a of t.tokens)V.baseX[a]=_.posX[a];t.isSliding=!1}}$r(t),Br(e,t),Fr(e,t)}function Yr(e){const t=Ht(e,0,ot);dn={id:0,z:0,color:ot,tokens:[],getTokenCount:()=>1,getInterval:()=>ee.targetLatencyMs/1e3,timer:0,isSliding:!1,slideStartTime:0,slideTime:_t,slideAmount:0,labelEid:jt(e,0,ot),lastTokenCount:0,labelPopStartTime:-1,rateValueEid:t.valueEid,rateUnitEid:t.unitEid,tokenHistory:[]};const n=Ht(e,2,ut);_n={id:1,z:2,color:ut,tokens:[],getTokenCount:Ir,getInterval:()=>(ee.targetLatencyMs+ee.k*ee.draftLatencyMs)/1e3,timer:0,isSliding:!1,slideStartTime:0,slideTime:_t,slideAmount:0,labelEid:jt(e,2,ut),lastTokenCount:0,labelPopStartTime:-1,rateValueEid:n.valueEid,rateUnitEid:n.unitEid,tokenHistory:[]},Q=Dr(e),pn=!0}const jr={group:"simulation",update(e){pn||Yr(e);const t=Math.min(e.time.deltaTime,.05);$+=t,zt(e,dn,t),zt(e,_n,t),Ur()}},Hr={components:{Token:V},systems:[jr]};function Ye(e){Object.assign(ee,e)}const vt=!1;var zr=Array.isArray,Vr=Array.prototype.indexOf,Ee=Array.prototype.includes,Zr=Array.from,yn=Object.defineProperty,Re=Object.getOwnPropertyDescriptor,Gr=Object.getOwnPropertyDescriptors,Kr=Object.prototype,Wr=Array.prototype,wn=Object.getPrototypeOf,Vt=Object.isExtensible;const te=()=>{};function Jr(e){return e()}function Ze(e){for(var t=0;t<e.length;t++)e[t]()}function bn(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const x=2,ht=4,Xe=8,En=1<<24,Z=16,G=32,ge=64,kt=128,I=512,T=1024,O=2048,H=4096,ne=8192,re=16384,xt=32768,Ge=65536,Zt=1<<17,Tn=1<<18,xe=1<<19,Sn=1<<20,pe=32768,gt=1<<21,At=1<<22,se=1<<23,qe=Symbol("$state"),be=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Qr(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function es(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ts(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ns(e){throw new Error("https://svelte.dev/e/effect_orphan")}function rs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ss(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function is(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ls(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function as(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const os=2,k=Symbol(),us="http://www.w3.org/1999/xhtml";function fs(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function kn(e){return e===this.v}function xn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function An(e){return!xn(e,this.v)}let nt=!1,cs=!1;function ds(){nt=!0}let b=null;function Te(e){b=e}function Ln(e,t=!1,n){b={p:b,i:!1,c:null,e:null,s:e,x:null,l:nt&&!t?{s:null,u:null,$:[]}:null}}function Mn(e){var t=b,n=t.e;if(n!==null){t.e=null;for(var r of n)Zn(r)}return t.i=!0,b=t.p,{}}function Be(){return!nt||b!==null&&b.l===null}let fe=[];function On(){var e=fe;fe=[],Ze(e)}function de(e){if(fe.length===0&&!Ie){var t=fe;queueMicrotask(()=>{t===fe&&On()})}fe.push(e)}function _s(){for(;fe.length>0;)On()}function Pn(e){var t=g;if(t===null)return h.f|=se,e;if((t.f&xt)===0){if((t.f&kt)===0)throw e;t.b.error(e)}else Se(e,t)}function Se(e,t){for(;t!==null;){if((t.f&kt)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const ps=-7169;function E(e,t){e.f=e.f&ps|t}function Lt(e){(e.f&I)!==0||e.deps===null?E(e,T):E(e,H)}function Cn(e){if(e!==null)for(const t of e)(t.f&x)===0||(t.f&pe)===0||(t.f^=pe,Cn(t.deps))}function Nn(e,t,n){(e.f&O)!==0?t.add(e):(e.f&H)!==0&&n.add(e),Cn(e.deps),E(e,T)}const je=new Set;let m=null,mt=null,B=null,N=[],rt=null,yt=!1,Ie=!1;class ie{committed=!1;current=new Map;previous=new Map;#t=new Set;#d=new Set;#n=0;#a=0;#i=null;#r=new Set;#e=new Set;skipped_effects=new Set;is_fork=!1;#s=!1;is_deferred(){return this.is_fork||this.#a>0}process(t){N=[],this.apply();var n=[],r=[];for(const s of t)this.#l(s,n,r);if(this.is_deferred()){this.#o(r),this.#o(n);for(const s of this.skipped_effects)Dn(s)}else{for(const s of this.#t)s();this.#t.clear(),this.#n===0&&this.#u(),mt=this,m=null,Gt(r),Gt(n),mt=null,this.#i?.resolve()}B=null}#l(t,n,r){t.f^=T;for(var s=t.first,i=null;s!==null;){var o=s.f,l=(o&(G|ge))!==0,u=l&&(o&T)!==0,a=u||(o&ne)!==0||this.skipped_effects.has(s);if(!a&&s.fn!==null){l?s.f^=T:i!==null&&(o&(ht|Xe|En))!==0?i.b.defer_effect(s):(o&ht)!==0?n.push(s):Ae(s)&&((o&Z)!==0&&this.#e.add(s),ke(s));var c=s.first;if(c!==null){s=c;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===i&&(i=null),s=d.next,d=d.parent}}#o(t){for(var n=0;n<t.length;n+=1)Nn(t[n],this.#r,this.#e)}capture(t,n){n!==k&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&se)===0&&(this.current.set(t,t.v),B?.set(t,t.v))}activate(){m=this,this.apply()}deactivate(){m===this&&(m=null,B=null)}flush(){if(this.activate(),N.length>0){if(Rn(),m!==null&&m!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#d)t(this);this.#d.clear()}#u(){if(je.size>1){this.previous.clear();var t=B,n=!0;for(const s of je){if(s===this){n=!1;continue}const i=[];for(const[l,u]of this.current){if(s.current.has(l))if(n&&u!==s.current.get(l))s.current.set(l,u);else continue;i.push(l)}if(i.length===0)continue;const o=[...s.current.keys()].filter(l=>!this.current.has(l));if(o.length>0){var r=N;N=[];const l=new Set,u=new Map;for(const a of i)qn(a,o,l,u);if(N.length>0){m=s,s.apply();for(const a of N)s.#l(a,[],[]);s.deactivate()}N=r}}m=null,B=t}this.committed=!0,je.delete(this)}increment(t){this.#n+=1,t&&(this.#a+=1)}decrement(t){this.#n-=1,t&&(this.#a-=1),!this.#s&&(this.#s=!0,de(()=>{this.#s=!1,this.is_deferred()?N.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#r)this.#e.delete(t),E(t,O),ae(t);for(const t of this.#e)E(t,H),ae(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#d.add(t)}settled(){return(this.#i??=bn()).promise}static ensure(){if(m===null){const t=m=new ie;je.add(m),Ie||de(()=>{m===t&&t.flush()})}return m}apply(){}}function vs(e){var t=Ie;Ie=!0;try{for(var n;;){if(_s(),N.length===0&&(m?.flush(),N.length===0))return rt=null,n;Rn()}}finally{Ie=t}}function Rn(){yt=!0;var e=null;try{for(var t=0;N.length>0;){var n=ie.ensure();if(t++>1e3){var r,s;hs()}n.process(N),le.clear()}}finally{yt=!1,rt=null}}function hs(){try{rs()}catch(e){Se(e,rt)}}let z=null;function Gt(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(re|ne))===0&&Ae(r)&&(z=new Set,ke(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Wn(r):r.fn=null),z?.size>0)){le.clear();for(const s of z){if((s.f&(re|ne))!==0)continue;const i=[s];let o=s.parent;for(;o!==null;)z.has(o)&&(z.delete(o),i.push(o)),o=o.parent;for(let l=i.length-1;l>=0;l--){const u=i[l];(u.f&(re|ne))===0&&ke(u)}}z.clear()}}z=null}}function qn(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&x)!==0?qn(s,t,n,r):(i&(At|Z))!==0&&(i&O)===0&&In(s,t,r)&&(E(s,O),ae(s))}}function In(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(Ee.call(t,s))return!0;if((s.f&x)!==0&&In(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function ae(e){for(var t=rt=e;t.parent!==null;){t=t.parent;var n=t.f;if(yt&&t===g&&(n&Z)!==0&&(n&Tn)===0)return;if((n&(ge|G))!==0){if((n&T)===0)return;t.f^=T}}N.push(t)}function Dn(e){if(!((e.f&G)!==0&&(e.f&T)!==0)){E(e,T);for(var t=e.first;t!==null;)Dn(t),t=t.next}}function gs(e){let t=0,n=Fe(0),r;return()=>{Ct()&&(q(n),it(()=>(t===0&&(r=he(()=>e(()=>De(n)))),t+=1,()=>{de(()=>{t-=1,t===0&&(r?.(),r=void 0,De(n))})})))}}var ms=Ge|xe|kt;function ys(e,t,n){new ws(e,t,n)}class ws{parent;is_pending=!1;#t;#d=null;#n;#a;#i;#r=null;#e=null;#s=null;#l=null;#o=null;#u=0;#c=0;#p=!1;#_=!1;#v=new Set;#h=new Set;#f=null;#b=gs(()=>(this.#f=Fe(this.#u),()=>{this.#f=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#a=r,this.parent=g.b,this.is_pending=!!this.#n.pending,this.#i=Is(()=>{g.b=this;{var s=this.#y();try{this.#r=ue(()=>r(s))}catch(i){this.error(i)}this.#c>0?this.#m():this.is_pending=!1}return()=>{this.#o?.remove()}},ms)}#E(){try{this.#r=ue(()=>this.#a(this.#t))}catch(t){this.error(t)}}#T(){const t=this.#n.pending;t&&(this.#e=ue(()=>t(this.#t)),de(()=>{var n=this.#y();this.#r=this.#g(()=>(ie.ensure(),ue(()=>this.#a(n)))),this.#c>0?this.#m():(ze(this.#e,()=>{this.#e=null}),this.is_pending=!1)}))}#y(){var t=this.#t;return this.is_pending&&(this.#o=Hn(),this.#t.before(this.#o),t=this.#o),t}defer_effect(t){Nn(t,this.#v,this.#h)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#n.pending}#g(t){var n=g,r=h,s=b;j(this.#i),X(this.#i),Te(this.#i.ctx);try{return t()}catch(i){return Pn(i),null}finally{j(n),X(r),Te(s)}}#m(){const t=this.#n.pending;this.#r!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#o),Bs(this.#r,this.#l)),this.#e===null&&(this.#e=ue(()=>t(this.#t)))}#w(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#w(t);return}if(this.#c+=t,this.#c===0){this.is_pending=!1;for(const n of this.#v)E(n,O),ae(n);for(const n of this.#h)E(n,H),ae(n);this.#v.clear(),this.#h.clear(),this.#e&&ze(this.#e,()=>{this.#e=null}),this.#l&&(this.#t.before(this.#l),this.#l=null)}}update_pending_count(t){this.#w(t),this.#u+=t,!(!this.#f||this.#p)&&(this.#p=!0,de(()=>{this.#p=!1,this.#f&&Ke(this.#f,this.#u)}))}get_effect_pending(){return this.#b(),q(this.#f)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#_||!n&&!r)throw t;this.#r&&(Y(this.#r),this.#r=null),this.#e&&(Y(this.#e),this.#e=null),this.#s&&(Y(this.#s),this.#s=null);var s=!1,i=!1;const o=()=>{if(s){fs();return}s=!0,i&&as(),ie.ensure(),this.#u=0,this.#s!==null&&ze(this.#s,()=>{this.#s=null}),this.is_pending=this.has_pending_snippet(),this.#r=this.#g(()=>(this.#_=!1,ue(()=>this.#a(this.#t)))),this.#c>0?this.#m():this.is_pending=!1};de(()=>{try{i=!0,n?.(t,o),i=!1}catch(l){Se(l,this.#i&&this.#i.parent)}r&&(this.#s=this.#g(()=>{ie.ensure(),this.#_=!0;try{return ue(()=>{r(this.#t,()=>t,()=>o)})}catch(l){return Se(l,this.#i.parent),null}finally{this.#_=!1}}))})}}function bs(e,t,n,r){const s=Be()?Mt:Ss;var i=e.filter(f=>!f.settled);if(n.length===0&&i.length===0){r(t.map(s));return}var o=m,l=g,u=Es(),a=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(f=>f.promise)):null;function c(f){u();try{r(f)}catch(p){(l.f&re)===0&&Se(p,l)}o?.deactivate(),wt()}if(n.length===0){a.then(()=>c(t.map(s)));return}function d(){u(),Promise.all(n.map(f=>Ts(f))).then(f=>c([...t.map(s),...f])).catch(f=>Se(f,l))}a?a.then(d):d()}function Es(){var e=g,t=h,n=b,r=m;return function(i=!0){j(e),X(t),Te(n),i&&r?.activate()}}function wt(){j(null),X(null),Te(null)}function Mt(e){var t=x|O,n=h!==null&&(h.f&x)!==0?h:null;return g!==null&&(g.f|=xe),{ctx:b,deps:null,effects:null,equals:kn,f:t,fn:e,reactions:null,rv:0,v:k,wv:0,parent:n??g,ac:null}}function Ts(e,t,n){let r=g;r===null&&Qr();var s=r.b,i=void 0,o=Fe(k),l=!h,u=new Map;return Rs(()=>{var a=bn();i=a.promise;try{Promise.resolve(e()).then(a.resolve,a.reject).then(()=>{c===m&&c.committed&&c.deactivate(),wt()})}catch(p){a.reject(p),wt()}var c=m;if(l){var d=s.is_rendered();s.update_pending_count(1),c.increment(d),u.get(c)?.reject(be),u.delete(c),u.set(c,a)}const f=(p,v=void 0)=>{if(c.activate(),v)v!==be&&(o.f|=se,Ke(o,v));else{(o.f&se)!==0&&(o.f^=se),Ke(o,p);for(const[w,A]of u){if(u.delete(w),w===c)break;A.reject(be)}}l&&(s.update_pending_count(-1),c.decrement(d))};a.promise.then(f,p=>f(null,p||"unknown"))}),Nt(()=>{for(const a of u.values())a.reject(be)}),new Promise(a=>{function c(d){function f(){d===i?a(o):c(i)}d.then(f,f)}c(i)})}function Ss(e){const t=Mt(e);return t.equals=An,t}function Xn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Y(t[n])}}function ks(e){for(var t=e.parent;t!==null;){if((t.f&x)===0)return(t.f&re)===0?t:null;t=t.parent}return null}function Ot(e){var t,n=g;j(ks(e));try{e.f&=~pe,Xn(e),t=nr(e)}finally{j(n)}return t}function Bn(e){var t=Ot(e);if(!e.equals(t)&&(e.wv=er(),(!m?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){E(e,T);return}ve||(B!==null?(Ct()||m?.is_fork)&&B.set(e,t):Lt(e))}let bt=new Set;const le=new Map;let Fn=!1;function Fe(e,t){var n={f:0,v:e,reactions:null,equals:kn,rv:0,wv:0};return n}function J(e,t){const n=Fe(e);return Fs(n),n}function Et(e,t=!1,n=!0){const r=Fe(e);return t||(r.equals=An),nt&&n&&b!==null&&b.l!==null&&(b.l.s??=[]).push(r),r}function U(e,t,n=!1){h!==null&&(!F||(h.f&Zt)!==0)&&Be()&&(h.f&(x|Z|At|Zt))!==0&&(D===null||!Ee.call(D,e))&&ls();let r=n?Ce(t):t;return Ke(e,r)}function Ke(e,t){if(!e.equals(t)){var n=e.v;ve?le.set(e,t):le.set(e,n),e.v=t;var r=ie.ensure();if(r.capture(e,n),(e.f&x)!==0){const s=e;(e.f&O)!==0&&Ot(s),Lt(s)}e.wv=er(),$n(e,O),Be()&&g!==null&&(g.f&T)!==0&&(g.f&(G|ge))===0&&(R===null?$s([e]):R.push(e)),!r.is_fork&&bt.size>0&&!Fn&&xs()}return t}function xs(){Fn=!1;for(const e of bt)(e.f&T)!==0&&E(e,H),Ae(e)&&ke(e);bt.clear()}function De(e){U(e,e.v+1)}function $n(e,t){var n=e.reactions;if(n!==null)for(var r=Be(),s=n.length,i=0;i<s;i++){var o=n[i],l=o.f;if(!(!r&&o===g)){var u=(l&O)===0;if(u&&E(o,t),(l&x)!==0){var a=o;B?.delete(a),(l&pe)===0&&(l&I&&(o.f|=pe),$n(a,H))}else u&&((l&Z)!==0&&z!==null&&z.add(o),ae(o))}}}function Ce(e){if(typeof e!="object"||e===null||qe in e)return e;const t=wn(e);if(t!==Kr&&t!==Wr)return e;var n=new Map,r=zr(e),s=J(0),i=_e,o=l=>{if(_e===i)return l();var u=h,a=_e;X(null),tn(i);var c=l();return X(u),tn(a),c};return r&&n.set("length",J(e.length)),new Proxy(e,{defineProperty(l,u,a){(!("value"in a)||a.configurable===!1||a.enumerable===!1||a.writable===!1)&&ss();var c=n.get(u);return c===void 0?c=o(()=>{var d=J(a.value);return n.set(u,d),d}):U(c,a.value,!0),!0},deleteProperty(l,u){var a=n.get(u);if(a===void 0){if(u in l){const c=o(()=>J(k));n.set(u,c),De(s)}}else U(a,k),De(s);return!0},get(l,u,a){if(u===qe)return e;var c=n.get(u),d=u in l;if(c===void 0&&(!d||Re(l,u)?.writable)&&(c=o(()=>{var p=Ce(d?l[u]:k),v=J(p);return v}),n.set(u,c)),c!==void 0){var f=q(c);return f===k?void 0:f}return Reflect.get(l,u,a)},getOwnPropertyDescriptor(l,u){var a=Reflect.getOwnPropertyDescriptor(l,u);if(a&&"value"in a){var c=n.get(u);c&&(a.value=q(c))}else if(a===void 0){var d=n.get(u),f=d?.v;if(d!==void 0&&f!==k)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return a},has(l,u){if(u===qe)return!0;var a=n.get(u),c=a!==void 0&&a.v!==k||Reflect.has(l,u);if(a!==void 0||g!==null&&(!c||Re(l,u)?.writable)){a===void 0&&(a=o(()=>{var f=c?Ce(l[u]):k,p=J(f);return p}),n.set(u,a));var d=q(a);if(d===k)return!1}return c},set(l,u,a,c){var d=n.get(u),f=u in l;if(r&&u==="length")for(var p=a;p<d.v;p+=1){var v=n.get(p+"");v!==void 0?U(v,k):p in l&&(v=o(()=>J(k)),n.set(p+"",v))}if(d===void 0)(!f||Re(l,u)?.writable)&&(d=o(()=>J(void 0)),U(d,Ce(a)),n.set(u,d));else{f=d.v!==k;var w=o(()=>Ce(a));U(d,w)}var A=Reflect.getOwnPropertyDescriptor(l,u);if(A?.set&&A.set.call(c,a),!f){if(r&&typeof u=="string"){var Ue=n.get("length"),Le=Number(u);Number.isInteger(Le)&&Le>=Ue.v&&U(Ue,Le+1)}De(s)}return!0},ownKeys(l){q(s);var u=Reflect.ownKeys(l).filter(d=>{var f=n.get(d);return f===void 0||f.v!==k});for(var[a,c]of n)c.v!==k&&!(a in l)&&u.push(a);return u},setPrototypeOf(){is()}})}var Kt,Un,Yn,jn;function As(){if(Kt===void 0){Kt=window,Un=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Yn=Re(t,"firstChild").get,jn=Re(t,"nextSibling").get,Vt(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Vt(n)&&(n.__t=void 0)}}function Hn(e=""){return document.createTextNode(e)}function zn(e){return Yn.call(e)}function Pt(e){return jn.call(e)}function P(e,t){return zn(e)}function L(e,t=1,n=!1){let r=e;for(;t--;)r=Pt(r);return r}let Wt=!1;function Ls(){Wt||(Wt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function st(e){var t=h,n=g;X(null),j(null);try{return e()}finally{X(t),j(n)}}function Ms(e,t,n,r=n){e.addEventListener(t,()=>st(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),Ls()}function Vn(e){g===null&&(h===null&&ns(),ts()),ve&&es()}function Os(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function K(e,t,n){var r=g;r!==null&&(r.f&ne)!==0&&(e|=ne);var s={ctx:b,deps:null,nodes:null,f:e|O|I,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{ke(s),s.f|=xt}catch(l){throw Y(s),l}else t!==null&&ae(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&xe)===0&&(i=i.first,(e&Z)!==0&&(e&Ge)!==0&&i!==null&&(i.f|=Ge)),i!==null&&(i.parent=r,r!==null&&Os(i,r),h!==null&&(h.f&x)!==0&&(e&ge)===0)){var o=h;(o.effects??=[]).push(i)}return s}function Ct(){return h!==null&&!F}function Nt(e){const t=K(Xe,null,!1);return E(t,T),t.teardown=e,t}function Jt(e){Vn();var t=g.f,n=!h&&(t&G)!==0&&(t&xt)===0;if(n){var r=b;(r.e??=[]).push(e)}else return Zn(e)}function Zn(e){return K(ht|Sn,e,!1)}function Ps(e){return Vn(),K(Xe|Sn,e,!0)}function Cs(e){ie.ensure();const t=K(ge|xe,e,!0);return(n={})=>new Promise(r=>{n.outro?ze(t,()=>{Y(t),r(void 0)}):(Y(t),r(void 0))})}function Qt(e,t){var n=b,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=it(()=>{e(),!r.ran&&(r.ran=!0,he(t))})}function Ns(){var e=b;it(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&T)!==0&&n.deps!==null&&E(n,H),Ae(n)&&ke(n),t.ran=!1}})}function Rs(e){return K(At|xe,e,!0)}function it(e,t=0){return K(Xe|t,e,!0)}function qs(e,t=[],n=[],r=[]){bs(r,t,n,s=>{K(Xe,()=>e(...s.map(q)),!0)})}function Is(e,t=0){var n=K(Z|t,e,!0);return n}function ue(e){return K(G|xe,e,!0)}function Gn(e){var t=e.teardown;if(t!==null){const n=ve,r=h;en(!0),X(null);try{t.call(null)}finally{en(n),X(r)}}}function Kn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&st(()=>{s.abort(be)});var r=n.next;(n.f&ge)!==0?n.parent=null:Y(n,t),n=r}}function Ds(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&G)===0&&Y(t),t=n}}function Y(e,t=!0){var n=!1;(t||(e.f&Tn)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Xs(e.nodes.start,e.nodes.end),n=!0),Kn(e,t&&!n),We(e,0),E(e,re);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();Gn(e);var s=e.parent;s!==null&&s.first!==null&&Wn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Xs(e,t){for(;e!==null;){var n=e===t?null:Pt(e);e.remove(),e=n}}function Wn(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function ze(e,t,n=!0){var r=[];Jn(e,r,!0);var s=()=>{n&&Y(e),t&&t()},i=r.length;if(i>0){var o=()=>--i||s();for(var l of r)l.out(o)}else s()}function Jn(e,t,n){if((e.f&ne)===0){e.f^=ne;var r=e.nodes&&e.nodes.t;if(r!==null)for(const l of r)(l.is_global||n)&&t.push(l);for(var s=e.first;s!==null;){var i=s.next,o=(s.f&Ge)!==0||(s.f&G)!==0&&(e.f&Z)!==0;Jn(s,t,o?n:!1),s=i}}}function Bs(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var s=n===r?null:Pt(n);t.append(n),n=s}}let Ve=!1,ve=!1;function en(e){ve=e}let h=null,F=!1;function X(e){h=e}let g=null;function j(e){g=e}let D=null;function Fs(e){h!==null&&(D===null?D=[e]:D.push(e))}let M=null,C=0,R=null;function $s(e){R=e}let Qn=1,ce=0,_e=ce;function tn(e){_e=e}function er(){return++Qn}function Ae(e){var t=e.f;if((t&O)!==0)return!0;if(t&x&&(e.f&=~pe),(t&H)!==0){for(var n=e.deps,r=n.length,s=0;s<r;s++){var i=n[s];if(Ae(i)&&Bn(i),i.wv>e.wv)return!0}(t&I)!==0&&B===null&&E(e,T)}return!1}function tr(e,t,n=!0){var r=e.reactions;if(r!==null&&!(D!==null&&Ee.call(D,e)))for(var s=0;s<r.length;s++){var i=r[s];(i.f&x)!==0?tr(i,t,!1):t===i&&(n?E(i,O):(i.f&T)!==0&&E(i,H),ae(i))}}function nr(e){var t=M,n=C,r=R,s=h,i=D,o=b,l=F,u=_e,a=e.f;M=null,C=0,R=null,h=(a&(G|ge))===0?e:null,D=null,Te(e.ctx),F=!1,_e=++ce,e.ac!==null&&(st(()=>{e.ac.abort(be)}),e.ac=null);try{e.f|=gt;var c=e.fn,d=c(),f=e.deps,p=m?.is_fork;if(M!==null){var v;if(p||We(e,C),f!==null&&C>0)for(f.length=C+M.length,v=0;v<M.length;v++)f[C+v]=M[v];else e.deps=f=M;if(Ct()&&(e.f&I)!==0)for(v=C;v<f.length;v++)(f[v].reactions??=[]).push(e)}else!p&&f!==null&&C<f.length&&(We(e,C),f.length=C);if(Be()&&R!==null&&!F&&f!==null&&(e.f&(x|H|O))===0)for(v=0;v<R.length;v++)tr(R[v],e);if(s!==null&&s!==e){if(ce++,s.deps!==null)for(let w=0;w<n;w+=1)s.deps[w].rv=ce;if(t!==null)for(const w of t)w.rv=ce;R!==null&&(r===null?r=R:r.push(...R))}return(e.f&se)!==0&&(e.f^=se),d}catch(w){return Pn(w)}finally{e.f^=gt,M=t,C=n,R=r,h=s,D=i,Te(o),F=l,_e=u}}function Us(e,t){let n=t.reactions;if(n!==null){var r=Vr.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}if(n===null&&(t.f&x)!==0&&(M===null||!Ee.call(M,t))){var i=t;(i.f&I)!==0&&(i.f^=I,i.f&=~pe),Lt(i),Xn(i),We(i,0)}}function We(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Us(e,n[r])}function ke(e){var t=e.f;if((t&re)===0){E(e,T);var n=g,r=Ve;g=e,Ve=!0;try{(t&(Z|En))!==0?Ds(e):Kn(e),Gn(e);var s=nr(e);e.teardown=typeof s=="function"?s:null,e.wv=Qn;var i;vt&&cs&&(e.f&O)!==0&&e.deps}finally{Ve=r,g=n}}}async function Ys(){await Promise.resolve(),vs()}function q(e){var t=e.f,n=(t&x)!==0;if(h!==null&&!F){var r=g!==null&&(g.f&re)!==0;if(!r&&(D===null||!Ee.call(D,e))){var s=h.deps;if((h.f&gt)!==0)e.rv<ce&&(e.rv=ce,M===null&&s!==null&&s[C]===e?C++:M===null?M=[e]:M.push(e));else{(h.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[h]:Ee.call(i,h)||i.push(h)}}}if(ve&&le.has(e))return le.get(e);if(n){var o=e;if(ve){var l=o.v;return((o.f&T)===0&&o.reactions!==null||sr(o))&&(l=Ot(o)),le.set(o,l),l}var u=(o.f&I)===0&&!F&&h!==null&&(Ve||(h.f&I)!==0),a=o.deps===null;Ae(o)&&(u&&(o.f|=I),Bn(o)),u&&!a&&rr(o)}if(B?.has(e))return B.get(e);if((e.f&se)!==0)throw e.v;return e.v}function rr(e){if(e.deps!==null){e.f|=I;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&x)!==0&&(t.f&I)===0&&rr(t)}}function sr(e){if(e.v===k)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(le.has(t)||(t.f&x)!==0&&sr(t))return!0;return!1}function he(e){var t=F;try{return F=!0,e()}finally{F=t}}function js(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(qe in e)Tt(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&qe in n&&Tt(n)}}}function Tt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Tt(e[r],t)}catch{}const n=wn(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Gr(n);for(let s in r){const i=r[s].get;if(i)try{i.call(e)}catch{}}}}}const Hs=["touchstart","touchmove"];function zs(e){return Hs.includes(e)}const Vs=new Set,nn=new Set;function Zs(e,t,n,r={}){function s(i){if(r.capture||Ne.call(t,i),!i.cancelBubble)return st(()=>n?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?de(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function rn(e,t,n,r,s){var i={capture:r,passive:s},o=Zs(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Nt(()=>{t.removeEventListener(e,o,i)})}let sn=null;function Ne(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;sn=e;var o=0,l=sn===e&&e.__root;if(l){var u=s.indexOf(l);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var a=s.indexOf(t);if(a===-1)return;u<=a&&(o=u)}if(i=s[o]||e.target,i!==t){yn(e,"currentTarget",{configurable:!0,get(){return i||n}});var c=h,d=g;X(null),j(null);try{for(var f,p=[];i!==null;){var v=i.assignedSlot||i.parentNode||i.host||null;try{var w=i["__"+r];w!=null&&(!i.disabled||e.target===i)&&w.call(i,e)}catch(A){f?p.push(A):f=A}if(e.cancelBubble||v===t||v===null)break;i=v}if(f){for(let A of p)queueMicrotask(()=>{throw A});throw f}}finally{e.__root=t,delete e.currentTarget,X(c),j(d)}}}function Gs(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ks(e,t){var n=g;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function Ws(e,t){var n=(t&os)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=Gs(s?e:"<!>"+e),r=zn(r));var i=n||Un?document.importNode(r,!0):r.cloneNode(!0);return Ks(i,i),i}}function Js(e,t){e!==null&&e.before(t)}function Oe(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Qs(e,t){return ei(e,t)}const ye=new Map;function ei(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:o=!0}){As();var l=new Set,u=d=>{for(var f=0;f<d.length;f++){var p=d[f];if(!l.has(p)){l.add(p);var v=zs(p);t.addEventListener(p,Ne,{passive:v});var w=ye.get(p);w===void 0?(document.addEventListener(p,Ne,{passive:v}),ye.set(p,1)):ye.set(p,w+1)}}};u(Zr(Vs)),nn.add(u);var a=void 0,c=Cs(()=>{var d=n??t.appendChild(Hn());return ys(d,{pending:()=>{}},f=>{if(i){Ln({});var p=b;p.c=i}s&&(r.$$events=s),a=e(f,r)||{},i&&Mn()}),()=>{for(var f of l){t.removeEventListener(f,Ne);var p=ye.get(f);--p===0?(document.removeEventListener(f,Ne),ye.delete(f)):ye.set(f,p)}nn.delete(u),d!==n&&d.parentNode?.removeChild(d)}});return ti.set(a,c),a}let ti=new WeakMap;const ni=Symbol("is custom element"),ri=Symbol("is html");function ln(e,t){var n=si(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function si(e){return e.__attributes??={[ni]:e.nodeName.includes("-"),[ri]:e.namespaceURI===us}}function an(e,t,n=t){var r=new WeakSet;Ms(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=ct(e)?dt(i):i,n(i),m!==null&&r.add(m),await Ys(),i!==(i=t())){var o=e.selectionStart,l=e.selectionEnd,u=e.value.length;if(e.value=i??"",l!==null){var a=e.value.length;o===l&&l===u&&a>u?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=o,e.selectionEnd=Math.min(l,a))}}}),he(t)==null&&e.value&&(n(ct(e)?dt(e.value):e.value),m!==null&&r.add(m)),it(()=>{var s=t();if(e===document.activeElement){var i=mt??m;if(r.has(i))return}ct(e)&&s===dt(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function ct(e){var t=e.type;return t==="number"||t==="range"}function dt(e){return e===""?null:+e}function ii(e=!1){const t=b,n=t.l.u;if(!n)return;let r=()=>js(t.s);if(e){let s=0,i={};const o=Mt(()=>{let l=!1;const u=t.s;for(const a in u)u[a]!==i[a]&&(i[a]=u[a],l=!0);return l&&s++,s});r=()=>q(o)}n.b.length&&Ps(()=>{on(t,r),Ze(n.b)}),Jt(()=>{const s=he(()=>n.m.map(Jr));return()=>{for(const i of s)typeof i=="function"&&i()}}),n.a.length&&Jt(()=>{on(t,r),Ze(n.a)})}function on(e,t){if(e.l.s)for(const n of e.l.s)q(n);t()}function Rt(e,t,n){if(e==null)return t(void 0),n&&n(void 0),te;const r=he(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const we=[];function li(e,t){return{subscribe:$e(e,t).subscribe}}function $e(e,t=te){let n=null;const r=new Set;function s(l){if(xn(e,l)&&(e=l,n)){const u=!we.length;for(const a of r)a[1](),we.push(a,e);if(u){for(let a=0;a<we.length;a+=2)we[a][0](we[a+1]);we.length=0}}}function i(l){s(l(e))}function o(l,u=te){const a=[l,u];return r.add(a),r.size===1&&(n=t(s,i)||te),l(e),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}function ai(e,t,n){const r=!Array.isArray(e),s=r?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return li(n,(o,l)=>{let u=!1;const a=[];let c=0,d=te;const f=()=>{if(c)return;d();const v=t(r?a[0]:a,o,l);i?o(v):d=typeof v=="function"?v:te},p=s.map((v,w)=>Rt(v,A=>{a[w]=A,c&=~(1<<w),u&&f()},()=>{c|=1<<w}));return u=!0,f(),function(){Ze(p),d(),u=!1}})}function oi(e){let t;return Rt(e,n=>t=n)(),t}let St=Symbol();function Pe(e,t,n){const r=n[t]??={store:null,source:Et(void 0),unsubscribe:te};if(r.store!==e&&!(St in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=te;else{var s=!0;r.unsubscribe=Rt(e,i=>{s?r.source.v=i:U(r.source,i)}),s=!1}return e&&St in n?oi(e):q(r.source)}function un(e,t){return e.set(t),t}function ui(){const e={};function t(){Nt(()=>{for(var n in e)e[n].unsubscribe();yn(e,St,{enumerable:!1,value:!0})})}return[e,t]}const fi="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(fi);ds();const Je=$e(500),Qe=$e(50),et=$e(5),tt=$e(.6),ci=ai([Je,Qe,et,tt],([e,t,n,r])=>Lr({targetLatencyMs:e,draftLatencyMs:t,k:n,acceptanceProb:r}));var di=Ws('<div class="controls svelte-13a2uqt"><div class="speedup-row svelte-13a2uqt"><div class="legend svelte-13a2uqt"><span class="legend-item svelte-13a2uqt"><span class="legend-dot sequential svelte-13a2uqt"></span>Sequential</span> <span class="legend-item svelte-13a2uqt"><span class="legend-dot speculative svelte-13a2uqt"></span>Speculative Decoding</span></div> <div class="speedup-display svelte-13a2uqt"><span class="speedup-label svelte-13a2uqt">Speedup</span> <span class="speedup-value svelte-13a2uqt"> </span></div></div> <div class="sliders svelte-13a2uqt"><div class="slider-row svelte-13a2uqt"><label for="k-slider" class="slider-label svelte-13a2uqt">K</label> <input id="k-slider" type="range" min="1" max="10" step="1" class="slider svelte-13a2uqt"/> <span class="slider-value svelte-13a2uqt"> </span></div> <div class="slider-row svelte-13a2uqt"><label for="accept-slider" class="slider-label svelte-13a2uqt">Accept</label> <input id="accept-slider" type="range" min="0" max="1" step="0.05" class="slider slider-accept svelte-13a2uqt"/> <span class="slider-value svelte-13a2uqt"> </span></div> <div class="slider-row svelte-13a2uqt"><label for="target-slider" class="slider-label svelte-13a2uqt">Target</label> <input id="target-slider" type="range" min="20" max="200" step="5" class="slider slider-target svelte-13a2uqt"/> <span class="slider-value svelte-13a2uqt"> </span></div> <div class="slider-row svelte-13a2uqt"><label for="draft-slider" class="slider-label svelte-13a2uqt">Draft</label> <input id="draft-slider" type="range" min="1" max="50" step="1" class="slider slider-draft svelte-13a2uqt"/> <span class="slider-value svelte-13a2uqt"> </span></div></div></div>');function _i(e,t){Ln(t,!1);const n=()=>Pe(Je,"$targetLatencyMs",l),r=()=>Pe(Qe,"$draftLatencyMs",l),s=()=>Pe(ci,"$computation",l),i=()=>Pe(et,"$k",l),o=()=>Pe(tt,"$acceptanceProb",l),[l,u]=ui(),a=Et(),c=Et();function d(S){return S.toFixed(2)+"Ã—"}function f(S){return Math.round(S*100)+"%"}function p(S){Je.set(S*10)}function v(S){Qe.set(S*10)}Qt(()=>n(),()=>{U(a,n()/10)}),Qt(()=>r(),()=>{U(c,r()/10)}),Ns(),ii();var w=di(),A=P(w),Ue=L(P(A),2),Le=L(P(Ue),2),ir=P(Le),lr=L(A,2),qt=P(lr),It=L(P(qt),2),ar=L(It,2),or=P(ar),Dt=L(qt,2),Xt=L(P(Dt),2),ur=L(Xt,2),fr=P(ur),Bt=L(Dt,2),lt=L(P(Bt),2),cr=L(lt,2),dr=P(cr),_r=L(Bt,2),at=L(P(_r),2),pr=L(at,2),vr=P(pr);qs((S,hr)=>{Oe(ir,S),Oe(or,i()),Oe(fr,hr),ln(lt,q(a)),Oe(dr,`${n()??""}ms`),ln(at,q(c)),Oe(vr,`${r()??""}ms`)},[()=>(s(),he(()=>d(s().speedup))),()=>(o(),he(()=>f(o())))]),an(It,i,S=>un(et,S)),an(Xt,o,S=>un(tt,S)),rn("input",lt,S=>p(+S.currentTarget.value)),rn("input",at,S=>v(+S.currentTarget.value)),Js(e,w),Mn(),u()}async function fn(){const e=document.getElementById("canvas"),t=document.getElementById("controls");if(!e)return;Ft(e),mr(e),window.addEventListener("resize",()=>Ft(e));const n=await yr.new().withCanvas(e).withLoading(wr(e)).withPlugins(br,Er,Tr,Sr,kr,Hr).withScene("../scenes/speedup.scene").build();xr(e,n),et.subscribe(r=>Ye({k:r})),Je.subscribe(r=>Ye({targetLatencyMs:r})),Qe.subscribe(r=>Ye({draftLatencyMs:r})),tt.subscribe(r=>Ye({acceptanceProb:r})),t&&Qs(_i,{target:t})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",fn):fn();
//# sourceMappingURL=speedup-C7206AM5.js.map
