{"version":3,"file":"grid-CxwlKN9G.js","sources":["../../../demos/grid.ts"],"sourcesContent":["import { State, TransformsPlugin, RenderPlugin, TweenPlugin, minimalLight } from '@multiplekex/shallot';\r\nimport { OrbitPlugin } from '@multiplekex/shallot/extras';\r\nimport {\r\n  createStepPlugin,\r\n  setupStepUI,\r\n  findStepElements,\r\n  StepController,\r\n  getEntityByName,\r\n  setupCanvas,\r\n  createVisibilityLoop,\r\n  type SequenceMap,\r\n  type StepContent,\r\n} from '@blog-components/sequence';\r\nimport { setupCanvasRecording } from '@blog-components/recording';\r\n\r\nconst STEP_SEQUENCES: SequenceMap = {\r\n  '0-1': 'step-0-1',\r\n  '1-0': 'step-1-0',\r\n};\r\n\r\nconst STEP_CONTENT: StepContent[] = [\r\n  { title: 'Grid Layout', description: 'Nine cubes in a 3x3 grid.' },\r\n  { title: 'Corners Raised', description: 'Corner cubes move up.' },\r\n];\r\n\r\nasync function init(): Promise<void> {\r\n  const canvas = document.getElementById('canvas') as HTMLCanvasElement;\r\n  if (!canvas) return;\r\n\r\n  setupCanvas(canvas);\r\n  window.addEventListener('resize', () => setupCanvas(canvas));\r\n\r\n  const state = await State.new()\r\n    .withCanvas(canvas)\r\n    .withLoading(minimalLight(canvas))\r\n    .withPlugins(\r\n      TransformsPlugin,\r\n      RenderPlugin,\r\n      OrbitPlugin,\r\n      TweenPlugin,\r\n      createStepPlugin(STEP_SEQUENCES)\r\n    )\r\n    .withScene('../scenes/grid.scene')\r\n    .build();\r\n\r\n  canvas.__state__ = state;\r\n  canvas.__getEntityByName__ = getEntityByName;\r\n  setupCanvasRecording(canvas, state);\r\n\r\n  const controllers = [...state.query([StepController])];\r\n  const controllerEid = controllers[0];\r\n  canvas.__controllerEid__ = controllerEid;\r\n\r\n  if (controllerEid !== undefined) {\r\n    canvas.__getStep__ = () => StepController.target[controllerEid];\r\n    canvas.__setStep__ = (step: number) => {\r\n      StepController.target[controllerEid] = step;\r\n    };\r\n    canvas.__maxStep__ = STEP_CONTENT.length - 1;\r\n\r\n    const elements = findStepElements(document.body);\r\n    setupStepUI(elements, {\r\n      steps: STEP_CONTENT,\r\n      onStepChange(step) {\r\n        StepController.target[controllerEid] = step;\r\n      },\r\n    });\r\n  }\r\n\r\n  createVisibilityLoop(state);\r\n}\r\n\r\nif (document.readyState === 'loading') {\r\n  document.addEventListener('DOMContentLoaded', init);\r\n} else {\r\n  init();\r\n}\r\n"],"names":["STEP_SEQUENCES","STEP_CONTENT","init","canvas","setupCanvas","state","State","minimalLight","TransformsPlugin","RenderPlugin","OrbitPlugin","TweenPlugin","createStepPlugin","getEntityByName","setupCanvasRecording","controllerEid","StepController","step","elements","findStepElements","setupStepUI","createVisibilityLoop"],"mappings":"0SAeA,MAAMA,EAA8B,CAClC,MAAO,WACP,MAAO,UACT,EAEMC,EAA8B,CAClC,CAAE,MAAO,cAAe,YAAa,2BAAA,EACrC,CAAE,MAAO,iBAAkB,YAAa,uBAAA,CAC1C,EAEA,eAAeC,GAAsB,CACnC,MAAMC,EAAS,SAAS,eAAe,QAAQ,EAC/C,GAAI,CAACA,EAAQ,OAEbC,EAAYD,CAAM,EAClB,OAAO,iBAAiB,SAAU,IAAMC,EAAYD,CAAM,CAAC,EAE3D,MAAME,EAAQ,MAAMC,EAAM,IAAA,EACvB,WAAWH,CAAM,EACjB,YAAYI,EAAaJ,CAAM,CAAC,EAChC,YACCK,EACAC,EACAC,EACAC,EACAC,EAAiBZ,CAAc,CAAA,EAEhC,UAAU,sBAAsB,EAChC,MAAA,EAEHG,EAAO,UAAYE,EACnBF,EAAO,oBAAsBU,EAC7BC,EAAqBX,EAAQE,CAAK,EAGlC,MAAMU,EADc,CAAC,GAAGV,EAAM,MAAM,CAACW,CAAc,CAAC,CAAC,EACnB,CAAC,EAGnC,GAFAb,EAAO,kBAAoBY,EAEvBA,IAAkB,OAAW,CAC/BZ,EAAO,YAAc,IAAMa,EAAe,OAAOD,CAAa,EAC9DZ,EAAO,YAAec,GAAiB,CACrCD,EAAe,OAAOD,CAAa,EAAIE,CACzC,EACAd,EAAO,YAAcF,EAAa,OAAS,EAE3C,MAAMiB,EAAWC,EAAiB,SAAS,IAAI,EAC/CC,EAAYF,EAAU,CACpB,MAAOjB,EACP,aAAagB,EAAM,CACjBD,EAAe,OAAOD,CAAa,EAAIE,CACzC,CAAA,CACD,CACH,CAEAI,EAAqBhB,CAAK,CAC5B,CAEI,SAAS,aAAe,UAC1B,SAAS,iBAAiB,mBAAoBH,CAAI,EAElDA,EAAA"}