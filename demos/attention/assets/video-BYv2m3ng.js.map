{"version":3,"file":"video-BYv2m3ng.js","sources":["../../../../src/recorder/types.ts","../../../../node_modules/mp4-muxer/build/mp4-muxer.mjs","../../../../src/recorder/encoder.ts","../../../../src/recorder/ui.ts","../../../../src/recorder/recorder.ts","../../video/src/token-display/components.ts","../../video/src/token-display/text-storage.ts","../../video/src/token-display/systems/token-setup.ts","../../video/src/token-display/systems/token-measure.ts","../../video/src/token-display/systems/token-layout.ts","../../video/src/token-display/systems/token-box-setup.ts","../../video/src/token-display/systems/token-box-layout.ts","../../video/src/token-display/plugin.ts","../../video/src/token-display/index.ts","../../video/src/token-arrow.ts","../../video/src/axis-graph.ts","../../video/src/neural-network.ts","../../video/src/token-vector.ts","../../video/src/projection-vector.ts","../../video/src/attention-score.ts","../../video/src/attention-sum.ts","../../video/src/token-swap-driver.ts","../../video/src/bracket-vector.ts","../../video/src/dot-product.ts","../../video/src/dot-product-label.ts","../../video/src/v-label.ts","../../video/src/v-formula-label.ts","../../video/sequences/step-0-1.xml?raw","../../video/sequences/step-1-2.xml?raw","../../video/sequences/step-2-3.xml?raw","../../video/sequences/step-3-4.xml?raw","../../video/sequences/step-4-5.xml?raw","../../video/sequences/step-5-6.xml?raw","../../video/sequences/step-6-7.xml?raw","../../video/sequences/step-7-8.xml?raw","../../video/sequences/step-8-9.xml?raw","../../video/sequences/step-9-10.xml?raw","../../video/sequences/step-10-11.xml?raw","../../video/sequences/step-11-12.xml?raw","../../video/sequences/step-12-13.xml?raw","../../video/sequences/step-13-14.xml?raw","../../video/sequences/step-14-15.xml?raw","../../video/sequences/step-15-16.xml?raw","../../video/sequences/step-16-17.xml?raw","../../video/sequences/step-17-18.xml?raw","../../video/sequences/step-18-19.xml?raw","../../video/sequences/step-19-20.xml?raw","../../video/sequences/step-20-21.xml?raw","../../video/sequences/step-21-22.xml?raw","../../video/sequences/step-22-23.xml?raw","../../video/sequences/step-23-24.xml?raw","../../video/sequences/step-24-25.xml?raw","../../video/sequences/step-25-26.xml?raw","../../video/sequences/step-26-27.xml?raw","../../video/sequences/step-27-28.xml?raw","../../video/sequences/step-28-29.xml?raw","../../video/sequences/step-29-30.xml?raw","../../video/sequences/step-30-31.xml?raw","../../video/sequences/step-31-32.xml?raw","../../video/sequences/step-32-33.xml?raw","../../video/sequences/step-33-34.xml?raw","../../video/sequences/step-34-35.xml?raw","../../video/sequences/step-35-36.xml?raw","../../video/sequences/index.ts","../../video/index.ts"],"sourcesContent":["export interface RecordingConfig {\n  fps: number;\n  bitrate: number;\n  width: number;\n  height: number;\n  durationSeconds: number;\n}\n\nexport const DEFAULT_CONFIG: RecordingConfig = {\n  fps: 60,\n  bitrate: 5_000_000,\n  width: 1920,\n  height: 1080,\n  durationSeconds: 2,\n};\n","var __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateWrapper = (obj, member, setter, getter) => ({\n  set _(value) {\n    __privateSet(obj, member, value, setter);\n  },\n  get _() {\n    return __privateGet(obj, member, getter);\n  }\n});\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\n\n// src/misc.ts\nvar bytes = new Uint8Array(8);\nvar view = new DataView(bytes.buffer);\nvar u8 = (value) => {\n  return [(value % 256 + 256) % 256];\n};\nvar u16 = (value) => {\n  view.setUint16(0, value, false);\n  return [bytes[0], bytes[1]];\n};\nvar i16 = (value) => {\n  view.setInt16(0, value, false);\n  return [bytes[0], bytes[1]];\n};\nvar u24 = (value) => {\n  view.setUint32(0, value, false);\n  return [bytes[1], bytes[2], bytes[3]];\n};\nvar u32 = (value) => {\n  view.setUint32(0, value, false);\n  return [bytes[0], bytes[1], bytes[2], bytes[3]];\n};\nvar i32 = (value) => {\n  view.setInt32(0, value, false);\n  return [bytes[0], bytes[1], bytes[2], bytes[3]];\n};\nvar u64 = (value) => {\n  view.setUint32(0, Math.floor(value / 2 ** 32), false);\n  view.setUint32(4, value, false);\n  return [bytes[0], bytes[1], bytes[2], bytes[3], bytes[4], bytes[5], bytes[6], bytes[7]];\n};\nvar fixed_8_8 = (value) => {\n  view.setInt16(0, 2 ** 8 * value, false);\n  return [bytes[0], bytes[1]];\n};\nvar fixed_16_16 = (value) => {\n  view.setInt32(0, 2 ** 16 * value, false);\n  return [bytes[0], bytes[1], bytes[2], bytes[3]];\n};\nvar fixed_2_30 = (value) => {\n  view.setInt32(0, 2 ** 30 * value, false);\n  return [bytes[0], bytes[1], bytes[2], bytes[3]];\n};\nvar ascii = (text, nullTerminated = false) => {\n  let bytes2 = Array(text.length).fill(null).map((_, i) => text.charCodeAt(i));\n  if (nullTerminated)\n    bytes2.push(0);\n  return bytes2;\n};\nvar last = (arr) => {\n  return arr && arr[arr.length - 1];\n};\nvar lastPresentedSample = (samples) => {\n  let result = void 0;\n  for (let sample of samples) {\n    if (!result || sample.presentationTimestamp > result.presentationTimestamp) {\n      result = sample;\n    }\n  }\n  return result;\n};\nvar intoTimescale = (timeInSeconds, timescale, round = true) => {\n  let value = timeInSeconds * timescale;\n  return round ? Math.round(value) : value;\n};\nvar rotationMatrix = (rotationInDegrees) => {\n  let theta = rotationInDegrees * (Math.PI / 180);\n  let cosTheta = Math.cos(theta);\n  let sinTheta = Math.sin(theta);\n  return [\n    cosTheta,\n    sinTheta,\n    0,\n    -sinTheta,\n    cosTheta,\n    0,\n    0,\n    0,\n    1\n  ];\n};\nvar IDENTITY_MATRIX = rotationMatrix(0);\nvar matrixToBytes = (matrix) => {\n  return [\n    fixed_16_16(matrix[0]),\n    fixed_16_16(matrix[1]),\n    fixed_2_30(matrix[2]),\n    fixed_16_16(matrix[3]),\n    fixed_16_16(matrix[4]),\n    fixed_2_30(matrix[5]),\n    fixed_16_16(matrix[6]),\n    fixed_16_16(matrix[7]),\n    fixed_2_30(matrix[8])\n  ];\n};\nvar deepClone = (x) => {\n  if (!x)\n    return x;\n  if (typeof x !== \"object\")\n    return x;\n  if (Array.isArray(x))\n    return x.map(deepClone);\n  return Object.fromEntries(Object.entries(x).map(([key, value]) => [key, deepClone(value)]));\n};\nvar isU32 = (value) => {\n  return value >= 0 && value < 2 ** 32;\n};\n\n// src/box.ts\nvar box = (type, contents, children) => ({\n  type,\n  contents: contents && new Uint8Array(contents.flat(10)),\n  children\n});\nvar fullBox = (type, version, flags, contents, children) => box(\n  type,\n  [u8(version), u24(flags), contents ?? []],\n  children\n);\nvar ftyp = (details) => {\n  let minorVersion = 512;\n  if (details.fragmented)\n    return box(\"ftyp\", [\n      ascii(\"iso5\"),\n      // Major brand\n      u32(minorVersion),\n      // Minor version\n      // Compatible brands\n      ascii(\"iso5\"),\n      ascii(\"iso6\"),\n      ascii(\"mp41\")\n    ]);\n  return box(\"ftyp\", [\n    ascii(\"isom\"),\n    // Major brand\n    u32(minorVersion),\n    // Minor version\n    // Compatible brands\n    ascii(\"isom\"),\n    details.holdsAvc ? ascii(\"avc1\") : [],\n    ascii(\"mp41\")\n  ]);\n};\nvar mdat = (reserveLargeSize) => ({ type: \"mdat\", largeSize: reserveLargeSize });\nvar free = (size) => ({ type: \"free\", size });\nvar moov = (tracks, creationTime, fragmented = false) => box(\"moov\", null, [\n  mvhd(creationTime, tracks),\n  ...tracks.map((x) => trak(x, creationTime)),\n  fragmented ? mvex(tracks) : null\n]);\nvar mvhd = (creationTime, tracks) => {\n  let duration = intoTimescale(Math.max(\n    0,\n    ...tracks.filter((x) => x.samples.length > 0).map((x) => {\n      const lastSample = lastPresentedSample(x.samples);\n      return lastSample.presentationTimestamp + lastSample.duration;\n    })\n  ), GLOBAL_TIMESCALE);\n  let nextTrackId = Math.max(...tracks.map((x) => x.id)) + 1;\n  let needsU64 = !isU32(creationTime) || !isU32(duration);\n  let u32OrU64 = needsU64 ? u64 : u32;\n  return fullBox(\"mvhd\", +needsU64, 0, [\n    u32OrU64(creationTime),\n    // Creation time\n    u32OrU64(creationTime),\n    // Modification time\n    u32(GLOBAL_TIMESCALE),\n    // Timescale\n    u32OrU64(duration),\n    // Duration\n    fixed_16_16(1),\n    // Preferred rate\n    fixed_8_8(1),\n    // Preferred volume\n    Array(10).fill(0),\n    // Reserved\n    matrixToBytes(IDENTITY_MATRIX),\n    // Matrix\n    Array(24).fill(0),\n    // Pre-defined\n    u32(nextTrackId)\n    // Next track ID\n  ]);\n};\nvar trak = (track, creationTime) => box(\"trak\", null, [\n  tkhd(track, creationTime),\n  mdia(track, creationTime)\n]);\nvar tkhd = (track, creationTime) => {\n  let lastSample = lastPresentedSample(track.samples);\n  let durationInGlobalTimescale = intoTimescale(\n    lastSample ? lastSample.presentationTimestamp + lastSample.duration : 0,\n    GLOBAL_TIMESCALE\n  );\n  let needsU64 = !isU32(creationTime) || !isU32(durationInGlobalTimescale);\n  let u32OrU64 = needsU64 ? u64 : u32;\n  let matrix;\n  if (track.info.type === \"video\") {\n    matrix = typeof track.info.rotation === \"number\" ? rotationMatrix(track.info.rotation) : track.info.rotation;\n  } else {\n    matrix = IDENTITY_MATRIX;\n  }\n  return fullBox(\"tkhd\", +needsU64, 3, [\n    u32OrU64(creationTime),\n    // Creation time\n    u32OrU64(creationTime),\n    // Modification time\n    u32(track.id),\n    // Track ID\n    u32(0),\n    // Reserved\n    u32OrU64(durationInGlobalTimescale),\n    // Duration\n    Array(8).fill(0),\n    // Reserved\n    u16(0),\n    // Layer\n    u16(0),\n    // Alternate group\n    fixed_8_8(track.info.type === \"audio\" ? 1 : 0),\n    // Volume\n    u16(0),\n    // Reserved\n    matrixToBytes(matrix),\n    // Matrix\n    fixed_16_16(track.info.type === \"video\" ? track.info.width : 0),\n    // Track width\n    fixed_16_16(track.info.type === \"video\" ? track.info.height : 0)\n    // Track height\n  ]);\n};\nvar mdia = (track, creationTime) => box(\"mdia\", null, [\n  mdhd(track, creationTime),\n  hdlr(track.info.type === \"video\" ? \"vide\" : \"soun\"),\n  minf(track)\n]);\nvar mdhd = (track, creationTime) => {\n  let lastSample = lastPresentedSample(track.samples);\n  let localDuration = intoTimescale(\n    lastSample ? lastSample.presentationTimestamp + lastSample.duration : 0,\n    track.timescale\n  );\n  let needsU64 = !isU32(creationTime) || !isU32(localDuration);\n  let u32OrU64 = needsU64 ? u64 : u32;\n  return fullBox(\"mdhd\", +needsU64, 0, [\n    u32OrU64(creationTime),\n    // Creation time\n    u32OrU64(creationTime),\n    // Modification time\n    u32(track.timescale),\n    // Timescale\n    u32OrU64(localDuration),\n    // Duration\n    u16(21956),\n    // Language (\"und\", undetermined)\n    u16(0)\n    // Quality\n  ]);\n};\nvar hdlr = (componentSubtype) => fullBox(\"hdlr\", 0, 0, [\n  ascii(\"mhlr\"),\n  // Component type\n  ascii(componentSubtype),\n  // Component subtype\n  u32(0),\n  // Component manufacturer\n  u32(0),\n  // Component flags\n  u32(0),\n  // Component flags mask\n  ascii(\"mp4-muxer-hdlr\", true)\n  // Component name\n]);\nvar minf = (track) => box(\"minf\", null, [\n  track.info.type === \"video\" ? vmhd() : smhd(),\n  dinf(),\n  stbl(track)\n]);\nvar vmhd = () => fullBox(\"vmhd\", 0, 1, [\n  u16(0),\n  // Graphics mode\n  u16(0),\n  // Opcolor R\n  u16(0),\n  // Opcolor G\n  u16(0)\n  // Opcolor B\n]);\nvar smhd = () => fullBox(\"smhd\", 0, 0, [\n  u16(0),\n  // Balance\n  u16(0)\n  // Reserved\n]);\nvar dinf = () => box(\"dinf\", null, [\n  dref()\n]);\nvar dref = () => fullBox(\"dref\", 0, 0, [\n  u32(1)\n  // Entry count\n], [\n  url()\n]);\nvar url = () => fullBox(\"url \", 0, 1);\nvar stbl = (track) => {\n  const needsCtts = track.compositionTimeOffsetTable.length > 1 || track.compositionTimeOffsetTable.some((x) => x.sampleCompositionTimeOffset !== 0);\n  return box(\"stbl\", null, [\n    stsd(track),\n    stts(track),\n    stss(track),\n    stsc(track),\n    stsz(track),\n    stco(track),\n    needsCtts ? ctts(track) : null\n  ]);\n};\nvar stsd = (track) => fullBox(\"stsd\", 0, 0, [\n  u32(1)\n  // Entry count\n], [\n  track.info.type === \"video\" ? videoSampleDescription(\n    VIDEO_CODEC_TO_BOX_NAME[track.info.codec],\n    track\n  ) : soundSampleDescription(\n    AUDIO_CODEC_TO_BOX_NAME[track.info.codec],\n    track\n  )\n]);\nvar videoSampleDescription = (compressionType, track) => box(compressionType, [\n  Array(6).fill(0),\n  // Reserved\n  u16(1),\n  // Data reference index\n  u16(0),\n  // Pre-defined\n  u16(0),\n  // Reserved\n  Array(12).fill(0),\n  // Pre-defined\n  u16(track.info.width),\n  // Width\n  u16(track.info.height),\n  // Height\n  u32(4718592),\n  // Horizontal resolution\n  u32(4718592),\n  // Vertical resolution\n  u32(0),\n  // Reserved\n  u16(1),\n  // Frame count\n  Array(32).fill(0),\n  // Compressor name\n  u16(24),\n  // Depth\n  i16(65535)\n  // Pre-defined\n], [\n  VIDEO_CODEC_TO_CONFIGURATION_BOX[track.info.codec](track),\n  track.info.decoderConfig.colorSpace ? colr(track) : null\n]);\nvar COLOR_PRIMARIES_MAP = {\n  \"bt709\": 1,\n  // ITU-R BT.709\n  \"bt470bg\": 5,\n  // ITU-R BT.470BG\n  \"smpte170m\": 6\n  // ITU-R BT.601 525 - SMPTE 170M\n};\nvar TRANSFER_CHARACTERISTICS_MAP = {\n  \"bt709\": 1,\n  // ITU-R BT.709\n  \"smpte170m\": 6,\n  // SMPTE 170M\n  \"iec61966-2-1\": 13\n  // IEC 61966-2-1\n};\nvar MATRIX_COEFFICIENTS_MAP = {\n  \"rgb\": 0,\n  // Identity\n  \"bt709\": 1,\n  // ITU-R BT.709\n  \"bt470bg\": 5,\n  // ITU-R BT.470BG\n  \"smpte170m\": 6\n  // SMPTE 170M\n};\nvar colr = (track) => box(\"colr\", [\n  ascii(\"nclx\"),\n  // Colour type\n  u16(COLOR_PRIMARIES_MAP[track.info.decoderConfig.colorSpace.primaries]),\n  // Colour primaries\n  u16(TRANSFER_CHARACTERISTICS_MAP[track.info.decoderConfig.colorSpace.transfer]),\n  // Transfer characteristics\n  u16(MATRIX_COEFFICIENTS_MAP[track.info.decoderConfig.colorSpace.matrix]),\n  // Matrix coefficients\n  u8((track.info.decoderConfig.colorSpace.fullRange ? 1 : 0) << 7)\n  // Full range flag\n]);\nvar avcC = (track) => track.info.decoderConfig && box(\"avcC\", [\n  // For AVC, description is an AVCDecoderConfigurationRecord, so nothing else to do here\n  ...new Uint8Array(track.info.decoderConfig.description)\n]);\nvar hvcC = (track) => track.info.decoderConfig && box(\"hvcC\", [\n  // For HEVC, description is a HEVCDecoderConfigurationRecord, so nothing else to do here\n  ...new Uint8Array(track.info.decoderConfig.description)\n]);\nvar vpcC = (track) => {\n  if (!track.info.decoderConfig) {\n    return null;\n  }\n  let decoderConfig = track.info.decoderConfig;\n  if (!decoderConfig.colorSpace) {\n    throw new Error(`'colorSpace' is required in the decoder config for VP9.`);\n  }\n  let parts = decoderConfig.codec.split(\".\");\n  let profile = Number(parts[1]);\n  let level = Number(parts[2]);\n  let bitDepth = Number(parts[3]);\n  let chromaSubsampling = 0;\n  let thirdByte = (bitDepth << 4) + (chromaSubsampling << 1) + Number(decoderConfig.colorSpace.fullRange);\n  let colourPrimaries = 2;\n  let transferCharacteristics = 2;\n  let matrixCoefficients = 2;\n  return fullBox(\"vpcC\", 1, 0, [\n    u8(profile),\n    // Profile\n    u8(level),\n    // Level\n    u8(thirdByte),\n    // Bit depth, chroma subsampling, full range\n    u8(colourPrimaries),\n    // Colour primaries\n    u8(transferCharacteristics),\n    // Transfer characteristics\n    u8(matrixCoefficients),\n    // Matrix coefficients\n    u16(0)\n    // Codec initialization data size\n  ]);\n};\nvar av1C = () => {\n  let marker = 1;\n  let version = 1;\n  let firstByte = (marker << 7) + version;\n  return box(\"av1C\", [\n    firstByte,\n    0,\n    0,\n    0\n  ]);\n};\nvar soundSampleDescription = (compressionType, track) => box(compressionType, [\n  Array(6).fill(0),\n  // Reserved\n  u16(1),\n  // Data reference index\n  u16(0),\n  // Version\n  u16(0),\n  // Revision level\n  u32(0),\n  // Vendor\n  u16(track.info.numberOfChannels),\n  // Number of channels\n  u16(16),\n  // Sample size (bits)\n  u16(0),\n  // Compression ID\n  u16(0),\n  // Packet size\n  fixed_16_16(track.info.sampleRate)\n  // Sample rate\n], [\n  AUDIO_CODEC_TO_CONFIGURATION_BOX[track.info.codec](track)\n]);\nvar esds = (track) => {\n  let description = new Uint8Array(track.info.decoderConfig.description);\n  return fullBox(\"esds\", 0, 0, [\n    // https://stackoverflow.com/a/54803118\n    u32(58753152),\n    // TAG(3) = Object Descriptor ([2])\n    u8(32 + description.byteLength),\n    // length of this OD (which includes the next 2 tags)\n    u16(1),\n    // ES_ID = 1\n    u8(0),\n    // flags etc = 0\n    u32(75530368),\n    // TAG(4) = ES Descriptor ([2]) embedded in above OD\n    u8(18 + description.byteLength),\n    // length of this ESD\n    u8(64),\n    // MPEG-4 Audio\n    u8(21),\n    // stream type(6bits)=5 audio, flags(2bits)=1\n    u24(0),\n    // 24bit buffer size\n    u32(130071),\n    // max bitrate\n    u32(130071),\n    // avg bitrate\n    u32(92307584),\n    // TAG(5) = ASC ([2],[3]) embedded in above OD\n    u8(description.byteLength),\n    // length\n    ...description,\n    u32(109084800),\n    // TAG(6)\n    u8(1),\n    // length\n    u8(2)\n    // data\n  ]);\n};\nvar dOps = (track) => {\n  let preskip = 3840;\n  let gain = 0;\n  const description = track.info.decoderConfig?.description;\n  if (description) {\n    if (description.byteLength < 18) {\n      throw new TypeError(\"Invalid decoder description provided for Opus; must be at least 18 bytes long.\");\n    }\n    const view2 = ArrayBuffer.isView(description) ? new DataView(description.buffer, description.byteOffset, description.byteLength) : new DataView(description);\n    preskip = view2.getUint16(10, true);\n    gain = view2.getInt16(14, true);\n  }\n  return box(\"dOps\", [\n    u8(0),\n    // Version\n    u8(track.info.numberOfChannels),\n    // OutputChannelCount\n    u16(preskip),\n    u32(track.info.sampleRate),\n    // InputSampleRate\n    fixed_8_8(gain),\n    // OutputGain\n    u8(0)\n    // ChannelMappingFamily\n  ]);\n};\nvar stts = (track) => {\n  return fullBox(\"stts\", 0, 0, [\n    u32(track.timeToSampleTable.length),\n    // Number of entries\n    track.timeToSampleTable.map((x) => [\n      // Time-to-sample table\n      u32(x.sampleCount),\n      // Sample count\n      u32(x.sampleDelta)\n      // Sample duration\n    ])\n  ]);\n};\nvar stss = (track) => {\n  if (track.samples.every((x) => x.type === \"key\"))\n    return null;\n  let keySamples = [...track.samples.entries()].filter(([, sample]) => sample.type === \"key\");\n  return fullBox(\"stss\", 0, 0, [\n    u32(keySamples.length),\n    // Number of entries\n    keySamples.map(([index]) => u32(index + 1))\n    // Sync sample table\n  ]);\n};\nvar stsc = (track) => {\n  return fullBox(\"stsc\", 0, 0, [\n    u32(track.compactlyCodedChunkTable.length),\n    // Number of entries\n    track.compactlyCodedChunkTable.map((x) => [\n      // Sample-to-chunk table\n      u32(x.firstChunk),\n      // First chunk\n      u32(x.samplesPerChunk),\n      // Samples per chunk\n      u32(1)\n      // Sample description index\n    ])\n  ]);\n};\nvar stsz = (track) => fullBox(\"stsz\", 0, 0, [\n  u32(0),\n  // Sample size (0 means non-constant size)\n  u32(track.samples.length),\n  // Number of entries\n  track.samples.map((x) => u32(x.size))\n  // Sample size table\n]);\nvar stco = (track) => {\n  if (track.finalizedChunks.length > 0 && last(track.finalizedChunks).offset >= 2 ** 32) {\n    return fullBox(\"co64\", 0, 0, [\n      u32(track.finalizedChunks.length),\n      // Number of entries\n      track.finalizedChunks.map((x) => u64(x.offset))\n      // Chunk offset table\n    ]);\n  }\n  return fullBox(\"stco\", 0, 0, [\n    u32(track.finalizedChunks.length),\n    // Number of entries\n    track.finalizedChunks.map((x) => u32(x.offset))\n    // Chunk offset table\n  ]);\n};\nvar ctts = (track) => {\n  return fullBox(\"ctts\", 0, 0, [\n    u32(track.compositionTimeOffsetTable.length),\n    // Number of entries\n    track.compositionTimeOffsetTable.map((x) => [\n      // Time-to-sample table\n      u32(x.sampleCount),\n      // Sample count\n      u32(x.sampleCompositionTimeOffset)\n      // Sample offset\n    ])\n  ]);\n};\nvar mvex = (tracks) => {\n  return box(\"mvex\", null, tracks.map(trex));\n};\nvar trex = (track) => {\n  return fullBox(\"trex\", 0, 0, [\n    u32(track.id),\n    // Track ID\n    u32(1),\n    // Default sample description index\n    u32(0),\n    // Default sample duration\n    u32(0),\n    // Default sample size\n    u32(0)\n    // Default sample flags\n  ]);\n};\nvar moof = (sequenceNumber, tracks) => {\n  return box(\"moof\", null, [\n    mfhd(sequenceNumber),\n    ...tracks.map(traf)\n  ]);\n};\nvar mfhd = (sequenceNumber) => {\n  return fullBox(\"mfhd\", 0, 0, [\n    u32(sequenceNumber)\n    // Sequence number\n  ]);\n};\nvar fragmentSampleFlags = (sample) => {\n  let byte1 = 0;\n  let byte2 = 0;\n  let byte3 = 0;\n  let byte4 = 0;\n  let sampleIsDifferenceSample = sample.type === \"delta\";\n  byte2 |= +sampleIsDifferenceSample;\n  if (sampleIsDifferenceSample) {\n    byte1 |= 1;\n  } else {\n    byte1 |= 2;\n  }\n  return byte1 << 24 | byte2 << 16 | byte3 << 8 | byte4;\n};\nvar traf = (track) => {\n  return box(\"traf\", null, [\n    tfhd(track),\n    tfdt(track),\n    trun(track)\n  ]);\n};\nvar tfhd = (track) => {\n  let tfFlags = 0;\n  tfFlags |= 8;\n  tfFlags |= 16;\n  tfFlags |= 32;\n  tfFlags |= 131072;\n  let referenceSample = track.currentChunk.samples[1] ?? track.currentChunk.samples[0];\n  let referenceSampleInfo = {\n    duration: referenceSample.timescaleUnitsToNextSample,\n    size: referenceSample.size,\n    flags: fragmentSampleFlags(referenceSample)\n  };\n  return fullBox(\"tfhd\", 0, tfFlags, [\n    u32(track.id),\n    // Track ID\n    u32(referenceSampleInfo.duration),\n    // Default sample duration\n    u32(referenceSampleInfo.size),\n    // Default sample size\n    u32(referenceSampleInfo.flags)\n    // Default sample flags\n  ]);\n};\nvar tfdt = (track) => {\n  return fullBox(\"tfdt\", 1, 0, [\n    u64(intoTimescale(track.currentChunk.startTimestamp, track.timescale))\n    // Base Media Decode Time\n  ]);\n};\nvar trun = (track) => {\n  let allSampleDurations = track.currentChunk.samples.map((x) => x.timescaleUnitsToNextSample);\n  let allSampleSizes = track.currentChunk.samples.map((x) => x.size);\n  let allSampleFlags = track.currentChunk.samples.map(fragmentSampleFlags);\n  let allSampleCompositionTimeOffsets = track.currentChunk.samples.map((x) => intoTimescale(x.presentationTimestamp - x.decodeTimestamp, track.timescale));\n  let uniqueSampleDurations = new Set(allSampleDurations);\n  let uniqueSampleSizes = new Set(allSampleSizes);\n  let uniqueSampleFlags = new Set(allSampleFlags);\n  let uniqueSampleCompositionTimeOffsets = new Set(allSampleCompositionTimeOffsets);\n  let firstSampleFlagsPresent = uniqueSampleFlags.size === 2 && allSampleFlags[0] !== allSampleFlags[1];\n  let sampleDurationPresent = uniqueSampleDurations.size > 1;\n  let sampleSizePresent = uniqueSampleSizes.size > 1;\n  let sampleFlagsPresent = !firstSampleFlagsPresent && uniqueSampleFlags.size > 1;\n  let sampleCompositionTimeOffsetsPresent = uniqueSampleCompositionTimeOffsets.size > 1 || [...uniqueSampleCompositionTimeOffsets].some((x) => x !== 0);\n  let flags = 0;\n  flags |= 1;\n  flags |= 4 * +firstSampleFlagsPresent;\n  flags |= 256 * +sampleDurationPresent;\n  flags |= 512 * +sampleSizePresent;\n  flags |= 1024 * +sampleFlagsPresent;\n  flags |= 2048 * +sampleCompositionTimeOffsetsPresent;\n  return fullBox(\"trun\", 1, flags, [\n    u32(track.currentChunk.samples.length),\n    // Sample count\n    u32(track.currentChunk.offset - track.currentChunk.moofOffset || 0),\n    // Data offset\n    firstSampleFlagsPresent ? u32(allSampleFlags[0]) : [],\n    track.currentChunk.samples.map((_, i) => [\n      sampleDurationPresent ? u32(allSampleDurations[i]) : [],\n      // Sample duration\n      sampleSizePresent ? u32(allSampleSizes[i]) : [],\n      // Sample size\n      sampleFlagsPresent ? u32(allSampleFlags[i]) : [],\n      // Sample flags\n      // Sample composition time offsets\n      sampleCompositionTimeOffsetsPresent ? i32(allSampleCompositionTimeOffsets[i]) : []\n    ])\n  ]);\n};\nvar mfra = (tracks) => {\n  return box(\"mfra\", null, [\n    ...tracks.map(tfra),\n    mfro()\n  ]);\n};\nvar tfra = (track, trackIndex) => {\n  let version = 1;\n  return fullBox(\"tfra\", version, 0, [\n    u32(track.id),\n    // Track ID\n    u32(63),\n    // This specifies that traf number, trun number and sample number are 32-bit ints\n    u32(track.finalizedChunks.length),\n    // Number of entries\n    track.finalizedChunks.map((chunk) => [\n      u64(intoTimescale(chunk.startTimestamp, track.timescale)),\n      // Time\n      u64(chunk.moofOffset),\n      // moof offset\n      u32(trackIndex + 1),\n      // traf number\n      u32(1),\n      // trun number\n      u32(1)\n      // Sample number\n    ])\n  ]);\n};\nvar mfro = () => {\n  return fullBox(\"mfro\", 0, 0, [\n    // This value needs to be overwritten manually from the outside, where the actual size of the enclosing mfra box\n    // is known\n    u32(0)\n    // Size\n  ]);\n};\nvar VIDEO_CODEC_TO_BOX_NAME = {\n  \"avc\": \"avc1\",\n  \"hevc\": \"hvc1\",\n  \"vp9\": \"vp09\",\n  \"av1\": \"av01\"\n};\nvar VIDEO_CODEC_TO_CONFIGURATION_BOX = {\n  \"avc\": avcC,\n  \"hevc\": hvcC,\n  \"vp9\": vpcC,\n  \"av1\": av1C\n};\nvar AUDIO_CODEC_TO_BOX_NAME = {\n  \"aac\": \"mp4a\",\n  \"opus\": \"Opus\"\n};\nvar AUDIO_CODEC_TO_CONFIGURATION_BOX = {\n  \"aac\": esds,\n  \"opus\": dOps\n};\n\n// src/target.ts\nvar isTarget = Symbol(\"isTarget\");\nvar Target = class {\n};\nisTarget;\nvar ArrayBufferTarget = class extends Target {\n  constructor() {\n    super(...arguments);\n    this.buffer = null;\n  }\n};\nvar StreamTarget = class extends Target {\n  constructor(options) {\n    super();\n    this.options = options;\n    if (typeof options !== \"object\") {\n      throw new TypeError(\"StreamTarget requires an options object to be passed to its constructor.\");\n    }\n    if (options.onData) {\n      if (typeof options.onData !== \"function\") {\n        throw new TypeError(\"options.onData, when provided, must be a function.\");\n      }\n      if (options.onData.length < 2) {\n        throw new TypeError(\n          \"options.onData, when provided, must be a function that takes in at least two arguments (data and position). Ignoring the position argument, which specifies the byte offset at which the data is to be written, can lead to broken outputs.\"\n        );\n      }\n    }\n    if (options.chunked !== void 0 && typeof options.chunked !== \"boolean\") {\n      throw new TypeError(\"options.chunked, when provided, must be a boolean.\");\n    }\n    if (options.chunkSize !== void 0 && (!Number.isInteger(options.chunkSize) || options.chunkSize < 1024)) {\n      throw new TypeError(\"options.chunkSize, when provided, must be an integer and not smaller than 1024.\");\n    }\n  }\n};\nvar FileSystemWritableFileStreamTarget = class extends Target {\n  constructor(stream, options) {\n    super();\n    this.stream = stream;\n    this.options = options;\n    if (!(stream instanceof FileSystemWritableFileStream)) {\n      throw new TypeError(\"FileSystemWritableFileStreamTarget requires a FileSystemWritableFileStream instance.\");\n    }\n    if (options !== void 0 && typeof options !== \"object\") {\n      throw new TypeError(\"FileSystemWritableFileStreamTarget's options, when provided, must be an object.\");\n    }\n    if (options) {\n      if (options.chunkSize !== void 0 && (!Number.isInteger(options.chunkSize) || options.chunkSize <= 0)) {\n        throw new TypeError(\"options.chunkSize, when provided, must be a positive integer\");\n      }\n    }\n  }\n};\n\n// src/writer.ts\nvar _helper, _helperView;\nvar Writer = class {\n  constructor() {\n    this.pos = 0;\n    __privateAdd(this, _helper, new Uint8Array(8));\n    __privateAdd(this, _helperView, new DataView(__privateGet(this, _helper).buffer));\n    /**\n     * Stores the position from the start of the file to where boxes elements have been written. This is used to\n     * rewrite/edit elements that were already added before, and to measure sizes of things.\n     */\n    this.offsets = /* @__PURE__ */ new WeakMap();\n  }\n  /** Sets the current position for future writes to a new one. */\n  seek(newPos) {\n    this.pos = newPos;\n  }\n  writeU32(value) {\n    __privateGet(this, _helperView).setUint32(0, value, false);\n    this.write(__privateGet(this, _helper).subarray(0, 4));\n  }\n  writeU64(value) {\n    __privateGet(this, _helperView).setUint32(0, Math.floor(value / 2 ** 32), false);\n    __privateGet(this, _helperView).setUint32(4, value, false);\n    this.write(__privateGet(this, _helper).subarray(0, 8));\n  }\n  writeAscii(text) {\n    for (let i = 0; i < text.length; i++) {\n      __privateGet(this, _helperView).setUint8(i % 8, text.charCodeAt(i));\n      if (i % 8 === 7)\n        this.write(__privateGet(this, _helper));\n    }\n    if (text.length % 8 !== 0) {\n      this.write(__privateGet(this, _helper).subarray(0, text.length % 8));\n    }\n  }\n  writeBox(box2) {\n    this.offsets.set(box2, this.pos);\n    if (box2.contents && !box2.children) {\n      this.writeBoxHeader(box2, box2.size ?? box2.contents.byteLength + 8);\n      this.write(box2.contents);\n    } else {\n      let startPos = this.pos;\n      this.writeBoxHeader(box2, 0);\n      if (box2.contents)\n        this.write(box2.contents);\n      if (box2.children) {\n        for (let child of box2.children)\n          if (child)\n            this.writeBox(child);\n      }\n      let endPos = this.pos;\n      let size = box2.size ?? endPos - startPos;\n      this.seek(startPos);\n      this.writeBoxHeader(box2, size);\n      this.seek(endPos);\n    }\n  }\n  writeBoxHeader(box2, size) {\n    this.writeU32(box2.largeSize ? 1 : size);\n    this.writeAscii(box2.type);\n    if (box2.largeSize)\n      this.writeU64(size);\n  }\n  measureBoxHeader(box2) {\n    return 8 + (box2.largeSize ? 8 : 0);\n  }\n  patchBox(box2) {\n    let endPos = this.pos;\n    this.seek(this.offsets.get(box2));\n    this.writeBox(box2);\n    this.seek(endPos);\n  }\n  measureBox(box2) {\n    if (box2.contents && !box2.children) {\n      let headerSize = this.measureBoxHeader(box2);\n      return headerSize + box2.contents.byteLength;\n    } else {\n      let result = this.measureBoxHeader(box2);\n      if (box2.contents)\n        result += box2.contents.byteLength;\n      if (box2.children) {\n        for (let child of box2.children)\n          if (child)\n            result += this.measureBox(child);\n      }\n      return result;\n    }\n  }\n};\n_helper = new WeakMap();\n_helperView = new WeakMap();\nvar _target, _buffer, _bytes, _maxPos, _ensureSize, ensureSize_fn;\nvar ArrayBufferTargetWriter = class extends Writer {\n  constructor(target) {\n    super();\n    __privateAdd(this, _ensureSize);\n    __privateAdd(this, _target, void 0);\n    __privateAdd(this, _buffer, new ArrayBuffer(2 ** 16));\n    __privateAdd(this, _bytes, new Uint8Array(__privateGet(this, _buffer)));\n    __privateAdd(this, _maxPos, 0);\n    __privateSet(this, _target, target);\n  }\n  write(data) {\n    __privateMethod(this, _ensureSize, ensureSize_fn).call(this, this.pos + data.byteLength);\n    __privateGet(this, _bytes).set(data, this.pos);\n    this.pos += data.byteLength;\n    __privateSet(this, _maxPos, Math.max(__privateGet(this, _maxPos), this.pos));\n  }\n  finalize() {\n    __privateMethod(this, _ensureSize, ensureSize_fn).call(this, this.pos);\n    __privateGet(this, _target).buffer = __privateGet(this, _buffer).slice(0, Math.max(__privateGet(this, _maxPos), this.pos));\n  }\n};\n_target = new WeakMap();\n_buffer = new WeakMap();\n_bytes = new WeakMap();\n_maxPos = new WeakMap();\n_ensureSize = new WeakSet();\nensureSize_fn = function(size) {\n  let newLength = __privateGet(this, _buffer).byteLength;\n  while (newLength < size)\n    newLength *= 2;\n  if (newLength === __privateGet(this, _buffer).byteLength)\n    return;\n  let newBuffer = new ArrayBuffer(newLength);\n  let newBytes = new Uint8Array(newBuffer);\n  newBytes.set(__privateGet(this, _bytes), 0);\n  __privateSet(this, _buffer, newBuffer);\n  __privateSet(this, _bytes, newBytes);\n};\nvar DEFAULT_CHUNK_SIZE = 2 ** 24;\nvar MAX_CHUNKS_AT_ONCE = 2;\nvar _target2, _sections, _chunked, _chunkSize, _chunks, _writeDataIntoChunks, writeDataIntoChunks_fn, _insertSectionIntoChunk, insertSectionIntoChunk_fn, _createChunk, createChunk_fn, _flushChunks, flushChunks_fn;\nvar StreamTargetWriter = class extends Writer {\n  constructor(target) {\n    super();\n    __privateAdd(this, _writeDataIntoChunks);\n    __privateAdd(this, _insertSectionIntoChunk);\n    __privateAdd(this, _createChunk);\n    __privateAdd(this, _flushChunks);\n    __privateAdd(this, _target2, void 0);\n    __privateAdd(this, _sections, []);\n    __privateAdd(this, _chunked, void 0);\n    __privateAdd(this, _chunkSize, void 0);\n    /**\n     * The data is divided up into fixed-size chunks, whose contents are first filled in RAM and then flushed out.\n     * A chunk is flushed if all of its contents have been written.\n     */\n    __privateAdd(this, _chunks, []);\n    __privateSet(this, _target2, target);\n    __privateSet(this, _chunked, target.options?.chunked ?? false);\n    __privateSet(this, _chunkSize, target.options?.chunkSize ?? DEFAULT_CHUNK_SIZE);\n  }\n  write(data) {\n    __privateGet(this, _sections).push({\n      data: data.slice(),\n      start: this.pos\n    });\n    this.pos += data.byteLength;\n  }\n  flush() {\n    if (__privateGet(this, _sections).length === 0)\n      return;\n    let chunks = [];\n    let sorted = [...__privateGet(this, _sections)].sort((a, b) => a.start - b.start);\n    chunks.push({\n      start: sorted[0].start,\n      size: sorted[0].data.byteLength\n    });\n    for (let i = 1; i < sorted.length; i++) {\n      let lastChunk = chunks[chunks.length - 1];\n      let section = sorted[i];\n      if (section.start <= lastChunk.start + lastChunk.size) {\n        lastChunk.size = Math.max(lastChunk.size, section.start + section.data.byteLength - lastChunk.start);\n      } else {\n        chunks.push({\n          start: section.start,\n          size: section.data.byteLength\n        });\n      }\n    }\n    for (let chunk of chunks) {\n      chunk.data = new Uint8Array(chunk.size);\n      for (let section of __privateGet(this, _sections)) {\n        if (chunk.start <= section.start && section.start < chunk.start + chunk.size) {\n          chunk.data.set(section.data, section.start - chunk.start);\n        }\n      }\n      if (__privateGet(this, _chunked)) {\n        __privateMethod(this, _writeDataIntoChunks, writeDataIntoChunks_fn).call(this, chunk.data, chunk.start);\n        __privateMethod(this, _flushChunks, flushChunks_fn).call(this);\n      } else {\n        __privateGet(this, _target2).options.onData?.(chunk.data, chunk.start);\n      }\n    }\n    __privateGet(this, _sections).length = 0;\n  }\n  finalize() {\n    if (__privateGet(this, _chunked)) {\n      __privateMethod(this, _flushChunks, flushChunks_fn).call(this, true);\n    }\n  }\n};\n_target2 = new WeakMap();\n_sections = new WeakMap();\n_chunked = new WeakMap();\n_chunkSize = new WeakMap();\n_chunks = new WeakMap();\n_writeDataIntoChunks = new WeakSet();\nwriteDataIntoChunks_fn = function(data, position) {\n  let chunkIndex = __privateGet(this, _chunks).findIndex((x) => x.start <= position && position < x.start + __privateGet(this, _chunkSize));\n  if (chunkIndex === -1)\n    chunkIndex = __privateMethod(this, _createChunk, createChunk_fn).call(this, position);\n  let chunk = __privateGet(this, _chunks)[chunkIndex];\n  let relativePosition = position - chunk.start;\n  let toWrite = data.subarray(0, Math.min(__privateGet(this, _chunkSize) - relativePosition, data.byteLength));\n  chunk.data.set(toWrite, relativePosition);\n  let section = {\n    start: relativePosition,\n    end: relativePosition + toWrite.byteLength\n  };\n  __privateMethod(this, _insertSectionIntoChunk, insertSectionIntoChunk_fn).call(this, chunk, section);\n  if (chunk.written[0].start === 0 && chunk.written[0].end === __privateGet(this, _chunkSize)) {\n    chunk.shouldFlush = true;\n  }\n  if (__privateGet(this, _chunks).length > MAX_CHUNKS_AT_ONCE) {\n    for (let i = 0; i < __privateGet(this, _chunks).length - 1; i++) {\n      __privateGet(this, _chunks)[i].shouldFlush = true;\n    }\n    __privateMethod(this, _flushChunks, flushChunks_fn).call(this);\n  }\n  if (toWrite.byteLength < data.byteLength) {\n    __privateMethod(this, _writeDataIntoChunks, writeDataIntoChunks_fn).call(this, data.subarray(toWrite.byteLength), position + toWrite.byteLength);\n  }\n};\n_insertSectionIntoChunk = new WeakSet();\ninsertSectionIntoChunk_fn = function(chunk, section) {\n  let low = 0;\n  let high = chunk.written.length - 1;\n  let index = -1;\n  while (low <= high) {\n    let mid = Math.floor(low + (high - low + 1) / 2);\n    if (chunk.written[mid].start <= section.start) {\n      low = mid + 1;\n      index = mid;\n    } else {\n      high = mid - 1;\n    }\n  }\n  chunk.written.splice(index + 1, 0, section);\n  if (index === -1 || chunk.written[index].end < section.start)\n    index++;\n  while (index < chunk.written.length - 1 && chunk.written[index].end >= chunk.written[index + 1].start) {\n    chunk.written[index].end = Math.max(chunk.written[index].end, chunk.written[index + 1].end);\n    chunk.written.splice(index + 1, 1);\n  }\n};\n_createChunk = new WeakSet();\ncreateChunk_fn = function(includesPosition) {\n  let start = Math.floor(includesPosition / __privateGet(this, _chunkSize)) * __privateGet(this, _chunkSize);\n  let chunk = {\n    start,\n    data: new Uint8Array(__privateGet(this, _chunkSize)),\n    written: [],\n    shouldFlush: false\n  };\n  __privateGet(this, _chunks).push(chunk);\n  __privateGet(this, _chunks).sort((a, b) => a.start - b.start);\n  return __privateGet(this, _chunks).indexOf(chunk);\n};\n_flushChunks = new WeakSet();\nflushChunks_fn = function(force = false) {\n  for (let i = 0; i < __privateGet(this, _chunks).length; i++) {\n    let chunk = __privateGet(this, _chunks)[i];\n    if (!chunk.shouldFlush && !force)\n      continue;\n    for (let section of chunk.written) {\n      __privateGet(this, _target2).options.onData?.(\n        chunk.data.subarray(section.start, section.end),\n        chunk.start + section.start\n      );\n    }\n    __privateGet(this, _chunks).splice(i--, 1);\n  }\n};\nvar FileSystemWritableFileStreamTargetWriter = class extends StreamTargetWriter {\n  constructor(target) {\n    super(new StreamTarget({\n      onData: (data, position) => target.stream.write({\n        type: \"write\",\n        data,\n        position\n      }),\n      chunked: true,\n      chunkSize: target.options?.chunkSize\n    }));\n  }\n};\n\n// src/muxer.ts\nvar GLOBAL_TIMESCALE = 1e3;\nvar SUPPORTED_VIDEO_CODECS = [\"avc\", \"hevc\", \"vp9\", \"av1\"];\nvar SUPPORTED_AUDIO_CODECS = [\"aac\", \"opus\"];\nvar TIMESTAMP_OFFSET = 2082844800;\nvar FIRST_TIMESTAMP_BEHAVIORS = [\"strict\", \"offset\", \"cross-track-offset\"];\nvar _options, _writer, _ftypSize, _mdat, _videoTrack, _audioTrack, _creationTime, _finalizedChunks, _nextFragmentNumber, _videoSampleQueue, _audioSampleQueue, _finalized, _validateOptions, validateOptions_fn, _writeHeader, writeHeader_fn, _computeMoovSizeUpperBound, computeMoovSizeUpperBound_fn, _prepareTracks, prepareTracks_fn, _generateMpeg4AudioSpecificConfig, generateMpeg4AudioSpecificConfig_fn, _createSampleForTrack, createSampleForTrack_fn, _addSampleToTrack, addSampleToTrack_fn, _validateTimestamp, validateTimestamp_fn, _finalizeCurrentChunk, finalizeCurrentChunk_fn, _finalizeFragment, finalizeFragment_fn, _maybeFlushStreamingTargetWriter, maybeFlushStreamingTargetWriter_fn, _ensureNotFinalized, ensureNotFinalized_fn;\nvar Muxer = class {\n  constructor(options) {\n    __privateAdd(this, _validateOptions);\n    __privateAdd(this, _writeHeader);\n    __privateAdd(this, _computeMoovSizeUpperBound);\n    __privateAdd(this, _prepareTracks);\n    // https://wiki.multimedia.cx/index.php/MPEG-4_Audio\n    __privateAdd(this, _generateMpeg4AudioSpecificConfig);\n    __privateAdd(this, _createSampleForTrack);\n    __privateAdd(this, _addSampleToTrack);\n    __privateAdd(this, _validateTimestamp);\n    __privateAdd(this, _finalizeCurrentChunk);\n    __privateAdd(this, _finalizeFragment);\n    __privateAdd(this, _maybeFlushStreamingTargetWriter);\n    __privateAdd(this, _ensureNotFinalized);\n    __privateAdd(this, _options, void 0);\n    __privateAdd(this, _writer, void 0);\n    __privateAdd(this, _ftypSize, void 0);\n    __privateAdd(this, _mdat, void 0);\n    __privateAdd(this, _videoTrack, null);\n    __privateAdd(this, _audioTrack, null);\n    __privateAdd(this, _creationTime, Math.floor(Date.now() / 1e3) + TIMESTAMP_OFFSET);\n    __privateAdd(this, _finalizedChunks, []);\n    // Fields for fragmented MP4:\n    __privateAdd(this, _nextFragmentNumber, 1);\n    __privateAdd(this, _videoSampleQueue, []);\n    __privateAdd(this, _audioSampleQueue, []);\n    __privateAdd(this, _finalized, false);\n    __privateMethod(this, _validateOptions, validateOptions_fn).call(this, options);\n    options.video = deepClone(options.video);\n    options.audio = deepClone(options.audio);\n    options.fastStart = deepClone(options.fastStart);\n    this.target = options.target;\n    __privateSet(this, _options, {\n      firstTimestampBehavior: \"strict\",\n      ...options\n    });\n    if (options.target instanceof ArrayBufferTarget) {\n      __privateSet(this, _writer, new ArrayBufferTargetWriter(options.target));\n    } else if (options.target instanceof StreamTarget) {\n      __privateSet(this, _writer, new StreamTargetWriter(options.target));\n    } else if (options.target instanceof FileSystemWritableFileStreamTarget) {\n      __privateSet(this, _writer, new FileSystemWritableFileStreamTargetWriter(options.target));\n    } else {\n      throw new Error(`Invalid target: ${options.target}`);\n    }\n    __privateMethod(this, _prepareTracks, prepareTracks_fn).call(this);\n    __privateMethod(this, _writeHeader, writeHeader_fn).call(this);\n  }\n  addVideoChunk(sample, meta, timestamp, compositionTimeOffset) {\n    if (!(sample instanceof EncodedVideoChunk)) {\n      throw new TypeError(\"addVideoChunk's first argument (sample) must be of type EncodedVideoChunk.\");\n    }\n    if (meta && typeof meta !== \"object\") {\n      throw new TypeError(\"addVideoChunk's second argument (meta), when provided, must be an object.\");\n    }\n    if (timestamp !== void 0 && (!Number.isFinite(timestamp) || timestamp < 0)) {\n      throw new TypeError(\n        \"addVideoChunk's third argument (timestamp), when provided, must be a non-negative real number.\"\n      );\n    }\n    if (compositionTimeOffset !== void 0 && !Number.isFinite(compositionTimeOffset)) {\n      throw new TypeError(\n        \"addVideoChunk's fourth argument (compositionTimeOffset), when provided, must be a real number.\"\n      );\n    }\n    let data = new Uint8Array(sample.byteLength);\n    sample.copyTo(data);\n    this.addVideoChunkRaw(\n      data,\n      sample.type,\n      timestamp ?? sample.timestamp,\n      sample.duration,\n      meta,\n      compositionTimeOffset\n    );\n  }\n  addVideoChunkRaw(data, type, timestamp, duration, meta, compositionTimeOffset) {\n    if (!(data instanceof Uint8Array)) {\n      throw new TypeError(\"addVideoChunkRaw's first argument (data) must be an instance of Uint8Array.\");\n    }\n    if (type !== \"key\" && type !== \"delta\") {\n      throw new TypeError(\"addVideoChunkRaw's second argument (type) must be either 'key' or 'delta'.\");\n    }\n    if (!Number.isFinite(timestamp) || timestamp < 0) {\n      throw new TypeError(\"addVideoChunkRaw's third argument (timestamp) must be a non-negative real number.\");\n    }\n    if (!Number.isFinite(duration) || duration < 0) {\n      throw new TypeError(\"addVideoChunkRaw's fourth argument (duration) must be a non-negative real number.\");\n    }\n    if (meta && typeof meta !== \"object\") {\n      throw new TypeError(\"addVideoChunkRaw's fifth argument (meta), when provided, must be an object.\");\n    }\n    if (compositionTimeOffset !== void 0 && !Number.isFinite(compositionTimeOffset)) {\n      throw new TypeError(\n        \"addVideoChunkRaw's sixth argument (compositionTimeOffset), when provided, must be a real number.\"\n      );\n    }\n    __privateMethod(this, _ensureNotFinalized, ensureNotFinalized_fn).call(this);\n    if (!__privateGet(this, _options).video)\n      throw new Error(\"No video track declared.\");\n    if (typeof __privateGet(this, _options).fastStart === \"object\" && __privateGet(this, _videoTrack).samples.length === __privateGet(this, _options).fastStart.expectedVideoChunks) {\n      throw new Error(`Cannot add more video chunks than specified in 'fastStart' (${__privateGet(this, _options).fastStart.expectedVideoChunks}).`);\n    }\n    let videoSample = __privateMethod(this, _createSampleForTrack, createSampleForTrack_fn).call(this, __privateGet(this, _videoTrack), data, type, timestamp, duration, meta, compositionTimeOffset);\n    if (__privateGet(this, _options).fastStart === \"fragmented\" && __privateGet(this, _audioTrack)) {\n      while (__privateGet(this, _audioSampleQueue).length > 0 && __privateGet(this, _audioSampleQueue)[0].decodeTimestamp <= videoSample.decodeTimestamp) {\n        let audioSample = __privateGet(this, _audioSampleQueue).shift();\n        __privateMethod(this, _addSampleToTrack, addSampleToTrack_fn).call(this, __privateGet(this, _audioTrack), audioSample);\n      }\n      if (videoSample.decodeTimestamp <= __privateGet(this, _audioTrack).lastDecodeTimestamp) {\n        __privateMethod(this, _addSampleToTrack, addSampleToTrack_fn).call(this, __privateGet(this, _videoTrack), videoSample);\n      } else {\n        __privateGet(this, _videoSampleQueue).push(videoSample);\n      }\n    } else {\n      __privateMethod(this, _addSampleToTrack, addSampleToTrack_fn).call(this, __privateGet(this, _videoTrack), videoSample);\n    }\n  }\n  addAudioChunk(sample, meta, timestamp) {\n    if (!(sample instanceof EncodedAudioChunk)) {\n      throw new TypeError(\"addAudioChunk's first argument (sample) must be of type EncodedAudioChunk.\");\n    }\n    if (meta && typeof meta !== \"object\") {\n      throw new TypeError(\"addAudioChunk's second argument (meta), when provided, must be an object.\");\n    }\n    if (timestamp !== void 0 && (!Number.isFinite(timestamp) || timestamp < 0)) {\n      throw new TypeError(\n        \"addAudioChunk's third argument (timestamp), when provided, must be a non-negative real number.\"\n      );\n    }\n    let data = new Uint8Array(sample.byteLength);\n    sample.copyTo(data);\n    this.addAudioChunkRaw(data, sample.type, timestamp ?? sample.timestamp, sample.duration, meta);\n  }\n  addAudioChunkRaw(data, type, timestamp, duration, meta) {\n    if (!(data instanceof Uint8Array)) {\n      throw new TypeError(\"addAudioChunkRaw's first argument (data) must be an instance of Uint8Array.\");\n    }\n    if (type !== \"key\" && type !== \"delta\") {\n      throw new TypeError(\"addAudioChunkRaw's second argument (type) must be either 'key' or 'delta'.\");\n    }\n    if (!Number.isFinite(timestamp) || timestamp < 0) {\n      throw new TypeError(\"addAudioChunkRaw's third argument (timestamp) must be a non-negative real number.\");\n    }\n    if (!Number.isFinite(duration) || duration < 0) {\n      throw new TypeError(\"addAudioChunkRaw's fourth argument (duration) must be a non-negative real number.\");\n    }\n    if (meta && typeof meta !== \"object\") {\n      throw new TypeError(\"addAudioChunkRaw's fifth argument (meta), when provided, must be an object.\");\n    }\n    __privateMethod(this, _ensureNotFinalized, ensureNotFinalized_fn).call(this);\n    if (!__privateGet(this, _options).audio)\n      throw new Error(\"No audio track declared.\");\n    if (typeof __privateGet(this, _options).fastStart === \"object\" && __privateGet(this, _audioTrack).samples.length === __privateGet(this, _options).fastStart.expectedAudioChunks) {\n      throw new Error(`Cannot add more audio chunks than specified in 'fastStart' (${__privateGet(this, _options).fastStart.expectedAudioChunks}).`);\n    }\n    let audioSample = __privateMethod(this, _createSampleForTrack, createSampleForTrack_fn).call(this, __privateGet(this, _audioTrack), data, type, timestamp, duration, meta);\n    if (__privateGet(this, _options).fastStart === \"fragmented\" && __privateGet(this, _videoTrack)) {\n      while (__privateGet(this, _videoSampleQueue).length > 0 && __privateGet(this, _videoSampleQueue)[0].decodeTimestamp <= audioSample.decodeTimestamp) {\n        let videoSample = __privateGet(this, _videoSampleQueue).shift();\n        __privateMethod(this, _addSampleToTrack, addSampleToTrack_fn).call(this, __privateGet(this, _videoTrack), videoSample);\n      }\n      if (audioSample.decodeTimestamp <= __privateGet(this, _videoTrack).lastDecodeTimestamp) {\n        __privateMethod(this, _addSampleToTrack, addSampleToTrack_fn).call(this, __privateGet(this, _audioTrack), audioSample);\n      } else {\n        __privateGet(this, _audioSampleQueue).push(audioSample);\n      }\n    } else {\n      __privateMethod(this, _addSampleToTrack, addSampleToTrack_fn).call(this, __privateGet(this, _audioTrack), audioSample);\n    }\n  }\n  /** Finalizes the file, making it ready for use. Must be called after all video and audio chunks have been added. */\n  finalize() {\n    if (__privateGet(this, _finalized)) {\n      throw new Error(\"Cannot finalize a muxer more than once.\");\n    }\n    if (__privateGet(this, _options).fastStart === \"fragmented\") {\n      for (let videoSample of __privateGet(this, _videoSampleQueue))\n        __privateMethod(this, _addSampleToTrack, addSampleToTrack_fn).call(this, __privateGet(this, _videoTrack), videoSample);\n      for (let audioSample of __privateGet(this, _audioSampleQueue))\n        __privateMethod(this, _addSampleToTrack, addSampleToTrack_fn).call(this, __privateGet(this, _audioTrack), audioSample);\n      __privateMethod(this, _finalizeFragment, finalizeFragment_fn).call(this, false);\n    } else {\n      if (__privateGet(this, _videoTrack))\n        __privateMethod(this, _finalizeCurrentChunk, finalizeCurrentChunk_fn).call(this, __privateGet(this, _videoTrack));\n      if (__privateGet(this, _audioTrack))\n        __privateMethod(this, _finalizeCurrentChunk, finalizeCurrentChunk_fn).call(this, __privateGet(this, _audioTrack));\n    }\n    let tracks = [__privateGet(this, _videoTrack), __privateGet(this, _audioTrack)].filter(Boolean);\n    if (__privateGet(this, _options).fastStart === \"in-memory\") {\n      let mdatSize;\n      for (let i = 0; i < 2; i++) {\n        let movieBox2 = moov(tracks, __privateGet(this, _creationTime));\n        let movieBoxSize = __privateGet(this, _writer).measureBox(movieBox2);\n        mdatSize = __privateGet(this, _writer).measureBox(__privateGet(this, _mdat));\n        let currentChunkPos = __privateGet(this, _writer).pos + movieBoxSize + mdatSize;\n        for (let chunk of __privateGet(this, _finalizedChunks)) {\n          chunk.offset = currentChunkPos;\n          for (let { data } of chunk.samples) {\n            currentChunkPos += data.byteLength;\n            mdatSize += data.byteLength;\n          }\n        }\n        if (currentChunkPos < 2 ** 32)\n          break;\n        if (mdatSize >= 2 ** 32)\n          __privateGet(this, _mdat).largeSize = true;\n      }\n      let movieBox = moov(tracks, __privateGet(this, _creationTime));\n      __privateGet(this, _writer).writeBox(movieBox);\n      __privateGet(this, _mdat).size = mdatSize;\n      __privateGet(this, _writer).writeBox(__privateGet(this, _mdat));\n      for (let chunk of __privateGet(this, _finalizedChunks)) {\n        for (let sample of chunk.samples) {\n          __privateGet(this, _writer).write(sample.data);\n          sample.data = null;\n        }\n      }\n    } else if (__privateGet(this, _options).fastStart === \"fragmented\") {\n      let startPos = __privateGet(this, _writer).pos;\n      let mfraBox = mfra(tracks);\n      __privateGet(this, _writer).writeBox(mfraBox);\n      let mfraBoxSize = __privateGet(this, _writer).pos - startPos;\n      __privateGet(this, _writer).seek(__privateGet(this, _writer).pos - 4);\n      __privateGet(this, _writer).writeU32(mfraBoxSize);\n    } else {\n      let mdatPos = __privateGet(this, _writer).offsets.get(__privateGet(this, _mdat));\n      let mdatSize = __privateGet(this, _writer).pos - mdatPos;\n      __privateGet(this, _mdat).size = mdatSize;\n      __privateGet(this, _mdat).largeSize = mdatSize >= 2 ** 32;\n      __privateGet(this, _writer).patchBox(__privateGet(this, _mdat));\n      let movieBox = moov(tracks, __privateGet(this, _creationTime));\n      if (typeof __privateGet(this, _options).fastStart === \"object\") {\n        __privateGet(this, _writer).seek(__privateGet(this, _ftypSize));\n        __privateGet(this, _writer).writeBox(movieBox);\n        let remainingBytes = mdatPos - __privateGet(this, _writer).pos;\n        __privateGet(this, _writer).writeBox(free(remainingBytes));\n      } else {\n        __privateGet(this, _writer).writeBox(movieBox);\n      }\n    }\n    __privateMethod(this, _maybeFlushStreamingTargetWriter, maybeFlushStreamingTargetWriter_fn).call(this);\n    __privateGet(this, _writer).finalize();\n    __privateSet(this, _finalized, true);\n  }\n};\n_options = new WeakMap();\n_writer = new WeakMap();\n_ftypSize = new WeakMap();\n_mdat = new WeakMap();\n_videoTrack = new WeakMap();\n_audioTrack = new WeakMap();\n_creationTime = new WeakMap();\n_finalizedChunks = new WeakMap();\n_nextFragmentNumber = new WeakMap();\n_videoSampleQueue = new WeakMap();\n_audioSampleQueue = new WeakMap();\n_finalized = new WeakMap();\n_validateOptions = new WeakSet();\nvalidateOptions_fn = function(options) {\n  if (typeof options !== \"object\") {\n    throw new TypeError(\"The muxer requires an options object to be passed to its constructor.\");\n  }\n  if (!(options.target instanceof Target)) {\n    throw new TypeError(\"The target must be provided and an instance of Target.\");\n  }\n  if (options.video) {\n    if (!SUPPORTED_VIDEO_CODECS.includes(options.video.codec)) {\n      throw new TypeError(`Unsupported video codec: ${options.video.codec}`);\n    }\n    if (!Number.isInteger(options.video.width) || options.video.width <= 0) {\n      throw new TypeError(`Invalid video width: ${options.video.width}. Must be a positive integer.`);\n    }\n    if (!Number.isInteger(options.video.height) || options.video.height <= 0) {\n      throw new TypeError(`Invalid video height: ${options.video.height}. Must be a positive integer.`);\n    }\n    const videoRotation = options.video.rotation;\n    if (typeof videoRotation === \"number\" && ![0, 90, 180, 270].includes(videoRotation)) {\n      throw new TypeError(`Invalid video rotation: ${videoRotation}. Has to be 0, 90, 180 or 270.`);\n    } else if (Array.isArray(videoRotation) && (videoRotation.length !== 9 || videoRotation.some((value) => typeof value !== \"number\"))) {\n      throw new TypeError(`Invalid video transformation matrix: ${videoRotation.join()}`);\n    }\n    if (options.video.frameRate !== void 0 && (!Number.isInteger(options.video.frameRate) || options.video.frameRate <= 0)) {\n      throw new TypeError(\n        `Invalid video frame rate: ${options.video.frameRate}. Must be a positive integer.`\n      );\n    }\n  }\n  if (options.audio) {\n    if (!SUPPORTED_AUDIO_CODECS.includes(options.audio.codec)) {\n      throw new TypeError(`Unsupported audio codec: ${options.audio.codec}`);\n    }\n    if (!Number.isInteger(options.audio.numberOfChannels) || options.audio.numberOfChannels <= 0) {\n      throw new TypeError(\n        `Invalid number of audio channels: ${options.audio.numberOfChannels}. Must be a positive integer.`\n      );\n    }\n    if (!Number.isInteger(options.audio.sampleRate) || options.audio.sampleRate <= 0) {\n      throw new TypeError(\n        `Invalid audio sample rate: ${options.audio.sampleRate}. Must be a positive integer.`\n      );\n    }\n  }\n  if (options.firstTimestampBehavior && !FIRST_TIMESTAMP_BEHAVIORS.includes(options.firstTimestampBehavior)) {\n    throw new TypeError(`Invalid first timestamp behavior: ${options.firstTimestampBehavior}`);\n  }\n  if (typeof options.fastStart === \"object\") {\n    if (options.video) {\n      if (options.fastStart.expectedVideoChunks === void 0) {\n        throw new TypeError(`'fastStart' is an object but is missing property 'expectedVideoChunks'.`);\n      } else if (!Number.isInteger(options.fastStart.expectedVideoChunks) || options.fastStart.expectedVideoChunks < 0) {\n        throw new TypeError(`'expectedVideoChunks' must be a non-negative integer.`);\n      }\n    }\n    if (options.audio) {\n      if (options.fastStart.expectedAudioChunks === void 0) {\n        throw new TypeError(`'fastStart' is an object but is missing property 'expectedAudioChunks'.`);\n      } else if (!Number.isInteger(options.fastStart.expectedAudioChunks) || options.fastStart.expectedAudioChunks < 0) {\n        throw new TypeError(`'expectedAudioChunks' must be a non-negative integer.`);\n      }\n    }\n  } else if (![false, \"in-memory\", \"fragmented\"].includes(options.fastStart)) {\n    throw new TypeError(`'fastStart' option must be false, 'in-memory', 'fragmented' or an object.`);\n  }\n  if (options.minFragmentDuration !== void 0 && (!Number.isFinite(options.minFragmentDuration) || options.minFragmentDuration < 0)) {\n    throw new TypeError(`'minFragmentDuration' must be a non-negative number.`);\n  }\n};\n_writeHeader = new WeakSet();\nwriteHeader_fn = function() {\n  __privateGet(this, _writer).writeBox(ftyp({\n    holdsAvc: __privateGet(this, _options).video?.codec === \"avc\",\n    fragmented: __privateGet(this, _options).fastStart === \"fragmented\"\n  }));\n  __privateSet(this, _ftypSize, __privateGet(this, _writer).pos);\n  if (__privateGet(this, _options).fastStart === \"in-memory\") {\n    __privateSet(this, _mdat, mdat(false));\n  } else if (__privateGet(this, _options).fastStart === \"fragmented\") {\n  } else {\n    if (typeof __privateGet(this, _options).fastStart === \"object\") {\n      let moovSizeUpperBound = __privateMethod(this, _computeMoovSizeUpperBound, computeMoovSizeUpperBound_fn).call(this);\n      __privateGet(this, _writer).seek(__privateGet(this, _writer).pos + moovSizeUpperBound);\n    }\n    __privateSet(this, _mdat, mdat(true));\n    __privateGet(this, _writer).writeBox(__privateGet(this, _mdat));\n  }\n  __privateMethod(this, _maybeFlushStreamingTargetWriter, maybeFlushStreamingTargetWriter_fn).call(this);\n};\n_computeMoovSizeUpperBound = new WeakSet();\ncomputeMoovSizeUpperBound_fn = function() {\n  if (typeof __privateGet(this, _options).fastStart !== \"object\")\n    return;\n  let upperBound = 0;\n  let sampleCounts = [\n    __privateGet(this, _options).fastStart.expectedVideoChunks,\n    __privateGet(this, _options).fastStart.expectedAudioChunks\n  ];\n  for (let n of sampleCounts) {\n    if (!n)\n      continue;\n    upperBound += (4 + 4) * Math.ceil(2 / 3 * n);\n    upperBound += 4 * n;\n    upperBound += (4 + 4 + 4) * Math.ceil(2 / 3 * n);\n    upperBound += 4 * n;\n    upperBound += 8 * n;\n  }\n  upperBound += 4096;\n  return upperBound;\n};\n_prepareTracks = new WeakSet();\nprepareTracks_fn = function() {\n  if (__privateGet(this, _options).video) {\n    __privateSet(this, _videoTrack, {\n      id: 1,\n      info: {\n        type: \"video\",\n        codec: __privateGet(this, _options).video.codec,\n        width: __privateGet(this, _options).video.width,\n        height: __privateGet(this, _options).video.height,\n        rotation: __privateGet(this, _options).video.rotation ?? 0,\n        decoderConfig: null\n      },\n      // The fallback contains many common frame rates as factors\n      timescale: __privateGet(this, _options).video.frameRate ?? 57600,\n      samples: [],\n      finalizedChunks: [],\n      currentChunk: null,\n      firstDecodeTimestamp: void 0,\n      lastDecodeTimestamp: -1,\n      timeToSampleTable: [],\n      compositionTimeOffsetTable: [],\n      lastTimescaleUnits: null,\n      lastSample: null,\n      compactlyCodedChunkTable: []\n    });\n  }\n  if (__privateGet(this, _options).audio) {\n    __privateSet(this, _audioTrack, {\n      id: __privateGet(this, _options).video ? 2 : 1,\n      info: {\n        type: \"audio\",\n        codec: __privateGet(this, _options).audio.codec,\n        numberOfChannels: __privateGet(this, _options).audio.numberOfChannels,\n        sampleRate: __privateGet(this, _options).audio.sampleRate,\n        decoderConfig: null\n      },\n      timescale: __privateGet(this, _options).audio.sampleRate,\n      samples: [],\n      finalizedChunks: [],\n      currentChunk: null,\n      firstDecodeTimestamp: void 0,\n      lastDecodeTimestamp: -1,\n      timeToSampleTable: [],\n      compositionTimeOffsetTable: [],\n      lastTimescaleUnits: null,\n      lastSample: null,\n      compactlyCodedChunkTable: []\n    });\n    if (__privateGet(this, _options).audio.codec === \"aac\") {\n      let guessedCodecPrivate = __privateMethod(this, _generateMpeg4AudioSpecificConfig, generateMpeg4AudioSpecificConfig_fn).call(\n        this,\n        2,\n        // Object type for AAC-LC, since it's the most common\n        __privateGet(this, _options).audio.sampleRate,\n        __privateGet(this, _options).audio.numberOfChannels\n      );\n      __privateGet(this, _audioTrack).info.decoderConfig = {\n        codec: __privateGet(this, _options).audio.codec,\n        description: guessedCodecPrivate,\n        numberOfChannels: __privateGet(this, _options).audio.numberOfChannels,\n        sampleRate: __privateGet(this, _options).audio.sampleRate\n      };\n    }\n  }\n};\n_generateMpeg4AudioSpecificConfig = new WeakSet();\ngenerateMpeg4AudioSpecificConfig_fn = function(objectType, sampleRate, numberOfChannels) {\n  let frequencyIndices = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];\n  let frequencyIndex = frequencyIndices.indexOf(sampleRate);\n  let channelConfig = numberOfChannels;\n  let configBits = \"\";\n  configBits += objectType.toString(2).padStart(5, \"0\");\n  configBits += frequencyIndex.toString(2).padStart(4, \"0\");\n  if (frequencyIndex === 15)\n    configBits += sampleRate.toString(2).padStart(24, \"0\");\n  configBits += channelConfig.toString(2).padStart(4, \"0\");\n  let paddingLength = Math.ceil(configBits.length / 8) * 8;\n  configBits = configBits.padEnd(paddingLength, \"0\");\n  let configBytes = new Uint8Array(configBits.length / 8);\n  for (let i = 0; i < configBits.length; i += 8) {\n    configBytes[i / 8] = parseInt(configBits.slice(i, i + 8), 2);\n  }\n  return configBytes;\n};\n_createSampleForTrack = new WeakSet();\ncreateSampleForTrack_fn = function(track, data, type, timestamp, duration, meta, compositionTimeOffset) {\n  let presentationTimestampInSeconds = timestamp / 1e6;\n  let decodeTimestampInSeconds = (timestamp - (compositionTimeOffset ?? 0)) / 1e6;\n  let durationInSeconds = duration / 1e6;\n  let adjusted = __privateMethod(this, _validateTimestamp, validateTimestamp_fn).call(this, presentationTimestampInSeconds, decodeTimestampInSeconds, track);\n  presentationTimestampInSeconds = adjusted.presentationTimestamp;\n  decodeTimestampInSeconds = adjusted.decodeTimestamp;\n  if (meta?.decoderConfig) {\n    if (track.info.decoderConfig === null) {\n      track.info.decoderConfig = meta.decoderConfig;\n    } else {\n      Object.assign(track.info.decoderConfig, meta.decoderConfig);\n    }\n  }\n  let sample = {\n    presentationTimestamp: presentationTimestampInSeconds,\n    decodeTimestamp: decodeTimestampInSeconds,\n    duration: durationInSeconds,\n    data,\n    size: data.byteLength,\n    type,\n    // Will be refined once the next sample comes in\n    timescaleUnitsToNextSample: intoTimescale(durationInSeconds, track.timescale)\n  };\n  return sample;\n};\n_addSampleToTrack = new WeakSet();\naddSampleToTrack_fn = function(track, sample) {\n  if (__privateGet(this, _options).fastStart !== \"fragmented\") {\n    track.samples.push(sample);\n  }\n  const sampleCompositionTimeOffset = intoTimescale(sample.presentationTimestamp - sample.decodeTimestamp, track.timescale);\n  if (track.lastTimescaleUnits !== null) {\n    let timescaleUnits = intoTimescale(sample.decodeTimestamp, track.timescale, false);\n    let delta = Math.round(timescaleUnits - track.lastTimescaleUnits);\n    track.lastTimescaleUnits += delta;\n    track.lastSample.timescaleUnitsToNextSample = delta;\n    if (__privateGet(this, _options).fastStart !== \"fragmented\") {\n      let lastTableEntry = last(track.timeToSampleTable);\n      if (lastTableEntry.sampleCount === 1) {\n        lastTableEntry.sampleDelta = delta;\n        lastTableEntry.sampleCount++;\n      } else if (lastTableEntry.sampleDelta === delta) {\n        lastTableEntry.sampleCount++;\n      } else {\n        lastTableEntry.sampleCount--;\n        track.timeToSampleTable.push({\n          sampleCount: 2,\n          sampleDelta: delta\n        });\n      }\n      const lastCompositionTimeOffsetTableEntry = last(track.compositionTimeOffsetTable);\n      if (lastCompositionTimeOffsetTableEntry.sampleCompositionTimeOffset === sampleCompositionTimeOffset) {\n        lastCompositionTimeOffsetTableEntry.sampleCount++;\n      } else {\n        track.compositionTimeOffsetTable.push({\n          sampleCount: 1,\n          sampleCompositionTimeOffset\n        });\n      }\n    }\n  } else {\n    track.lastTimescaleUnits = 0;\n    if (__privateGet(this, _options).fastStart !== \"fragmented\") {\n      track.timeToSampleTable.push({\n        sampleCount: 1,\n        sampleDelta: intoTimescale(sample.duration, track.timescale)\n      });\n      track.compositionTimeOffsetTable.push({\n        sampleCount: 1,\n        sampleCompositionTimeOffset\n      });\n    }\n  }\n  track.lastSample = sample;\n  let beginNewChunk = false;\n  if (!track.currentChunk) {\n    beginNewChunk = true;\n  } else {\n    let currentChunkDuration = sample.presentationTimestamp - track.currentChunk.startTimestamp;\n    if (__privateGet(this, _options).fastStart === \"fragmented\") {\n      let mostImportantTrack = __privateGet(this, _videoTrack) ?? __privateGet(this, _audioTrack);\n      const chunkDuration = __privateGet(this, _options).minFragmentDuration ?? 1;\n      if (track === mostImportantTrack && sample.type === \"key\" && currentChunkDuration >= chunkDuration) {\n        beginNewChunk = true;\n        __privateMethod(this, _finalizeFragment, finalizeFragment_fn).call(this);\n      }\n    } else {\n      beginNewChunk = currentChunkDuration >= 0.5;\n    }\n  }\n  if (beginNewChunk) {\n    if (track.currentChunk) {\n      __privateMethod(this, _finalizeCurrentChunk, finalizeCurrentChunk_fn).call(this, track);\n    }\n    track.currentChunk = {\n      startTimestamp: sample.presentationTimestamp,\n      samples: []\n    };\n  }\n  track.currentChunk.samples.push(sample);\n};\n_validateTimestamp = new WeakSet();\nvalidateTimestamp_fn = function(presentationTimestamp, decodeTimestamp, track) {\n  const strictTimestampBehavior = __privateGet(this, _options).firstTimestampBehavior === \"strict\";\n  const noLastDecodeTimestamp = track.lastDecodeTimestamp === -1;\n  const timestampNonZero = decodeTimestamp !== 0;\n  if (strictTimestampBehavior && noLastDecodeTimestamp && timestampNonZero) {\n    throw new Error(\n      `The first chunk for your media track must have a timestamp of 0 (received DTS=${decodeTimestamp}).Non-zero first timestamps are often caused by directly piping frames or audio data from a MediaStreamTrack into the encoder. Their timestamps are typically relative to the age of thedocument, which is probably what you want.\n\nIf you want to offset all timestamps of a track such that the first one is zero, set firstTimestampBehavior: 'offset' in the options.\n`\n    );\n  } else if (__privateGet(this, _options).firstTimestampBehavior === \"offset\" || __privateGet(this, _options).firstTimestampBehavior === \"cross-track-offset\") {\n    if (track.firstDecodeTimestamp === void 0) {\n      track.firstDecodeTimestamp = decodeTimestamp;\n    }\n    let baseDecodeTimestamp;\n    if (__privateGet(this, _options).firstTimestampBehavior === \"offset\") {\n      baseDecodeTimestamp = track.firstDecodeTimestamp;\n    } else {\n      baseDecodeTimestamp = Math.min(\n        __privateGet(this, _videoTrack)?.firstDecodeTimestamp ?? Infinity,\n        __privateGet(this, _audioTrack)?.firstDecodeTimestamp ?? Infinity\n      );\n    }\n    decodeTimestamp -= baseDecodeTimestamp;\n    presentationTimestamp -= baseDecodeTimestamp;\n  }\n  if (decodeTimestamp < track.lastDecodeTimestamp) {\n    throw new Error(\n      `Timestamps must be monotonically increasing (DTS went from ${track.lastDecodeTimestamp * 1e6} to ${decodeTimestamp * 1e6}).`\n    );\n  }\n  track.lastDecodeTimestamp = decodeTimestamp;\n  return { presentationTimestamp, decodeTimestamp };\n};\n_finalizeCurrentChunk = new WeakSet();\nfinalizeCurrentChunk_fn = function(track) {\n  if (__privateGet(this, _options).fastStart === \"fragmented\") {\n    throw new Error(\"Can't finalize individual chunks if 'fastStart' is set to 'fragmented'.\");\n  }\n  if (!track.currentChunk)\n    return;\n  track.finalizedChunks.push(track.currentChunk);\n  __privateGet(this, _finalizedChunks).push(track.currentChunk);\n  if (track.compactlyCodedChunkTable.length === 0 || last(track.compactlyCodedChunkTable).samplesPerChunk !== track.currentChunk.samples.length) {\n    track.compactlyCodedChunkTable.push({\n      firstChunk: track.finalizedChunks.length,\n      // 1-indexed\n      samplesPerChunk: track.currentChunk.samples.length\n    });\n  }\n  if (__privateGet(this, _options).fastStart === \"in-memory\") {\n    track.currentChunk.offset = 0;\n    return;\n  }\n  track.currentChunk.offset = __privateGet(this, _writer).pos;\n  for (let sample of track.currentChunk.samples) {\n    __privateGet(this, _writer).write(sample.data);\n    sample.data = null;\n  }\n  __privateMethod(this, _maybeFlushStreamingTargetWriter, maybeFlushStreamingTargetWriter_fn).call(this);\n};\n_finalizeFragment = new WeakSet();\nfinalizeFragment_fn = function(flushStreamingWriter = true) {\n  if (__privateGet(this, _options).fastStart !== \"fragmented\") {\n    throw new Error(\"Can't finalize a fragment unless 'fastStart' is set to 'fragmented'.\");\n  }\n  let tracks = [__privateGet(this, _videoTrack), __privateGet(this, _audioTrack)].filter((track) => track && track.currentChunk);\n  if (tracks.length === 0)\n    return;\n  let fragmentNumber = __privateWrapper(this, _nextFragmentNumber)._++;\n  if (fragmentNumber === 1) {\n    let movieBox = moov(tracks, __privateGet(this, _creationTime), true);\n    __privateGet(this, _writer).writeBox(movieBox);\n  }\n  let moofOffset = __privateGet(this, _writer).pos;\n  let moofBox = moof(fragmentNumber, tracks);\n  __privateGet(this, _writer).writeBox(moofBox);\n  {\n    let mdatBox = mdat(false);\n    let totalTrackSampleSize = 0;\n    for (let track of tracks) {\n      for (let sample of track.currentChunk.samples) {\n        totalTrackSampleSize += sample.size;\n      }\n    }\n    let mdatSize = __privateGet(this, _writer).measureBox(mdatBox) + totalTrackSampleSize;\n    if (mdatSize >= 2 ** 32) {\n      mdatBox.largeSize = true;\n      mdatSize = __privateGet(this, _writer).measureBox(mdatBox) + totalTrackSampleSize;\n    }\n    mdatBox.size = mdatSize;\n    __privateGet(this, _writer).writeBox(mdatBox);\n  }\n  for (let track of tracks) {\n    track.currentChunk.offset = __privateGet(this, _writer).pos;\n    track.currentChunk.moofOffset = moofOffset;\n    for (let sample of track.currentChunk.samples) {\n      __privateGet(this, _writer).write(sample.data);\n      sample.data = null;\n    }\n  }\n  let endPos = __privateGet(this, _writer).pos;\n  __privateGet(this, _writer).seek(__privateGet(this, _writer).offsets.get(moofBox));\n  let newMoofBox = moof(fragmentNumber, tracks);\n  __privateGet(this, _writer).writeBox(newMoofBox);\n  __privateGet(this, _writer).seek(endPos);\n  for (let track of tracks) {\n    track.finalizedChunks.push(track.currentChunk);\n    __privateGet(this, _finalizedChunks).push(track.currentChunk);\n    track.currentChunk = null;\n  }\n  if (flushStreamingWriter) {\n    __privateMethod(this, _maybeFlushStreamingTargetWriter, maybeFlushStreamingTargetWriter_fn).call(this);\n  }\n};\n_maybeFlushStreamingTargetWriter = new WeakSet();\nmaybeFlushStreamingTargetWriter_fn = function() {\n  if (__privateGet(this, _writer) instanceof StreamTargetWriter) {\n    __privateGet(this, _writer).flush();\n  }\n};\n_ensureNotFinalized = new WeakSet();\nensureNotFinalized_fn = function() {\n  if (__privateGet(this, _finalized)) {\n    throw new Error(\"Cannot add new video or audio chunks after the file has been finalized.\");\n  }\n};\nexport {\n  ArrayBufferTarget,\n  FileSystemWritableFileStreamTarget,\n  Muxer,\n  StreamTarget\n};\n","/* global Blob, VideoEncoder, VideoFrame */\nimport { Muxer, ArrayBufferTarget } from 'mp4-muxer';\nimport type { State } from 'vibegame';\nimport type { RecordingConfig } from './types';\n\nexport async function encodeSequence(\n  canvas: HTMLCanvasElement,\n  state: State,\n  config: RecordingConfig,\n  onProgress?: (frame: number, total: number) => void\n): Promise<Blob> {\n  const totalFrames = Math.ceil(config.durationSeconds * config.fps);\n\n  const muxer = new Muxer({\n    target: new ArrayBufferTarget(),\n    video: { codec: 'avc', width: config.width, height: config.height },\n    fastStart: 'in-memory',\n  });\n\n  const encoder = new VideoEncoder({\n    output: (chunk, meta) => muxer.addVideoChunk(chunk, meta),\n    error: (e) => console.error('Encoder error:', e),\n  });\n\n  encoder.configure({\n    codec: 'avc1.640032',\n    width: config.width,\n    height: config.height,\n    bitrate: config.bitrate,\n    framerate: config.fps,\n  });\n\n  const stepTime = 1 / config.fps;\n\n  for (let i = 0; i < totalFrames; i++) {\n    state.step(stepTime);\n\n    const videoFrame = new VideoFrame(canvas, {\n      timestamp: (i * 1_000_000) / config.fps,\n    });\n    encoder.encode(videoFrame);\n    videoFrame.close();\n\n    if (i % 30 === 0) {\n      onProgress?.(i, totalFrames);\n      await new Promise((r) => setTimeout(r, 0));\n    }\n  }\n\n  await encoder.flush();\n  muxer.finalize();\n\n  return new Blob([muxer.target.buffer], { type: 'video/mp4' });\n}\n\nexport function downloadBlob(blob: Blob, filename: string): void {\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = filename;\n  a.click();\n  URL.revokeObjectURL(url);\n}\n","import type { State } from 'vibegame';\nimport { StepController } from '../sequence/components';\n\nexport type SequenceMap = Record<string, string>;\n\ninterface StepControllerHandle {\n  eid: number;\n  get step(): number;\n  set step(v: number);\n  get target(): number;\n  set target(v: number);\n  get max(): number;\n}\n\nexport function getStepController(\n  state: State,\n  controllerName = 'controller'\n): StepControllerHandle | null {\n  const eid = state.getEntityByName(controllerName);\n  if (eid === null) return null;\n\n  return {\n    eid,\n    get step() {\n      return StepController.step[eid];\n    },\n    set step(v: number) {\n      StepController.step[eid] = v;\n    },\n    get target() {\n      return StepController.target[eid];\n    },\n    set target(v: number) {\n      StepController.target[eid] = v;\n    },\n    get max() {\n      return StepController.max[eid];\n    },\n  };\n}\n\nlet recordingUI: HTMLElement | null = null;\n\nexport function updateStatus(msg: string): void {\n  const status = document.getElementById('recording-status');\n  if (status) status.textContent = msg;\n}\n\nexport function createUI(\n  controller: StepControllerHandle,\n  onPrev: () => void,\n  onNext: () => void,\n  onRecord: () => Promise<void>,\n  isRecording: () => boolean\n): void {\n  if (recordingUI) return;\n\n  recordingUI = document.createElement('div');\n  recordingUI.id = 'recording-ui';\n  recordingUI.innerHTML = `\n    <style>\n      #recording-ui {\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        background: rgba(0,0,0,0.9);\n        padding: 15px;\n        border-radius: 8px;\n        font-family: monospace;\n        font-size: 14px;\n        color: #fff;\n        z-index: 9999;\n        min-width: 250px;\n      }\n      #recording-ui .step-display { margin-bottom: 10px; font-size: 16px; }\n      #recording-ui button {\n        padding: 8px 12px;\n        margin: 4px;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n        background: #444;\n        color: #fff;\n      }\n      #recording-ui button:hover { background: #666; }\n      #recording-ui button:disabled { opacity: 0.5; cursor: not-allowed; }\n      #recording-ui button.record { background: #c33; }\n      #recording-ui button.record:hover { background: #e55; }\n      #recording-ui #recording-status { margin-top: 10px; color: #aaa; font-size: 12px; }\n      body.recording-mode #recording-ui { display: none; }\n      body.recording-mode .blog-container { display: none; }\n      body.recording-mode { margin: 0; padding: 0; overflow: hidden; background: #000; }\n      body.recording-mode canvas.recording-target {\n        display: block !important;\n        position: fixed;\n        top: 0;\n        left: 0;\n      }\n    </style>\n    <div class=\"step-display\">Step: <span id=\"current-step\">0</span> / <span id=\"max-step\">0</span></div>\n    <div>\n      <button id=\"rec-prev\"> Prev</button>\n      <button id=\"rec-next\">Next </button>\n    </div>\n    <div>\n      <button id=\"rec-record-next\" class=\"record\"> Record Next (R)</button>\n    </div>\n    <div id=\"recording-status\">Ready</div>\n  `;\n\n  document.body.appendChild(recordingUI);\n\n  const updateDisplay = () => {\n    const currentEl = document.getElementById('current-step');\n    const maxEl = document.getElementById('max-step');\n    const prevBtn = document.getElementById('rec-prev') as HTMLButtonElement;\n    const nextBtn = document.getElementById('rec-next') as HTMLButtonElement;\n    const recordBtn = document.getElementById('rec-record-next') as HTMLButtonElement;\n\n    if (currentEl) currentEl.textContent = String(controller.target);\n    if (maxEl) maxEl.textContent = String(controller.max);\n    if (prevBtn) prevBtn.disabled = controller.target <= 0;\n    if (nextBtn) nextBtn.disabled = controller.target >= controller.max;\n    if (recordBtn) recordBtn.disabled = controller.target >= controller.max || isRecording();\n  };\n\n  document.getElementById('rec-prev')?.addEventListener('click', () => {\n    onPrev();\n    updateDisplay();\n  });\n\n  document.getElementById('rec-next')?.addEventListener('click', () => {\n    onNext();\n    updateDisplay();\n  });\n\n  document.getElementById('rec-record-next')?.addEventListener('click', async () => {\n    await onRecord();\n    updateDisplay();\n  });\n\n  document.addEventListener('keydown', (e) => {\n    if (e.key.toLowerCase() === 'r' && !isRecording()) {\n      onRecord().then(updateDisplay);\n    }\n    if (e.key === 'ArrowLeft' && controller.target > 0 && !isRecording()) {\n      onPrev();\n      updateDisplay();\n    }\n    if (e.key === 'ArrowRight' && controller.target < controller.max && !isRecording()) {\n      onNext();\n      updateDisplay();\n    }\n  });\n\n  setInterval(updateDisplay, 100);\n  updateDisplay();\n}\n","import type { State } from 'vibegame';\nimport type { RecordingConfig } from './types';\nimport { DEFAULT_CONFIG } from './types';\nimport { encodeSequence, downloadBlob } from './encoder';\nimport { getStepController, createUI, updateStatus, type SequenceMap } from './ui';\n\nlet isRecording = false;\n\nfunction getSequenceInfo(fromStep: number, toStep: number, sequenceMap: SequenceMap) {\n  const key = `${fromStep}-${toStep}`;\n  const seqName = sequenceMap[key];\n  if (!seqName) return null;\n  return { name: seqName, fromStep, toStep };\n}\n\nasync function recordSequence(\n  canvas: HTMLCanvasElement,\n  state: State,\n  fromStep: number,\n  toStep: number,\n  sequenceMap: SequenceMap,\n  config: RecordingConfig\n): Promise<void> {\n  if (isRecording) return;\n  isRecording = true;\n\n  const sequence = getSequenceInfo(fromStep, toStep, sequenceMap);\n  if (!sequence) {\n    console.error(`No sequence found for ${fromStep}-${toStep}`);\n    isRecording = false;\n    return;\n  }\n\n  const controller = getStepController(state);\n  if (!controller) {\n    console.error('No step controller found');\n    isRecording = false;\n    return;\n  }\n\n  const origWidth = canvas.width;\n  const origHeight = canvas.height;\n  const origStyle = canvas.style.cssText;\n\n  document.body.classList.add('recording-mode');\n  canvas.classList.add('recording-target');\n  canvas.width = config.width;\n  canvas.height = config.height;\n  canvas.style.cssText = `width:${config.width}px;height:${config.height}px;display:block`;\n  window.dispatchEvent(new Event('resize'));\n\n  await new Promise((r) => requestAnimationFrame(r));\n\n  updateStatus(`Recording ${sequence.name}...`);\n\n  controller.target = toStep;\n\n  const startTime = performance.now();\n\n  const blob = await encodeSequence(canvas, state, config, (frame, total) => {\n    updateStatus(`Recording ${sequence.name}: ${frame}/${total}`);\n  });\n\n  const elapsed = performance.now() - startTime;\n  const speed = (config.durationSeconds * 1000) / elapsed;\n\n  document.body.classList.remove('recording-mode');\n  canvas.classList.remove('recording-target');\n  canvas.width = origWidth;\n  canvas.height = origHeight;\n  canvas.style.cssText = origStyle;\n  window.dispatchEvent(new Event('resize'));\n\n  downloadBlob(blob, `step-${fromStep}-${toStep}.mp4`);\n\n  updateStatus(`Done! ${(blob.size / 1024 / 1024).toFixed(1)} MB, ${speed.toFixed(1)}x realtime`);\n  isRecording = false;\n}\n\nexport function setupRecording(\n  canvasSelector: string,\n  sequenceMap: SequenceMap,\n  config: Partial<RecordingConfig> = {}\n): void {\n  const fullConfig = { ...DEFAULT_CONFIG, ...config };\n\n  const checkReady = setInterval(() => {\n    const canvas = document.querySelector(canvasSelector) as HTMLCanvasElement;\n    if (canvas?.__state__) {\n      clearInterval(checkReady);\n\n      const state = canvas.__state__;\n      const controller = getStepController(state);\n      if (!controller) return;\n\n      createUI(\n        controller,\n        () => {\n          if (controller.target > 0) controller.target = controller.target - 1;\n        },\n        () => {\n          if (controller.target < controller.max) controller.target = controller.target + 1;\n        },\n        () => {\n          if (isRecording || controller.target >= controller.max) return Promise.resolve();\n          const from = controller.target;\n          const to = from + 1;\n          return recordSequence(canvas, state, from, to, sequenceMap, fullConfig);\n        },\n        () => isRecording\n      );\n    }\n  }, 100);\n}\n","import * as GAME from 'vibegame';\n\nexport const TokenDriver = GAME.defineComponent({\n  separationT: GAME.Types.f32,\n  baseGap: GAME.Types.f32,\n  gap: GAME.Types.f32,\n  baseY: GAME.Types.f32,\n  separatedY: GAME.Types.f32,\n  fontSize: GAME.Types.f32,\n  color: GAME.Types.ui32,\n  initialized: GAME.Types.ui8,\n  measuredCount: GAME.Types.ui8,\n  tokenCount: GAME.Types.ui8,\n  layoutReady: GAME.Types.ui8,\n});\n\nexport const Token = GAME.defineComponent({\n  driver: GAME.Types.eid,\n  index: GAME.Types.ui8,\n  baseX: GAME.Types.f32,\n  separatedX: GAME.Types.f32,\n  width: GAME.Types.f32,\n  layoutScale: GAME.Types.f32,\n  skipArrow: GAME.Types.ui8,\n  skipVector: GAME.Types.ui8,\n});\n\nexport const TokenBoxConfig = GAME.defineComponent({\n  color: GAME.Types.ui32,\n  padding: GAME.Types.f32,\n  underlineOnly: GAME.Types.ui8,\n  offsetT: GAME.Types.f32,\n});\n\nexport const TokenBox = GAME.defineComponent({\n  showTop: GAME.Types.ui8,\n  showRight: GAME.Types.ui8,\n  showBottom: GAME.Types.ui8,\n  showLeft: GAME.Types.ui8,\n  color: GAME.Types.ui32,\n  padding: GAME.Types.f32,\n  initialized: GAME.Types.ui8,\n  lineTop: GAME.Types.eid,\n  lineRight: GAME.Types.eid,\n  lineBottom: GAME.Types.eid,\n  lineLeft: GAME.Types.eid,\n});\n\nexport const tokenDriverQuery = GAME.defineQuery([TokenDriver]);\nexport const tokenQuery = GAME.defineQuery([Token]);\nexport const tokenBoxConfigQuery = GAME.defineQuery([TokenBoxConfig]);\nexport const tokenBoxQuery = GAME.defineQuery([TokenBox]);\n","import type * as GAME from 'vibegame';\n\nconst textStores = new WeakMap<GAME.State, Map<number, string>>();\nconst pendingMeasurements = new WeakMap<GAME.State, Set<number>>();\n\nfunction getTextStore(state: GAME.State): Map<number, string> {\n  let store = textStores.get(state);\n  if (!store) {\n    store = new Map();\n    textStores.set(state, store);\n  }\n  return store;\n}\n\nfunction getPendingSet(state: GAME.State): Set<number> {\n  let pending = pendingMeasurements.get(state);\n  if (!pending) {\n    pending = new Set();\n    pendingMeasurements.set(state, pending);\n  }\n  return pending;\n}\n\nexport function setTokenDriverText(state: GAME.State, entity: number, text: string): void {\n  getTextStore(state).set(entity, text);\n}\n\nexport function getTokenDriverText(state: GAME.State, entity: number): string {\n  return getTextStore(state).get(entity) || '';\n}\n\nexport function addPendingMeasurement(state: GAME.State, entity: number): void {\n  getPendingSet(state).add(entity);\n}\n\nexport function removePendingMeasurement(state: GAME.State, entity: number): void {\n  getPendingSet(state).delete(entity);\n}\n\nexport function getPendingMeasurements(state: GAME.State): Set<number> {\n  return getPendingSet(state);\n}\n","import * as GAME from 'vibegame';\nimport { Transform, Parent } from 'vibegame/transforms';\nimport { Word, setTextContent } from 'vibegame/text';\nimport { TokenDriver, Token, tokenDriverQuery } from '../components';\nimport { getTokenDriverText, addPendingMeasurement } from '../text-storage';\n\nexport const TokenSetupSystem: GAME.System = {\n  group: 'simulation',\n  setup(state) {\n    for (const driverEid of tokenDriverQuery(state.world)) {\n      if (TokenDriver.initialized[driverEid]) continue;\n\n      const text = getTokenDriverText(state, driverEid);\n      if (!text) continue;\n\n      const words = text.split(' ').filter((w) => w.length > 0);\n      if (words.length === 0) continue;\n\n      TokenDriver.tokenCount[driverEid] = words.length;\n      TokenDriver.initialized[driverEid] = 1;\n\n      const fontSize = TokenDriver.fontSize[driverEid];\n      const color = TokenDriver.color[driverEid];\n\n      for (let i = 0; i < words.length; i++) {\n        const tokenEid = state.createEntity();\n\n        state.addComponent(tokenEid, Transform, {\n          posX: 0,\n          posY: 0,\n          posZ: 0,\n          rotW: 1,\n          scaleX: 1,\n          scaleY: 1,\n          scaleZ: 1,\n        });\n        state.addComponent(tokenEid, Parent, { entity: driverEid });\n        state.addComponent(tokenEid, Word, {\n          fontSize,\n          color,\n        });\n        state.addComponent(tokenEid, Token, {\n          driver: driverEid,\n          index: i,\n          baseX: 0,\n          separatedX: 0,\n          width: 0,\n          layoutScale: 1,\n        });\n\n        setTextContent(state, tokenEid, words[i]);\n        addPendingMeasurement(state, tokenEid);\n      }\n    }\n  },\n};\n","import * as GAME from 'vibegame';\nimport { measureText, type TextBounds } from 'vibegame/text';\nimport { TokenDriver, Token } from '../components';\nimport { getPendingMeasurements, removePendingMeasurement } from '../text-storage';\n\nexport const TokenMeasureSystem: GAME.System = {\n  group: 'draw',\n  update(state) {\n    const pending = getPendingMeasurements(state);\n    for (const tokenEid of pending) {\n      measureText(state, tokenEid, (bounds: TextBounds) => {\n        Token.width[tokenEid] = bounds.width;\n        const driverEid = Token.driver[tokenEid];\n        TokenDriver.measuredCount[driverEid]++;\n        removePendingMeasurement(state, tokenEid);\n      });\n    }\n  },\n};\n","import * as GAME from 'vibegame';\nimport { Transform } from 'vibegame/transforms';\nimport { TokenDriver, Token, tokenDriverQuery, tokenQuery } from '../components';\n\nexport const TokenLayoutSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const driverEid of tokenDriverQuery(state.world)) {\n      const tokenCount = TokenDriver.tokenCount[driverEid];\n      const measuredCount = TokenDriver.measuredCount[driverEid];\n\n      if (tokenCount === 0 || measuredCount < tokenCount) continue;\n\n      const tokens: number[] = [];\n      for (const tokenEid of tokenQuery(state.world)) {\n        if (Token.driver[tokenEid] === driverEid) {\n          tokens.push(tokenEid);\n        }\n      }\n      tokens.sort((a, b) => Token.index[a] - Token.index[b]);\n\n      let hasDynamicToken = false;\n      for (const eid of tokens) {\n        if (Token.layoutScale[eid] < 1) {\n          hasDynamicToken = true;\n          break;\n        }\n      }\n\n      if (!TokenDriver.layoutReady[driverEid] || hasDynamicToken) {\n        const baseGap = TokenDriver.baseGap[driverEid];\n        const gap = TokenDriver.gap[driverEid];\n\n        const widths = tokens.map((eid) => Token.width[eid] * Token.layoutScale[eid]);\n        const activeCount = widths.filter((w) => w > 0).length;\n        const totalWidth = widths.reduce((sum, w) => sum + w, 0);\n        const gaps = Math.max(0, activeCount - 1);\n        const totalBaseWidth = totalWidth + baseGap * gaps;\n        const totalSeparatedWidth = totalWidth + gap * gaps;\n\n        let baseCursor = -totalBaseWidth / 2;\n        let separatedCursor = -totalSeparatedWidth / 2;\n\n        for (let i = 0; i < tokens.length; i++) {\n          const eid = tokens[i];\n          const width = widths[i];\n\n          if (width > 0) {\n            Token.baseX[eid] = baseCursor + width / 2;\n            Token.separatedX[eid] = separatedCursor + width / 2;\n            baseCursor += width + baseGap;\n            separatedCursor += width + gap;\n          }\n        }\n\n        TokenDriver.layoutReady[driverEid] = 1;\n      }\n    }\n\n    const lerpFactor = 1 - Math.exp(-12 * state.time.deltaTime);\n\n    for (const tokenEid of tokenQuery(state.world)) {\n      const driverEid = Token.driver[tokenEid];\n      if (!TokenDriver.layoutReady[driverEid]) continue;\n\n      const layoutScale = Token.layoutScale[tokenEid];\n      if (layoutScale === 0) continue;\n\n      const t = TokenDriver.separationT[driverEid];\n      const targetX =\n        Token.baseX[tokenEid] + (Token.separatedX[tokenEid] - Token.baseX[tokenEid]) * t;\n      const targetY =\n        TokenDriver.baseY[driverEid] +\n        (TokenDriver.separatedY[driverEid] - TokenDriver.baseY[driverEid]) * t;\n      Transform.posX[tokenEid] += (targetX - Transform.posX[tokenEid]) * lerpFactor;\n      Transform.posY[tokenEid] += (targetY - Transform.posY[tokenEid]) * lerpFactor;\n    }\n  },\n};\n","import * as GAME from 'vibegame';\nimport { Transform } from 'vibegame/transforms';\nimport { Line } from 'vibegame/line';\nimport { Token, TokenDriver, TokenBox, TokenBoxConfig, tokenQuery } from '../components';\n\nfunction createLineEntity(state: GAME.State, color: number): number {\n  const eid = state.createEntity();\n  state.addComponent(eid, Transform, { posX: 0, posY: 0, posZ: 0 });\n  state.addComponent(eid, Line, {\n    offsetX: 0,\n    offsetY: 0,\n    offsetZ: 0,\n    color,\n    visible: 0,\n    thickness: 1.5,\n  });\n  return eid;\n}\n\nconst tokenBoxTokenQuery = GAME.defineQuery([TokenBox, Token, Transform]);\n\nexport const TokenBoxSetupSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const tokenEid of tokenQuery(state.world)) {\n      if (state.hasComponent(tokenEid, TokenBox)) continue;\n\n      const driverEid = Token.driver[tokenEid];\n      if (!state.hasComponent(driverEid, TokenBoxConfig)) continue;\n      if (!TokenDriver.layoutReady[driverEid]) continue;\n\n      const config = TokenBoxConfig;\n      const underlineOnly = config.underlineOnly[driverEid] === 1;\n\n      state.addComponent(tokenEid, TokenBox, {\n        showTop: underlineOnly ? 0 : 1,\n        showRight: underlineOnly ? 0 : 1,\n        showBottom: 1,\n        showLeft: underlineOnly ? 0 : 1,\n        color: config.color[driverEid],\n        padding: config.padding[driverEid],\n      });\n    }\n\n    for (const eid of tokenBoxTokenQuery(state.world)) {\n      if (TokenBox.initialized[eid]) continue;\n\n      const driverEid = Token.driver[eid];\n      if (!TokenDriver.layoutReady[driverEid]) continue;\n\n      const color = TokenBox.color[eid] || TokenDriver.color[driverEid];\n\n      const lineTop = createLineEntity(state, color);\n      const lineRight = createLineEntity(state, color);\n      const lineBottom = createLineEntity(state, color);\n      const lineLeft = createLineEntity(state, color);\n\n      TokenBox.lineTop[eid] = lineTop;\n      TokenBox.lineRight[eid] = lineRight;\n      TokenBox.lineBottom[eid] = lineBottom;\n      TokenBox.lineLeft[eid] = lineLeft;\n\n      Line.visible[lineTop] = TokenBox.showTop[eid];\n      Line.visible[lineRight] = TokenBox.showRight[eid];\n      Line.visible[lineBottom] = TokenBox.showBottom[eid];\n      Line.visible[lineLeft] = TokenBox.showLeft[eid];\n\n      TokenBox.initialized[eid] = 1;\n    }\n  },\n};\n","import * as GAME from 'vibegame';\nimport { Transform } from 'vibegame/transforms';\nimport { Line } from 'vibegame/line';\nimport { Token, TokenDriver, TokenBox, TokenBoxConfig, tokenBoxQuery } from '../components';\n\nexport const TokenBoxLayoutSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of tokenBoxQuery(state.world)) {\n      if (!TokenBox.initialized[eid]) continue;\n\n      const driverEid = Token.driver[eid];\n      const tokenX = Transform.posX[eid];\n      const tokenY = Transform.posY[eid];\n      const tokenZ = Transform.posZ[eid];\n      const width = Token.width[eid];\n      const fontSize = TokenDriver.fontSize[driverEid];\n      const padding = TokenBox.padding[eid];\n\n      const halfWidth = width / 2 + padding;\n      const halfHeight = fontSize / 2 + padding;\n\n      const left = tokenX - halfWidth;\n      const right = tokenX + halfWidth;\n      const top = tokenY + halfHeight;\n      const bottom = tokenY - halfHeight;\n      const boxWidth = right - left;\n      const boxHeight = top - bottom;\n\n      const lineTop = TokenBox.lineTop[eid];\n      const lineRight = TokenBox.lineRight[eid];\n      const lineBottom = TokenBox.lineBottom[eid];\n      const lineLeft = TokenBox.lineLeft[eid];\n\n      Line.visible[lineTop] = TokenBox.showTop[eid];\n      Line.visible[lineRight] = TokenBox.showRight[eid];\n      Line.visible[lineBottom] = TokenBox.showBottom[eid];\n      Line.visible[lineLeft] = TokenBox.showLeft[eid];\n\n      const offsetT = Math.min(1, Math.max(0, TokenBoxConfig.offsetT[driverEid]));\n\n      Transform.posX[lineTop] = left;\n      Transform.posY[lineTop] = top;\n      Transform.posZ[lineTop] = tokenZ;\n      Line.offsetX[lineTop] = boxWidth * offsetT;\n\n      Transform.posX[lineRight] = right;\n      Transform.posY[lineRight] = top;\n      Transform.posZ[lineRight] = tokenZ;\n      Line.offsetY[lineRight] = -boxHeight * offsetT;\n\n      Transform.posX[lineBottom] = left;\n      Transform.posY[lineBottom] = bottom;\n      Transform.posZ[lineBottom] = tokenZ;\n      Line.offsetX[lineBottom] = boxWidth * offsetT;\n\n      Transform.posX[lineLeft] = left;\n      Transform.posY[lineLeft] = bottom;\n      Transform.posZ[lineLeft] = tokenZ;\n      Line.offsetY[lineLeft] = boxHeight * offsetT;\n    }\n  },\n};\n","import type * as GAME from 'vibegame';\nimport { TokenDriver, Token, TokenBoxConfig, TokenBox } from './components';\nimport {\n  TokenSetupSystem,\n  TokenMeasureSystem,\n  TokenLayoutSystem,\n  TokenBoxSetupSystem,\n  TokenBoxLayoutSystem,\n} from './systems';\n\nexport const tokenDriverRecipe: GAME.Recipe = {\n  name: 'token-driver',\n  components: ['token-driver', 'transform'],\n};\n\nexport const TokenDisplayPlugin: GAME.Plugin = {\n  components: { TokenDriver, Token, TokenBoxConfig, TokenBox },\n  systems: [\n    TokenSetupSystem,\n    TokenMeasureSystem,\n    TokenLayoutSystem,\n    TokenBoxSetupSystem,\n    TokenBoxLayoutSystem,\n  ],\n  recipes: [tokenDriverRecipe],\n  config: {\n    defaults: {\n      'token-driver': {\n        separationT: 0,\n        baseGap: 0.4,\n        gap: 1.5,\n        baseY: 0,\n        separatedY: 0,\n        fontSize: 1.5,\n        color: 0xffffff,\n        initialized: 0,\n        measuredCount: 0,\n        tokenCount: 0,\n        layoutReady: 0,\n      },\n      'token-box-config': {\n        color: 0xffffff,\n        padding: 0.1,\n        underlineOnly: 0,\n        offsetT: 1,\n      },\n      'token-box': {\n        showTop: 1,\n        showRight: 1,\n        showBottom: 1,\n        showLeft: 1,\n        color: 0,\n        padding: 0.1,\n        initialized: 0,\n        lineTop: 0,\n        lineRight: 0,\n        lineBottom: 0,\n        lineLeft: 0,\n      },\n    },\n  },\n};\n","import type * as GAME from 'vibegame';\nimport { TokenBoxConfig } from './components';\n\nexport {\n  TokenDriver,\n  Token,\n  TokenBoxConfig,\n  TokenBox,\n  tokenDriverQuery,\n  tokenQuery,\n  tokenBoxConfigQuery,\n  tokenBoxQuery,\n} from './components';\nexport { setTokenDriverText, getTokenDriverText } from './text-storage';\nexport { TokenDisplayPlugin, tokenDriverRecipe } from './plugin';\nexport { TokenBoxLayoutSystem } from './systems';\n\nexport interface TokenBoxOptions {\n  underlineOnly?: boolean;\n  color?: number;\n  padding?: number;\n  offsetT?: number;\n}\n\nexport function addTokenBoxConfig(\n  state: GAME.State,\n  driverEid: number,\n  options?: TokenBoxOptions\n): void {\n  state.addComponent(driverEid, TokenBoxConfig, {\n    color: options?.color ?? 0xffffff,\n    padding: options?.padding ?? 0.1,\n    underlineOnly: options?.underlineOnly ? 1 : 0,\n    offsetT: options?.offsetT ?? 1,\n  });\n}\n","import * as GAME from 'vibegame';\nimport { Transform, WorldTransform } from 'vibegame/transforms';\nimport { Line } from 'vibegame/line';\nimport { Token, TokenDriver, tokenQuery } from './token-display';\n\nexport const TokenArrowConfig = GAME.defineComponent({\n  color: GAME.Types.ui32,\n  arrowHeight: GAME.Types.f32,\n  arrowSize: GAME.Types.f32,\n  thickness: GAME.Types.f32,\n  startOffset: GAME.Types.f32,\n});\n\nexport const TokenArrowDriver = GAME.defineComponent({\n  growT: GAME.Types.f32,\n});\n\nexport const TokenArrow = GAME.defineComponent({\n  driver: GAME.Types.eid,\n  lineEntity: GAME.Types.eid,\n  growT: GAME.Types.f32,\n  initialized: GAME.Types.ui8,\n});\n\nexport const tokenArrowQuery = GAME.defineQuery([TokenArrow]);\n\nconst tokenArrowTokenQuery = GAME.defineQuery([TokenArrow, Token, Transform]);\n\nconst TokenArrowSetupSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const tokenEid of tokenQuery(state.world)) {\n      if (state.hasComponent(tokenEid, TokenArrow)) continue;\n      if (Token.skipArrow[tokenEid]) continue;\n\n      const driverEid = Token.driver[tokenEid];\n      if (!state.hasComponent(driverEid, TokenArrowConfig)) continue;\n      if (!TokenDriver.layoutReady[driverEid]) continue;\n\n      state.addComponent(tokenEid, TokenArrow, {\n        driver: driverEid,\n        lineEntity: 0,\n        growT: 0,\n        initialized: 0,\n      });\n    }\n\n    for (const eid of tokenArrowTokenQuery(state.world)) {\n      if (TokenArrow.initialized[eid]) continue;\n\n      const driverEid = TokenArrow.driver[eid];\n      if (!TokenDriver.layoutReady[driverEid]) continue;\n\n      const config = TokenArrowConfig;\n      const color = config.color[driverEid];\n      const arrowSize = config.arrowSize[driverEid];\n      const thickness = config.thickness[driverEid];\n\n      const lineEntity = state.createEntity();\n      state.addComponent(lineEntity, Transform, { posX: 0, posY: 0, posZ: 0 });\n      state.addComponent(lineEntity, WorldTransform, {});\n      state.addComponent(lineEntity, Line, {\n        offsetX: 0,\n        offsetY: 0,\n        offsetZ: 0,\n        color,\n        thickness,\n        arrowEnd: 1,\n        arrowSize,\n        visible: 0,\n      });\n\n      TokenArrow.lineEntity[eid] = lineEntity;\n      TokenArrow.initialized[eid] = 1;\n    }\n  },\n};\n\nexport const TokenArrowDriverSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of tokenArrowTokenQuery(state.world)) {\n      const driverEid = TokenArrow.driver[eid];\n      if (state.hasComponent(driverEid, TokenArrowDriver)) {\n        TokenArrow.growT[eid] = TokenArrowDriver.growT[driverEid];\n      }\n    }\n  },\n};\n\nconst TokenArrowLayoutSystem: GAME.System = {\n  group: 'draw',\n  update(state) {\n    for (const eid of tokenArrowTokenQuery(state.world)) {\n      if (!TokenArrow.initialized[eid]) continue;\n\n      const driverEid = TokenArrow.driver[eid];\n      const lineEntity = TokenArrow.lineEntity[eid];\n      const growT = TokenArrow.growT[eid];\n      const fontSize = TokenDriver.fontSize[driverEid];\n      const arrowHeight = TokenArrowConfig.arrowHeight[driverEid];\n\n      const startOffset = TokenArrowConfig.startOffset[driverEid];\n      const arrowSize = TokenArrowConfig.arrowSize[driverEid];\n      const tokenX = Transform.posX[eid];\n      const tokenY = Transform.posY[eid];\n      const tokenZ = Transform.posZ[eid];\n\n      Transform.posX[lineEntity] = tokenX;\n      Transform.posY[lineEntity] = tokenY + fontSize / 2 + startOffset;\n      Transform.posZ[lineEntity] = tokenZ;\n\n      Line.offsetY[lineEntity] = arrowHeight * growT;\n      Line.arrowSize[lineEntity] = arrowSize * growT;\n      Line.visible[lineEntity] = growT > 0.01 ? 1 : 0;\n    }\n  },\n};\n\nexport const TokenArrowPlugin: GAME.Plugin = {\n  components: { TokenArrowConfig, TokenArrowDriver, TokenArrow },\n  systems: [TokenArrowSetupSystem, TokenArrowDriverSystem, TokenArrowLayoutSystem],\n  config: {\n    defaults: {\n      'token-arrow-config': {\n        color: 0xffffff,\n        arrowHeight: 0.5,\n        arrowSize: 0.15,\n        thickness: 1.5,\n        startOffset: 0.15,\n      },\n      'token-arrow-driver': {\n        growT: 0,\n      },\n      'token-arrow': {\n        driver: 0,\n        lineEntity: 0,\n        growT: 0,\n        initialized: 0,\n      },\n    },\n  },\n};\n\nexport interface TokenArrowConfigOptions {\n  color?: number;\n  arrowHeight?: number;\n  arrowSize?: number;\n  thickness?: number;\n  startOffset?: number;\n}\n\nexport function addTokenArrowConfig(\n  state: GAME.State,\n  driverEid: number,\n  options?: TokenArrowConfigOptions\n): void {\n  state.addComponent(driverEid, TokenArrowConfig, {\n    color: options?.color ?? 0xffffff,\n    arrowHeight: options?.arrowHeight ?? 0.5,\n    arrowSize: options?.arrowSize ?? 0.15,\n    thickness: options?.thickness ?? 1.5,\n    startOffset: options?.startOffset ?? 0.15,\n  });\n  state.addComponent(driverEid, TokenArrowDriver, { growT: 0 });\n}\n","import * as GAME from 'vibegame';\nimport { Transform, WorldTransform, Parent } from 'vibegame/transforms';\nimport { Line } from 'vibegame/line';\n\nexport const AxisGraph = GAME.defineComponent({\n  axisLength: GAME.Types.f32,\n  axisColor: GAME.Types.ui32,\n  axisThickness: GAME.Types.f32,\n  axisNegativeOpacity: GAME.Types.f32,\n  vectorX: GAME.Types.f32,\n  vectorY: GAME.Types.f32,\n  vectorZ: GAME.Types.f32,\n  vectorColor: GAME.Types.ui32,\n  vectorThickness: GAME.Types.f32,\n  vectorArrowSize: GAME.Types.f32,\n  vectorGrowT: GAME.Types.f32,\n  axisXPosEntity: GAME.Types.eid,\n  axisXNegEntity: GAME.Types.eid,\n  axisYPosEntity: GAME.Types.eid,\n  axisYNegEntity: GAME.Types.eid,\n  axisZPosEntity: GAME.Types.eid,\n  axisZNegEntity: GAME.Types.eid,\n  vectorEntity: GAME.Types.eid,\n  initialized: GAME.Types.ui8,\n});\n\nexport const axisGraphQuery = GAME.defineQuery([AxisGraph, Transform]);\n\nfunction createLineEntity(\n  state: GAME.State,\n  parentEid: number,\n  color: number,\n  thickness: number,\n  opacity: number,\n  arrowEnd: number,\n  arrowSize: number\n): number {\n  const eid = state.createEntity();\n  state.addComponent(eid, Transform, { posX: 0, posY: 0, posZ: 0 });\n  state.addComponent(eid, WorldTransform, {});\n  state.addComponent(eid, Parent, { entity: parentEid });\n  state.addComponent(eid, Line, {\n    offsetX: 0,\n    offsetY: 0,\n    offsetZ: 0,\n    color,\n    thickness,\n    opacity,\n    arrowEnd,\n    arrowSize,\n    visible: 1,\n  });\n  return eid;\n}\n\nconst AxisGraphSetupSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of axisGraphQuery(state.world)) {\n      if (AxisGraph.initialized[eid]) continue;\n\n      const axisColor = AxisGraph.axisColor[eid];\n      const axisThickness = AxisGraph.axisThickness[eid];\n      const negOpacity = AxisGraph.axisNegativeOpacity[eid];\n      const vectorColor = AxisGraph.vectorColor[eid];\n      const vectorThickness = AxisGraph.vectorThickness[eid];\n      const vectorArrowSize = AxisGraph.vectorArrowSize[eid];\n\n      AxisGraph.axisXPosEntity[eid] = createLineEntity(\n        state,\n        eid,\n        axisColor,\n        axisThickness,\n        1,\n        0,\n        0\n      );\n      AxisGraph.axisXNegEntity[eid] = createLineEntity(\n        state,\n        eid,\n        axisColor,\n        axisThickness,\n        negOpacity,\n        0,\n        0\n      );\n      AxisGraph.axisYPosEntity[eid] = createLineEntity(\n        state,\n        eid,\n        axisColor,\n        axisThickness,\n        1,\n        0,\n        0\n      );\n      AxisGraph.axisYNegEntity[eid] = createLineEntity(\n        state,\n        eid,\n        axisColor,\n        axisThickness,\n        negOpacity,\n        0,\n        0\n      );\n      AxisGraph.axisZPosEntity[eid] = createLineEntity(\n        state,\n        eid,\n        axisColor,\n        axisThickness,\n        1,\n        0,\n        0\n      );\n      AxisGraph.axisZNegEntity[eid] = createLineEntity(\n        state,\n        eid,\n        axisColor,\n        axisThickness,\n        negOpacity,\n        0,\n        0\n      );\n      AxisGraph.vectorEntity[eid] = createLineEntity(\n        state,\n        eid,\n        vectorColor,\n        vectorThickness,\n        1,\n        1,\n        vectorArrowSize\n      );\n\n      AxisGraph.initialized[eid] = 1;\n    }\n  },\n};\n\nconst AxisGraphLayoutSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of axisGraphQuery(state.world)) {\n      if (!AxisGraph.initialized[eid]) continue;\n\n      const axisLength = AxisGraph.axisLength[eid];\n      const vectorX = AxisGraph.vectorX[eid];\n      const vectorY = AxisGraph.vectorY[eid];\n      const vectorZ = AxisGraph.vectorZ[eid];\n      const growT = AxisGraph.vectorGrowT[eid];\n\n      const axisXPos = AxisGraph.axisXPosEntity[eid];\n      const axisXNeg = AxisGraph.axisXNegEntity[eid];\n      const axisYPos = AxisGraph.axisYPosEntity[eid];\n      const axisYNeg = AxisGraph.axisYNegEntity[eid];\n      const axisZPos = AxisGraph.axisZPosEntity[eid];\n      const axisZNeg = AxisGraph.axisZNegEntity[eid];\n      const vector = AxisGraph.vectorEntity[eid];\n\n      Line.offsetX[axisXPos] = axisLength;\n      Line.offsetX[axisXNeg] = -axisLength;\n      Line.offsetY[axisYPos] = axisLength;\n      Line.offsetY[axisYNeg] = -axisLength;\n      Line.offsetZ[axisZPos] = axisLength;\n      Line.offsetZ[axisZNeg] = -axisLength;\n\n      Line.offsetX[vector] = vectorX * growT;\n      Line.offsetY[vector] = vectorY * growT;\n      Line.offsetZ[vector] = vectorZ * growT;\n      Line.visible[vector] = growT > 0 ? 1 : 0;\n    }\n  },\n};\n\nexport const AxisGraphPlugin: GAME.Plugin = {\n  components: { AxisGraph },\n  systems: [AxisGraphSetupSystem, AxisGraphLayoutSystem],\n  config: {\n    defaults: {\n      'axis-graph': {\n        axisLength: 3,\n        axisColor: 0x888888,\n        axisThickness: 1,\n        axisNegativeOpacity: 0.3,\n        vectorX: 0.5,\n        vectorY: 1.5,\n        vectorZ: -1,\n        vectorColor: 0xff0000,\n        vectorThickness: 3,\n        vectorArrowSize: 0.2,\n        vectorGrowT: 0,\n        axisXPosEntity: 0,\n        axisXNegEntity: 0,\n        axisYPosEntity: 0,\n        axisYNegEntity: 0,\n        axisZPosEntity: 0,\n        axisZNegEntity: 0,\n        vectorEntity: 0,\n        initialized: 0,\n      },\n    },\n  },\n};\n","import * as GAME from 'vibegame';\nimport { Transform, Parent, WorldTransform } from 'vibegame/transforms';\nimport { Renderer } from 'vibegame/rendering';\nimport { Line } from 'vibegame/line';\n\nexport const NeuralNetwork = GAME.defineComponent({\n  layerSpacing: GAME.Types.f32,\n  nodeSpacing: GAME.Types.f32,\n  depthRows: GAME.Types.ui8,\n  nodeSize: GAME.Types.f32,\n  connections: GAME.Types.f32,\n  initialized: GAME.Types.ui8,\n});\n\nexport const NeuralNetworkLayer = GAME.defineComponent({\n  network: GAME.Types.eid,\n  index: GAME.Types.ui8,\n  nodeCount: GAME.Types.ui8,\n  collapse: GAME.Types.f32,\n});\n\nexport const NeuralNetworkNode = GAME.defineComponent({\n  layer: GAME.Types.eid,\n  index: GAME.Types.ui8,\n  originX: GAME.Types.f32,\n  originY: GAME.Types.f32,\n  originZ: GAME.Types.f32,\n});\n\nexport const NeuralNetworkConnection = GAME.defineComponent({\n  network: GAME.Types.eid,\n  layerIndex: GAME.Types.ui8,\n  startNode: GAME.Types.eid,\n  endNode: GAME.Types.eid,\n});\n\nconst LAYER_SIZES = [3, 5, 5, 2];\n\nconst neuralNetworkQuery = GAME.defineQuery([NeuralNetwork, Transform]);\n\nconst NeuralNetworkSetupSystem: GAME.System = {\n  group: 'setup',\n  update(state) {\n    for (const eid of neuralNetworkQuery(state.world)) {\n      if (NeuralNetwork.initialized[eid]) continue;\n      NeuralNetwork.initialized[eid] = 1;\n\n      const layerSpacing = NeuralNetwork.layerSpacing[eid] || 4;\n      const nodeSpacing = NeuralNetwork.nodeSpacing[eid] || 2;\n      const depthRows = NeuralNetwork.depthRows[eid] || 1;\n      const nodeSize = NeuralNetwork.nodeSize[eid] || 0.6;\n\n      const numLayers = LAYER_SIZES.length;\n      const totalWidth = (numLayers - 1) * layerSpacing;\n      const startX = -totalWidth / 2;\n\n      const layerEntities: number[] = [];\n      const nodeEntities: number[][] = [];\n\n      for (let layerIdx = 0; layerIdx < numLayers; layerIdx++) {\n        const nodesPerRow = LAYER_SIZES[layerIdx];\n        const isHidden = layerIdx > 0 && layerIdx < numLayers - 1;\n        const rows = isHidden ? depthRows : 1;\n        const totalNodes = nodesPerRow * rows;\n\n        const layerX = startX + layerIdx * layerSpacing;\n\n        const layerEntity = state.createEntity();\n        state.addComponent(layerEntity, Transform, { posX: layerX });\n        state.addComponent(layerEntity, NeuralNetworkLayer, {\n          network: eid,\n          index: layerIdx,\n          nodeCount: totalNodes,\n          collapse: 0,\n        });\n        state.addComponent(layerEntity, Parent, { entity: eid });\n        layerEntities.push(layerEntity);\n\n        const totalHeight = (nodesPerRow - 1) * nodeSpacing;\n        const totalDepth = (rows - 1) * nodeSpacing;\n        const startY = -totalHeight / 2;\n        const startZ = -totalDepth / 2;\n\n        nodeEntities[layerIdx] = [];\n\n        for (let row = 0; row < rows; row++) {\n          for (let col = 0; col < nodesPerRow; col++) {\n            const y = startY + col * nodeSpacing;\n            const z = startZ + row * nodeSpacing;\n\n            const nodeEntity = state.createEntity();\n\n            state.addComponent(nodeEntity, Transform, {\n              posX: 0,\n              posY: y,\n              posZ: z,\n              scaleX: 1,\n              scaleY: 1,\n              scaleZ: 1,\n            });\n\n            const isInput = layerIdx === 0;\n            const isOutput = layerIdx === numLayers - 1;\n            const color = isInput ? 0x44aa88 : isOutput ? 0xaa4488 : 0x4488ff;\n\n            state.addComponent(nodeEntity, Renderer, {\n              shape: 1,\n              sizeX: nodeSize,\n              sizeY: nodeSize,\n              sizeZ: nodeSize,\n              color,\n              visible: 1,\n            });\n\n            state.addComponent(nodeEntity, NeuralNetworkNode, {\n              layer: layerEntity,\n              index: row * nodesPerRow + col,\n              originX: 0,\n              originY: y,\n              originZ: z,\n            });\n\n            state.addComponent(nodeEntity, Parent, { entity: layerEntity });\n\n            nodeEntities[layerIdx].push(nodeEntity);\n          }\n        }\n      }\n\n      for (let layerIdx = 0; layerIdx < numLayers - 1; layerIdx++) {\n        const fromNodes = nodeEntities[layerIdx];\n        const toNodes = nodeEntities[layerIdx + 1];\n\n        for (const fromNode of fromNodes) {\n          for (const toNode of toNodes) {\n            const connectionEntity = state.createEntity();\n\n            state.addComponent(connectionEntity, Transform, {});\n\n            state.addComponent(connectionEntity, Line, {\n              offsetX: 0,\n              offsetY: 0,\n              offsetZ: 0,\n              color: 0x444444,\n              thickness: 1,\n              opacity: 1,\n              visible: 1,\n            });\n\n            state.addComponent(connectionEntity, NeuralNetworkConnection, {\n              network: eid,\n              layerIndex: layerIdx,\n              startNode: fromNode,\n              endNode: toNode,\n            });\n\n            state.addComponent(connectionEntity, Parent, { entity: fromNode });\n          }\n        }\n      }\n    }\n  },\n};\n\nconst nodeQuery = GAME.defineQuery([NeuralNetworkNode, Transform]);\n\nconst NodeCollapseSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of nodeQuery(state.world)) {\n      const layerEid = NeuralNetworkNode.layer[eid];\n      const collapse = NeuralNetworkLayer.collapse[layerEid];\n\n      const originY = NeuralNetworkNode.originY[eid];\n      const originZ = NeuralNetworkNode.originZ[eid];\n\n      Transform.posY[eid] = originY * (1 - collapse);\n      Transform.posZ[eid] = originZ * (1 - collapse);\n    }\n  },\n};\n\nconst connectionQuery = GAME.defineQuery([NeuralNetworkConnection, Line]);\n\nconst ConnectionAnimationSystem: GAME.System = {\n  group: 'simulation',\n  after: [NodeCollapseSystem],\n  update(state) {\n    const numConnectionLayers = LAYER_SIZES.length - 1;\n\n    for (const eid of connectionQuery(state.world)) {\n      const network = NeuralNetworkConnection.network[eid];\n      const layerIdx = NeuralNetworkConnection.layerIndex[eid];\n      const startNode = NeuralNetworkConnection.startNode[eid];\n      const endNode = NeuralNetworkConnection.endNode[eid];\n\n      const t = NeuralNetwork.connections[network];\n      const layerStart = layerIdx / numConnectionLayers;\n      const layerEnd = (layerIdx + 1) / numConnectionLayers;\n      const layerT = Math.max(0, Math.min(1, (t - layerStart) / (layerEnd - layerStart)));\n\n      const startX = WorldTransform.posX[startNode];\n      const startY = WorldTransform.posY[startNode];\n      const startZ = WorldTransform.posZ[startNode];\n      const endX = WorldTransform.posX[endNode];\n      const endY = WorldTransform.posY[endNode];\n      const endZ = WorldTransform.posZ[endNode];\n\n      const scale = WorldTransform.scaleX[startNode];\n      if (scale > 0) {\n        Line.offsetX[eid] = ((endX - startX) * layerT) / scale;\n        Line.offsetY[eid] = ((endY - startY) * layerT) / scale;\n        Line.offsetZ[eid] = ((endZ - startZ) * layerT) / scale;\n      } else {\n        Line.offsetX[eid] = 0;\n        Line.offsetY[eid] = 0;\n        Line.offsetZ[eid] = 0;\n      }\n    }\n  },\n};\n\nexport const neuralNetworkRecipe: GAME.Recipe = {\n  name: 'neural-network',\n  components: ['neural-network', 'transform'],\n};\n\nexport const NeuralNetworkPlugin: GAME.Plugin = {\n  components: { NeuralNetwork, NeuralNetworkLayer, NeuralNetworkNode, NeuralNetworkConnection },\n  systems: [NeuralNetworkSetupSystem, NodeCollapseSystem, ConnectionAnimationSystem],\n  recipes: [neuralNetworkRecipe],\n  config: {\n    defaults: {\n      'neural-network': {\n        layerSpacing: 6,\n        nodeSpacing: 3,\n        depthRows: 3,\n        nodeSize: 0.9,\n        connections: 1,\n        initialized: 0,\n      },\n      'neural-network-layer': {\n        collapse: 0,\n      },\n    },\n  },\n};\n","import * as GAME from 'vibegame';\nimport { Transform, WorldTransform, Parent } from 'vibegame/transforms';\nimport { Renderer } from 'vibegame/rendering';\nimport { createShaker } from 'vibegame/tweening';\nimport { Token, TokenDriver, tokenQuery } from './token-display';\n\nfunction lerpColor(colorA: number, colorB: number, t: number): number {\n  const rA = (colorA >> 16) & 0xff;\n  const gA = (colorA >> 8) & 0xff;\n  const bA = colorA & 0xff;\n  const rB = (colorB >> 16) & 0xff;\n  const gB = (colorB >> 8) & 0xff;\n  const bB = colorB & 0xff;\n  const r = Math.round(rA + (rB - rA) * t);\n  const g = Math.round(gA + (gB - gA) * t);\n  const b = Math.round(bA + (bB - bA) * t);\n  return (r << 16) | (g << 8) | b;\n}\n\nexport const TokenVectorConfig = GAME.defineComponent({\n  color: GAME.Types.ui32,\n  flickerColor: GAME.Types.ui32,\n  vectorHeight: GAME.Types.f32,\n  vectorWidth: GAME.Types.f32,\n  arrowHeight: GAME.Types.f32,\n  arrowStartOffset: GAME.Types.f32,\n});\n\nexport const TokenVectorDriver = GAME.defineComponent({\n  growT: GAME.Types.f32,\n});\n\nexport const TokenVector = GAME.defineComponent({\n  driver: GAME.Types.eid,\n  boxEntity: GAME.Types.eid,\n  growT: GAME.Types.f32,\n  colorT: GAME.Types.f32,\n  shakerX: GAME.Types.eid,\n  shakerY: GAME.Types.eid,\n  shakerZ: GAME.Types.eid,\n  shakerScale: GAME.Types.eid,\n  initialized: GAME.Types.ui8,\n});\n\nexport const tokenVectorQuery = GAME.defineQuery([TokenVector]);\n\nconst tokenVectorTokenQuery = GAME.defineQuery([TokenVector, Token, Transform]);\n\nconst TokenVectorSetupSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const tokenEid of tokenQuery(state.world)) {\n      if (state.hasComponent(tokenEid, TokenVector)) continue;\n      if (Token.skipVector[tokenEid]) continue;\n\n      const driverEid = Token.driver[tokenEid];\n      if (!state.hasComponent(driverEid, TokenVectorConfig)) continue;\n      if (!TokenDriver.layoutReady[driverEid]) continue;\n\n      state.addComponent(tokenEid, TokenVector, {\n        driver: driverEid,\n        boxEntity: 0,\n        growT: 0,\n        colorT: 0,\n        shakerX: 0,\n        shakerY: 0,\n        shakerZ: 0,\n        shakerScale: 0,\n        initialized: 0,\n      });\n    }\n\n    for (const eid of tokenVectorTokenQuery(state.world)) {\n      if (TokenVector.initialized[eid]) continue;\n\n      const driverEid = TokenVector.driver[eid];\n      if (!TokenDriver.layoutReady[driverEid]) continue;\n\n      const config = TokenVectorConfig;\n      const color = config.color[driverEid];\n      const vectorHeight = config.vectorHeight[driverEid];\n      const vectorWidth = config.vectorWidth[driverEid];\n\n      const boxEntity = state.createEntity();\n      state.addComponent(boxEntity, Transform, {\n        posX: 0,\n        posY: 0,\n        posZ: 0,\n        scaleX: 0,\n        scaleY: 0,\n        scaleZ: 0,\n      });\n      state.addComponent(boxEntity, WorldTransform, {});\n      state.addComponent(boxEntity, Parent, { entity: eid });\n      state.addComponent(boxEntity, Renderer, {\n        shape: 0,\n        sizeX: vectorWidth,\n        sizeY: vectorHeight,\n        sizeZ: vectorWidth,\n        color,\n        visible: 1,\n      });\n\n      TokenVector.boxEntity[eid] = boxEntity;\n\n      TokenVector.shakerX[eid] =\n        createShaker(state, boxEntity, 'transform.pos-x', {\n          value: 0,\n          intensity: 0,\n          mode: 'additive',\n        }) ?? 0;\n      TokenVector.shakerY[eid] =\n        createShaker(state, boxEntity, 'transform.pos-y', {\n          value: 0,\n          intensity: 0,\n          mode: 'additive',\n        }) ?? 0;\n      TokenVector.shakerZ[eid] =\n        createShaker(state, boxEntity, 'transform.pos-z', {\n          value: 0,\n          intensity: 0,\n          mode: 'additive',\n        }) ?? 0;\n      TokenVector.shakerScale[eid] =\n        createShaker(state, boxEntity, 'scale', {\n          value: 1.1,\n          intensity: 0,\n          mode: 'multiplicative',\n        }) ?? 0;\n\n      TokenVector.initialized[eid] = 1;\n    }\n  },\n};\n\nexport const TokenVectorDriverSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of tokenVectorTokenQuery(state.world)) {\n      const driverEid = TokenVector.driver[eid];\n      if (state.hasComponent(driverEid, TokenVectorDriver)) {\n        TokenVector.growT[eid] = TokenVectorDriver.growT[driverEid];\n      }\n    }\n  },\n};\n\nconst TokenVectorLayoutSystem: GAME.System = {\n  group: 'draw',\n  update(state) {\n    for (const eid of tokenVectorTokenQuery(state.world)) {\n      if (!TokenVector.initialized[eid]) continue;\n\n      const driverEid = TokenVector.driver[eid];\n      const boxEntity = TokenVector.boxEntity[eid];\n      const growT = TokenVector.growT[eid];\n      const colorT = TokenVector.colorT[eid];\n      const fontSize = TokenDriver.fontSize[driverEid];\n      const vectorHeight = TokenVectorConfig.vectorHeight[driverEid];\n      const arrowHeight = TokenVectorConfig.arrowHeight[driverEid];\n      const arrowStartOffset = TokenVectorConfig.arrowStartOffset[driverEid];\n\n      const vectorPadding = 0.1;\n      const localY =\n        fontSize / 2 + arrowStartOffset + arrowHeight + vectorPadding + (vectorHeight / 2) * growT;\n      Transform.posY[boxEntity] = localY;\n\n      Transform.scaleX[boxEntity] = growT;\n      Transform.scaleY[boxEntity] = growT;\n      Transform.scaleZ[boxEntity] = growT;\n\n      if (colorT > 0) {\n        const baseColor = TokenVectorConfig.color[driverEid];\n        const flickerColor = TokenVectorConfig.flickerColor[driverEid];\n        Renderer.color[boxEntity] = lerpColor(baseColor, flickerColor, colorT);\n      } else {\n        Renderer.color[boxEntity] = TokenVectorConfig.color[driverEid];\n      }\n    }\n  },\n};\n\nexport const TokenVectorPlugin: GAME.Plugin = {\n  components: { TokenVectorConfig, TokenVectorDriver, TokenVector },\n  systems: [TokenVectorSetupSystem, TokenVectorDriverSystem, TokenVectorLayoutSystem],\n  config: {\n    defaults: {\n      'token-vector-config': {\n        color: 0xffffff,\n        flickerColor: 0xff0000,\n        vectorHeight: 3,\n        vectorWidth: 0.3,\n        arrowHeight: 0.5,\n        arrowStartOffset: 0.15,\n      },\n      'token-vector-driver': {\n        growT: 0,\n      },\n      'token-vector': {\n        driver: 0,\n        boxEntity: 0,\n        growT: 0,\n        colorT: 0,\n        shakerX: 0,\n        shakerY: 0,\n        shakerZ: 0,\n        shakerScale: 0,\n        initialized: 0,\n      },\n    },\n  },\n};\n\nexport interface TokenVectorConfigOptions {\n  color?: number;\n  flickerColor?: number;\n  vectorHeight?: number;\n  vectorWidth?: number;\n  arrowHeight?: number;\n  arrowStartOffset?: number;\n}\n\nexport function addTokenVectorConfig(\n  state: GAME.State,\n  driverEid: number,\n  options?: TokenVectorConfigOptions\n): void {\n  state.addComponent(driverEid, TokenVectorConfig, {\n    color: options?.color ?? 0xffffff,\n    flickerColor: options?.flickerColor ?? 0xff0000,\n    vectorHeight: options?.vectorHeight ?? 3,\n    vectorWidth: options?.vectorWidth ?? 0.3,\n    arrowHeight: options?.arrowHeight ?? 0.5,\n    arrowStartOffset: options?.arrowStartOffset ?? 0.15,\n  });\n  state.addComponent(driverEid, TokenVectorDriver, { growT: 0 });\n}\n","import * as GAME from 'vibegame';\nimport { Transform, WorldTransform, Parent } from 'vibegame/transforms';\nimport { Renderer } from 'vibegame/rendering';\nimport { Line } from 'vibegame/line';\nimport { createShaker } from 'vibegame/tweening';\nimport { Token, TokenDriver } from './token-display';\nimport { TokenVector, TokenVectorConfig, tokenVectorQuery } from './token-vector';\n\nexport const ProjectionVectorConfig = GAME.defineComponent({\n  vectorHeight: GAME.Types.f32,\n  vectorWidth: GAME.Types.f32,\n  vectorGap: GAME.Types.f32,\n  offsetAboveEmbedding: GAME.Types.f32,\n  qColor: GAME.Types.ui32,\n  kColor: GAME.Types.ui32,\n  vColor: GAME.Types.ui32,\n  arrowColor: GAME.Types.ui32,\n  arrowThickness: GAME.Types.f32,\n  arrowSize: GAME.Types.f32,\n  arrowPadding: GAME.Types.f32,\n});\n\nexport const ProjectionVectorDriver = GAME.defineComponent({\n  qGrowT: GAME.Types.f32,\n  kGrowT: GAME.Types.f32,\n  vGrowT: GAME.Types.f32,\n  qSquishT: GAME.Types.f32,\n  kSquishT: GAME.Types.f32,\n  vSquishT: GAME.Types.f32,\n});\n\nexport const ProjectionVector = GAME.defineComponent({\n  driver: GAME.Types.eid,\n  qEntity: GAME.Types.eid,\n  kEntity: GAME.Types.eid,\n  vEntity: GAME.Types.eid,\n  qArrowEntity: GAME.Types.eid,\n  kArrowEntity: GAME.Types.eid,\n  vArrowEntity: GAME.Types.eid,\n  vShakerX: GAME.Types.eid,\n  vShakerY: GAME.Types.eid,\n  qGrowT: GAME.Types.f32,\n  kGrowT: GAME.Types.f32,\n  vGrowT: GAME.Types.f32,\n  qSquishT: GAME.Types.f32,\n  kSquishT: GAME.Types.f32,\n  vSquishT: GAME.Types.f32,\n  initialized: GAME.Types.ui8,\n});\n\nexport const projectionVectorQuery = GAME.defineQuery([ProjectionVector]);\n\nconst projectionVectorTokenQuery = GAME.defineQuery([\n  ProjectionVector,\n  Token,\n  Transform,\n  TokenVector,\n]);\n\nfunction createBoxEntity(\n  state: GAME.State,\n  parentEid: number,\n  width: number,\n  height: number,\n  color: number\n): number {\n  const boxEntity = state.createEntity();\n  state.addComponent(boxEntity, Transform, {\n    posX: 0,\n    posY: 0,\n    posZ: 0,\n    scaleX: 0,\n    scaleY: 0,\n    scaleZ: 0,\n  });\n  state.addComponent(boxEntity, WorldTransform, {});\n  state.addComponent(boxEntity, Parent, { entity: parentEid });\n  state.addComponent(boxEntity, Renderer, {\n    shape: 0,\n    sizeX: width,\n    sizeY: height,\n    sizeZ: width,\n    color,\n    visible: 1,\n  });\n  return boxEntity;\n}\n\nfunction createArrowEntity(\n  state: GAME.State,\n  parentEid: number,\n  color: number,\n  thickness: number,\n  arrowSize: number\n): number {\n  const arrowEntity = state.createEntity();\n  state.addComponent(arrowEntity, Transform, { posX: 0, posY: 0, posZ: 0 });\n  state.addComponent(arrowEntity, WorldTransform, {});\n  state.addComponent(arrowEntity, Parent, { entity: parentEid });\n  state.addComponent(arrowEntity, Line, {\n    offsetX: 0,\n    offsetY: 0,\n    offsetZ: 0,\n    color,\n    thickness,\n    arrowEnd: 1,\n    arrowSize,\n    visible: 0,\n  });\n  return arrowEntity;\n}\n\nconst ProjectionVectorSetupSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const tokenEid of tokenVectorQuery(state.world)) {\n      if (state.hasComponent(tokenEid, ProjectionVector)) continue;\n      if (Token.skipVector[tokenEid]) continue;\n\n      const driverEid = Token.driver[tokenEid];\n      if (!state.hasComponent(driverEid, ProjectionVectorConfig)) continue;\n      if (!TokenDriver.layoutReady[driverEid]) continue;\n\n      state.addComponent(tokenEid, ProjectionVector, {\n        driver: driverEid,\n        qEntity: 0,\n        kEntity: 0,\n        vEntity: 0,\n        qArrowEntity: 0,\n        kArrowEntity: 0,\n        vArrowEntity: 0,\n        vShakerX: 0,\n        vShakerY: 0,\n        qGrowT: 0,\n        kGrowT: 0,\n        vGrowT: 0,\n        initialized: 0,\n      });\n    }\n\n    for (const eid of projectionVectorTokenQuery(state.world)) {\n      if (ProjectionVector.initialized[eid]) continue;\n      if (!TokenVector.initialized[eid]) continue;\n\n      const driverEid = ProjectionVector.driver[eid];\n      if (!TokenDriver.layoutReady[driverEid]) continue;\n\n      const config = ProjectionVectorConfig;\n      const vectorWidth = config.vectorWidth[driverEid];\n      const vectorHeight = config.vectorHeight[driverEid];\n      const qColor = config.qColor[driverEid];\n      const kColor = config.kColor[driverEid];\n      const vColor = config.vColor[driverEid];\n      const arrowColor = config.arrowColor[driverEid];\n      const arrowThickness = config.arrowThickness[driverEid];\n      const arrowSize = config.arrowSize[driverEid];\n\n      const qEntity = createBoxEntity(state, eid, vectorWidth, vectorHeight, qColor);\n      const kEntity = createBoxEntity(state, eid, vectorWidth, vectorHeight, kColor);\n      const vEntity = createBoxEntity(state, eid, vectorWidth, vectorHeight, vColor);\n\n      const qArrowEntity = createArrowEntity(state, eid, arrowColor, arrowThickness, arrowSize);\n      const kArrowEntity = createArrowEntity(state, eid, arrowColor, arrowThickness, arrowSize);\n      const vArrowEntity = createArrowEntity(state, eid, arrowColor, arrowThickness, arrowSize);\n\n      ProjectionVector.qEntity[eid] = qEntity;\n      ProjectionVector.kEntity[eid] = kEntity;\n      ProjectionVector.vEntity[eid] = vEntity;\n      ProjectionVector.qArrowEntity[eid] = qArrowEntity;\n      ProjectionVector.kArrowEntity[eid] = kArrowEntity;\n      ProjectionVector.vArrowEntity[eid] = vArrowEntity;\n\n      ProjectionVector.vShakerX[eid] =\n        createShaker(state, vEntity, 'transform.pos-x', {\n          value: 0,\n          intensity: 0,\n          mode: 'additive',\n        }) ?? 0;\n      ProjectionVector.vShakerY[eid] =\n        createShaker(state, vEntity, 'transform.pos-y', {\n          value: 0,\n          intensity: 0,\n          mode: 'additive',\n        }) ?? 0;\n\n      ProjectionVector.initialized[eid] = 1;\n    }\n  },\n};\n\nexport const ProjectionVectorDriverSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of projectionVectorTokenQuery(state.world)) {\n      const driverEid = ProjectionVector.driver[eid];\n      if (state.hasComponent(driverEid, ProjectionVectorDriver)) {\n        ProjectionVector.qGrowT[eid] = ProjectionVectorDriver.qGrowT[driverEid];\n        ProjectionVector.kGrowT[eid] = ProjectionVectorDriver.kGrowT[driverEid];\n        ProjectionVector.vGrowT[eid] = ProjectionVectorDriver.vGrowT[driverEid];\n        ProjectionVector.qSquishT[eid] = ProjectionVectorDriver.qSquishT[driverEid];\n        ProjectionVector.kSquishT[eid] = ProjectionVectorDriver.kSquishT[driverEid];\n        ProjectionVector.vSquishT[eid] = ProjectionVectorDriver.vSquishT[driverEid];\n      }\n    }\n  },\n};\n\nconst ProjectionVectorLayoutSystem: GAME.System = {\n  group: 'draw',\n  update(state) {\n    for (const eid of projectionVectorTokenQuery(state.world)) {\n      if (!ProjectionVector.initialized[eid]) continue;\n\n      const driverEid = ProjectionVector.driver[eid];\n      const config = ProjectionVectorConfig;\n      const vectorWidth = config.vectorWidth[driverEid];\n      const vectorHeight = config.vectorHeight[driverEid];\n      const vectorGap = config.vectorGap[driverEid];\n      const offsetAbove = config.offsetAboveEmbedding[driverEid];\n      const arrowSize = config.arrowSize[driverEid];\n      const arrowPadding = config.arrowPadding[driverEid];\n\n      const embeddingBoxEid = TokenVector.boxEntity[eid];\n      const embeddingHeight = TokenVectorConfig.vectorHeight[driverEid];\n      const embeddingY = Transform.posY[embeddingBoxEid];\n      const embeddingGrowT = TokenVector.growT[eid];\n      const embeddingTopY = embeddingY + (embeddingHeight / 2) * embeddingGrowT;\n\n      const qEntity = ProjectionVector.qEntity[eid];\n      const kEntity = ProjectionVector.kEntity[eid];\n      const vEntity = ProjectionVector.vEntity[eid];\n      const qArrowEntity = ProjectionVector.qArrowEntity[eid];\n      const kArrowEntity = ProjectionVector.kArrowEntity[eid];\n      const vArrowEntity = ProjectionVector.vArrowEntity[eid];\n\n      const qGrowT = ProjectionVector.qGrowT[eid];\n      const kGrowT = ProjectionVector.kGrowT[eid];\n      const vGrowT = ProjectionVector.vGrowT[eid];\n      const qSquishT = ProjectionVector.qSquishT[eid];\n      const kSquishT = ProjectionVector.kSquishT[eid];\n      const vSquishT = ProjectionVector.vSquishT[eid];\n\n      const spacing = vectorWidth + vectorGap;\n\n      const squishDropY = vectorHeight * 0.25;\n      const qY = embeddingTopY + offsetAbove + (vectorHeight / 2) * qGrowT - qSquishT * squishDropY;\n      const kY = embeddingTopY + offsetAbove + (vectorHeight / 2) * kGrowT - kSquishT * squishDropY;\n      const vY = embeddingTopY + offsetAbove + (vectorHeight / 2) * vGrowT - vSquishT * squishDropY;\n\n      const qScaleY = qGrowT * (1 - qSquishT * 0.5);\n      Transform.posX[qEntity] = -spacing;\n      Transform.posY[qEntity] = qY;\n      Transform.scaleX[qEntity] = qGrowT;\n      Transform.scaleY[qEntity] = qScaleY;\n      Transform.scaleZ[qEntity] = qGrowT;\n\n      const kScaleY = kGrowT * (1 - kSquishT * 0.5);\n      Transform.posX[kEntity] = 0;\n      Transform.posY[kEntity] = kY;\n      Transform.scaleX[kEntity] = kGrowT;\n      Transform.scaleY[kEntity] = kScaleY;\n      Transform.scaleZ[kEntity] = kGrowT;\n\n      const vScaleY = vGrowT * (1 - vSquishT * 0.5);\n      Transform.posX[vEntity] = spacing;\n      Transform.posY[vEntity] = vY;\n      Transform.scaleX[vEntity] = vGrowT;\n      Transform.scaleY[vEntity] = vScaleY;\n      Transform.scaleZ[vEntity] = vGrowT;\n\n      const arrowStartY = embeddingTopY + arrowPadding;\n      const arrowLength = offsetAbove - arrowPadding * 2;\n\n      Transform.posX[qArrowEntity] = 0;\n      Transform.posY[qArrowEntity] = arrowStartY;\n      Line.offsetX[qArrowEntity] = -spacing * qGrowT;\n      Line.offsetY[qArrowEntity] = arrowLength * qGrowT;\n      Line.arrowSize[qArrowEntity] = arrowSize * qGrowT;\n      Line.visible[qArrowEntity] = qGrowT > 0.01 ? 1 : 0;\n\n      Transform.posX[kArrowEntity] = 0;\n      Transform.posY[kArrowEntity] = arrowStartY;\n      Line.offsetX[kArrowEntity] = 0;\n      Line.offsetY[kArrowEntity] = arrowLength * kGrowT;\n      Line.arrowSize[kArrowEntity] = arrowSize * kGrowT;\n      Line.visible[kArrowEntity] = kGrowT > 0.01 ? 1 : 0;\n\n      Transform.posX[vArrowEntity] = 0;\n      Transform.posY[vArrowEntity] = arrowStartY;\n      Line.offsetX[vArrowEntity] = spacing * vGrowT;\n      Line.offsetY[vArrowEntity] = arrowLength * vGrowT;\n      Line.arrowSize[vArrowEntity] = arrowSize * vGrowT;\n      Line.visible[vArrowEntity] = vGrowT > 0.01 ? 1 : 0;\n    }\n  },\n};\n\nexport const ProjectionVectorPlugin: GAME.Plugin = {\n  components: { ProjectionVectorConfig, ProjectionVectorDriver, ProjectionVector },\n  systems: [\n    ProjectionVectorSetupSystem,\n    ProjectionVectorDriverSystem,\n    ProjectionVectorLayoutSystem,\n  ],\n  config: {\n    defaults: {\n      'projection-vector-config': {\n        vectorHeight: 0.8,\n        vectorWidth: 0.2,\n        vectorGap: 0.15,\n        offsetAboveEmbedding: 0.7,\n        qColor: 0x3b82f6,\n        kColor: 0x22c55e,\n        vColor: 0xa855f7,\n        arrowColor: 0x737373,\n        arrowThickness: 1.5,\n        arrowSize: 0.1,\n        arrowPadding: 0.08,\n      },\n      'projection-vector-driver': {\n        qGrowT: 0,\n        kGrowT: 0,\n        vGrowT: 0,\n        qSquishT: 0,\n        kSquishT: 0,\n        vSquishT: 0,\n      },\n      'projection-vector': {\n        driver: 0,\n        qEntity: 0,\n        kEntity: 0,\n        vEntity: 0,\n        qArrowEntity: 0,\n        kArrowEntity: 0,\n        vArrowEntity: 0,\n        vShakerX: 0,\n        vShakerY: 0,\n        qGrowT: 0,\n        kGrowT: 0,\n        vGrowT: 0,\n        qSquishT: 0,\n        kSquishT: 0,\n        vSquishT: 0,\n        initialized: 0,\n      },\n    },\n  },\n};\n\nexport interface ProjectionVectorConfigOptions {\n  vectorHeight?: number;\n  vectorWidth?: number;\n  vectorGap?: number;\n  offsetAboveEmbedding?: number;\n  qColor?: number;\n  kColor?: number;\n  vColor?: number;\n  arrowColor?: number;\n  arrowThickness?: number;\n  arrowSize?: number;\n  arrowPadding?: number;\n}\n\nexport function addProjectionVectorConfig(\n  state: GAME.State,\n  driverEid: number,\n  options?: ProjectionVectorConfigOptions\n): void {\n  state.addComponent(driverEid, ProjectionVectorConfig, {\n    vectorHeight: options?.vectorHeight ?? 0.8,\n    vectorWidth: options?.vectorWidth ?? 0.2,\n    vectorGap: options?.vectorGap ?? 0.15,\n    offsetAboveEmbedding: options?.offsetAboveEmbedding ?? 0.8,\n    qColor: options?.qColor ?? 0x3b82f6,\n    kColor: options?.kColor ?? 0x22c55e,\n    vColor: options?.vColor ?? 0xa855f7,\n    arrowColor: options?.arrowColor ?? 0x737373,\n    arrowThickness: options?.arrowThickness ?? 1.5,\n    arrowSize: options?.arrowSize ?? 0.1,\n    arrowPadding: options?.arrowPadding ?? 0.08,\n  });\n  state.addComponent(driverEid, ProjectionVectorDriver, {\n    qGrowT: 0,\n    kGrowT: 0,\n    vGrowT: 0,\n    qSquishT: 0,\n    kSquishT: 0,\n    vSquishT: 0,\n  });\n}\n","import * as GAME from 'vibegame';\nimport { Transform, WorldTransform, Parent } from 'vibegame/transforms';\nimport { Word, setTextContent } from 'vibegame/text';\nimport { Token, TokenDriver, tokenQuery } from './token-display';\nimport { ProjectionVector, projectionVectorQuery } from './projection-vector';\n\nconst MAX_SCORES = 8;\n\nfunction lerpColor(colorA: number, colorB: number, t: number): number {\n  const rA = (colorA >> 16) & 0xff;\n  const gA = (colorA >> 8) & 0xff;\n  const bA = colorA & 0xff;\n  const rB = (colorB >> 16) & 0xff;\n  const gB = (colorB >> 8) & 0xff;\n  const bB = colorB & 0xff;\n  const r = Math.round(rA + (rB - rA) * t);\n  const g = Math.round(gA + (gB - gA) * t);\n  const b = Math.round(bA + (bB - bA) * t);\n  return (r << 16) | (g << 8) | b;\n}\n\nexport const AttentionScoreConfig = GAME.defineComponent({\n  fontSize: GAME.Types.f32,\n  color: GAME.Types.ui32,\n  colorLow: GAME.Types.ui32,\n  colorHigh: GAME.Types.ui32,\n  offsetAboveK: GAME.Types.f32,\n  scores: [GAME.Types.f32, MAX_SCORES],\n  scoresSet: GAME.Types.ui8,\n});\n\nexport const AttentionScore = GAME.defineComponent({\n  driver: GAME.Types.eid,\n  textEntity: GAME.Types.eid,\n  rawScore: GAME.Types.f32,\n  softmaxScore: GAME.Types.f32,\n  growT: GAME.Types.f32,\n  colorT: GAME.Types.f32,\n  showSoftmax: GAME.Types.ui8,\n  initialized: GAME.Types.ui8,\n});\n\nexport const attentionScoreQuery = GAME.defineQuery([AttentionScore]);\n\nconst attentionScoreTokenQuery = GAME.defineQuery([\n  AttentionScore,\n  Token,\n  Transform,\n  ProjectionVector,\n]);\n\nfunction createTextEntity(\n  state: GAME.State,\n  parentEid: number,\n  color: number,\n  fontSize: number\n): number {\n  const eid = state.createEntity();\n  state.addComponent(eid, Transform, {\n    posX: 0,\n    posY: 0,\n    posZ: 0,\n    scaleX: 0,\n    scaleY: 0,\n    scaleZ: 0,\n  });\n  state.addComponent(eid, WorldTransform, {});\n  state.addComponent(eid, Parent, { entity: parentEid });\n  state.addComponent(eid, Word, {\n    fontSize,\n    color,\n    dirty: 1,\n  });\n  setTextContent(state, eid, '0');\n  return eid;\n}\n\nconst AttentionScoreSetupSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const tokenEid of projectionVectorQuery(state.world)) {\n      if (state.hasComponent(tokenEid, AttentionScore)) continue;\n      if (!state.hasComponent(tokenEid, Token)) continue;\n      if (Token.skipVector[tokenEid]) continue;\n\n      const driverEid = Token.driver[tokenEid];\n      if (!state.hasComponent(driverEid, AttentionScoreConfig)) continue;\n      if (!TokenDriver.layoutReady[driverEid]) continue;\n\n      state.addComponent(tokenEid, AttentionScore, {\n        driver: driverEid,\n        textEntity: 0,\n        rawScore: 0,\n        softmaxScore: 0,\n        growT: 0,\n        colorT: 0,\n        showSoftmax: 0,\n        initialized: 0,\n      });\n    }\n\n    for (const eid of attentionScoreTokenQuery(state.world)) {\n      if (AttentionScore.initialized[eid]) continue;\n      if (!ProjectionVector.initialized[eid]) continue;\n\n      const driverEid = AttentionScore.driver[eid];\n      const config = AttentionScoreConfig;\n      const fontSize = config.fontSize[driverEid];\n      const color = config.color[driverEid];\n\n      const textEntity = createTextEntity(state, eid, color, fontSize);\n      AttentionScore.textEntity[eid] = textEntity;\n\n      if (config.scoresSet[driverEid]) {\n        const index = Token.index[eid];\n        if (index < MAX_SCORES) {\n          const scoresArray = config.scores[driverEid];\n          const rawScore = scoresArray[index];\n          AttentionScore.rawScore[eid] = rawScore;\n\n          let total = 0;\n          for (let i = 0; i < MAX_SCORES; i++) {\n            total += scoresArray[i];\n          }\n          AttentionScore.softmaxScore[eid] = total > 0 ? rawScore / total : 0;\n        }\n      }\n\n      AttentionScore.initialized[eid] = 1;\n    }\n  },\n};\n\nconst AttentionScoreLayoutSystem: GAME.System = {\n  group: 'draw',\n  update(state) {\n    for (const eid of attentionScoreTokenQuery(state.world)) {\n      if (!AttentionScore.initialized[eid]) continue;\n\n      const driverEid = AttentionScore.driver[eid];\n      const offsetAboveK = AttentionScoreConfig.offsetAboveK[driverEid];\n\n      const kEntity = ProjectionVector.kEntity[eid];\n      const kGrowT = ProjectionVector.kGrowT[eid];\n      const kWorldY = WorldTransform.posY[kEntity];\n      const kScaleY = Transform.scaleY[kEntity];\n\n      const textEntity = AttentionScore.textEntity[eid];\n      const growT = AttentionScore.growT[eid];\n      const colorT = AttentionScore.colorT[eid];\n\n      Transform.posX[textEntity] = 0;\n      Transform.posY[textEntity] = kWorldY + kScaleY + offsetAboveK;\n      Transform.scaleX[textEntity] = growT * kGrowT;\n      Transform.scaleY[textEntity] = growT * kGrowT;\n      Transform.scaleZ[textEntity] = growT * kGrowT;\n\n      const showSoftmax = AttentionScore.showSoftmax[eid];\n      const rawScore = AttentionScore.rawScore[eid];\n      const softmaxScore = AttentionScore.softmaxScore[eid];\n\n      const displayValue = showSoftmax ? softmaxScore.toFixed(2) : String(Math.round(rawScore));\n      setTextContent(state, textEntity, displayValue);\n\n      if (colorT > 0) {\n        const colorLow = AttentionScoreConfig.colorLow[driverEid];\n        const colorHigh = AttentionScoreConfig.colorHigh[driverEid];\n        const scoreColor = lerpColor(colorLow, colorHigh, softmaxScore);\n        const baseColor = AttentionScoreConfig.color[driverEid];\n        Word.color[textEntity] = lerpColor(baseColor, scoreColor, colorT);\n      }\n    }\n  },\n};\n\nexport const AttentionScorePlugin: GAME.Plugin = {\n  components: { AttentionScoreConfig, AttentionScore },\n  systems: [AttentionScoreSetupSystem, AttentionScoreLayoutSystem],\n  config: {\n    defaults: {\n      'attention-score-config': {\n        fontSize: 0.5,\n        color: 0xffffff,\n        colorLow: 0x666666,\n        colorHigh: 0xff4444,\n        offsetAboveK: 0.3,\n      },\n      'attention-score': {\n        driver: 0,\n        textEntity: 0,\n        rawScore: 0,\n        softmaxScore: 0,\n        growT: 0,\n        colorT: 0,\n        showSoftmax: 0,\n        initialized: 0,\n      },\n    },\n  },\n};\n\nexport function addAttentionScoreConfig(\n  state: GAME.State,\n  driverEid: number,\n  options?: {\n    fontSize?: number;\n    color?: number;\n    colorLow?: number;\n    colorHigh?: number;\n    offsetAboveK?: number;\n  }\n): void {\n  state.addComponent(driverEid, AttentionScoreConfig, {\n    fontSize: options?.fontSize ?? 0.5,\n    color: options?.color ?? 0xffffff,\n    colorLow: options?.colorLow ?? 0x666666,\n    colorHigh: options?.colorHigh ?? 0xff4444,\n    offsetAboveK: options?.offsetAboveK ?? 0.3,\n  });\n}\n\nexport function setAttentionScores(state: GAME.State, driverEid: number, scores: number[]): void {\n  if (!state.hasComponent(driverEid, AttentionScoreConfig)) return;\n\n  const total = scores.reduce((a, b) => a + b, 0);\n\n  const scoresArray = AttentionScoreConfig.scores[driverEid];\n  for (let i = 0; i < Math.min(scores.length, MAX_SCORES); i++) {\n    scoresArray[i] = scores[i];\n  }\n  AttentionScoreConfig.scoresSet[driverEid] = 1;\n\n  for (const tokenEid of tokenQuery(state.world)) {\n    if (Token.driver[tokenEid] !== driverEid) continue;\n    if (!state.hasComponent(tokenEid, AttentionScore)) continue;\n\n    const index = Token.index[tokenEid];\n    if (index < scores.length) {\n      AttentionScore.rawScore[tokenEid] = scores[index];\n      AttentionScore.softmaxScore[tokenEid] = total > 0 ? scores[index] / total : 0;\n    }\n  }\n}\n","import * as GAME from 'vibegame';\nimport { Transform, WorldTransform } from 'vibegame/transforms';\nimport { Word, setTextContent } from 'vibegame/text';\nimport { createShaker, TransformShaker } from 'vibegame/tweening';\nimport { Token, TokenDriver, tokenQuery } from './token-display';\nimport { AttentionScore, attentionScoreQuery } from './attention-score';\nimport { ProjectionVector, projectionVectorQuery } from './projection-vector';\n\nexport const AttentionSumConfig = GAME.defineComponent({\n  fontSize: GAME.Types.f32,\n  color: GAME.Types.ui32,\n  plusOffsetX: GAME.Types.f32,\n  equalsOffsetX: GAME.Types.f32,\n  sumT: GAME.Types.f32,\n  vSumT: GAME.Types.f32,\n  vSumOffsetX: GAME.Types.f32,\n  vEqualsOffsetX: GAME.Types.f32,\n  initialized: GAME.Types.ui8,\n});\n\nexport const AttentionSum = GAME.defineComponent({\n  driver: GAME.Types.eid,\n  textEntity: GAME.Types.eid,\n  textShaker: GAME.Types.eid,\n  tokenIndex: GAME.Types.ui8,\n  isPlus: GAME.Types.ui8,\n  isEquals: GAME.Types.ui8,\n  isVEquals: GAME.Types.ui8,\n  initialized: GAME.Types.ui8,\n});\n\nexport const attentionSumQuery = GAME.defineQuery([AttentionSum]);\n\nconst attentionSumConfigQuery = GAME.defineQuery([AttentionSumConfig, TokenDriver]);\n\nfunction createTextEntity(\n  state: GAME.State,\n  color: number,\n  fontSize: number,\n  content: string\n): number {\n  const eid = state.createEntity();\n  state.addComponent(eid, Transform, {\n    posX: 0,\n    posY: 0,\n    posZ: 0,\n    scaleX: 1,\n    scaleY: 1,\n    scaleZ: 1,\n  });\n  state.addComponent(eid, WorldTransform, {});\n  state.addComponent(eid, Word, {\n    fontSize,\n    color,\n    dirty: 1,\n  });\n  setTextContent(state, eid, content);\n  return eid;\n}\n\nconst VISIBLE_INDICES = [0, 1, 2, 3];\n\nconst AttentionSumSetupSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const driverEid of attentionSumConfigQuery(state.world)) {\n      if (AttentionSumConfig.initialized[driverEid]) continue;\n      if (!TokenDriver.layoutReady[driverEid]) continue;\n\n      const fontSize = AttentionSumConfig.fontSize[driverEid];\n      const color = AttentionSumConfig.color[driverEid];\n\n      for (let i = 0; i < VISIBLE_INDICES.length - 1; i++) {\n        const plusEid = createTextEntity(state, color, fontSize, '+');\n        state.addComponent(plusEid, AttentionSum, {\n          driver: driverEid,\n          textEntity: plusEid,\n          textShaker: createShaker(state, plusEid, 'scale', {\n            value: 0,\n            intensity: 1,\n            mode: 'multiplicative',\n          }),\n          tokenIndex: i,\n          isPlus: 1,\n          isEquals: 0,\n          initialized: 1,\n        });\n      }\n\n      const equalsEid = createTextEntity(state, color, fontSize, '= 1');\n      state.addComponent(equalsEid, AttentionSum, {\n        driver: driverEid,\n        textEntity: equalsEid,\n        textShaker: createShaker(state, equalsEid, 'scale', {\n          value: 0,\n          intensity: 1,\n          mode: 'multiplicative',\n        }),\n        tokenIndex: VISIBLE_INDICES.length - 1,\n        isPlus: 0,\n        isEquals: 1,\n        isVEquals: 0,\n        initialized: 1,\n      });\n\n      const vEqualsEid = createTextEntity(state, color, fontSize, '=');\n      state.addComponent(vEqualsEid, AttentionSum, {\n        driver: driverEid,\n        textEntity: vEqualsEid,\n        textShaker: createShaker(state, vEqualsEid, 'scale', {\n          value: 0,\n          intensity: 1,\n          mode: 'multiplicative',\n        }),\n        tokenIndex: VISIBLE_INDICES.length - 1,\n        isPlus: 0,\n        isEquals: 0,\n        isVEquals: 1,\n        initialized: 1,\n      });\n\n      AttentionSumConfig.initialized[driverEid] = 1;\n    }\n  },\n};\n\nconst STAGGER_SPREAD = 0.2;\nconst STAGGER_OFFSETS = [0, 0.2, 0.4, 0.6];\n\nfunction clamp(value: number, min: number, max: number): number {\n  return Math.max(min, Math.min(max, value));\n}\n\nfunction getScoreTextWorldX(\n  state: GAME.State,\n  driverEid: number,\n  tokenIndex: number\n): number | null {\n  for (const tokenEid of tokenQuery(state.world)) {\n    if (Token.driver[tokenEid] !== driverEid) continue;\n    if (Token.index[tokenEid] !== tokenIndex) continue;\n    if (!state.hasComponent(tokenEid, AttentionScore)) continue;\n\n    const textEid = AttentionScore.textEntity[tokenEid];\n    return WorldTransform.posX[textEid];\n  }\n  return null;\n}\n\nfunction getScoreWorldY(state: GAME.State, driverEid: number): number | null {\n  for (const tokenEid of attentionScoreQuery(state.world)) {\n    if (!state.hasComponent(tokenEid, Token)) continue;\n    if (Token.driver[tokenEid] !== driverEid) continue;\n\n    const textEid = AttentionScore.textEntity[tokenEid];\n    return WorldTransform.posY[textEid];\n  }\n  return null;\n}\n\nfunction getVVectorWorldX(state: GAME.State, driverEid: number, tokenIndex: number): number | null {\n  for (const tokenEid of projectionVectorQuery(state.world)) {\n    if (!state.hasComponent(tokenEid, Token)) continue;\n    if (Token.driver[tokenEid] !== driverEid) continue;\n    if (Token.index[tokenEid] !== tokenIndex) continue;\n\n    const vEntity = ProjectionVector.vEntity[tokenEid];\n    return WorldTransform.posX[vEntity];\n  }\n  return null;\n}\n\nfunction getVVectorWorldY(state: GAME.State, driverEid: number): number | null {\n  for (const tokenEid of projectionVectorQuery(state.world)) {\n    if (!state.hasComponent(tokenEid, Token)) continue;\n    if (Token.driver[tokenEid] !== driverEid) continue;\n\n    const vEntity = ProjectionVector.vEntity[tokenEid];\n    return WorldTransform.posY[vEntity];\n  }\n  return null;\n}\n\nconst AttentionSumLayoutSystem: GAME.System = {\n  group: 'draw',\n  update(state) {\n    for (const eid of attentionSumQuery(state.world)) {\n      if (!AttentionSum.initialized[eid]) continue;\n\n      const driverEid = AttentionSum.driver[eid];\n      const sumT = AttentionSumConfig.sumT[driverEid];\n      const vSumT = AttentionSumConfig.vSumT[driverEid];\n      const equalsOffsetX = AttentionSumConfig.equalsOffsetX[driverEid];\n      const vSumOffsetX = AttentionSumConfig.vSumOffsetX[driverEid];\n      const vEqualsOffsetX = AttentionSumConfig.vEqualsOffsetX[driverEid];\n\n      const tokenIndex = AttentionSum.tokenIndex[eid];\n      const isPlus = AttentionSum.isPlus[eid];\n      const isEquals = AttentionSum.isEquals[eid];\n      const isVEquals = AttentionSum.isVEquals[eid];\n      const textEid = AttentionSum.textEntity[eid];\n\n      if (vSumT > sumT) {\n        const vWorldY = getVVectorWorldY(state, driverEid);\n        if (vWorldY === null) continue;\n\n        if (isPlus || isVEquals) {\n          const staggerOffset = STAGGER_OFFSETS[tokenIndex] ?? 0;\n          const elementT = clamp((vSumT - staggerOffset) / STAGGER_SPREAD, 0, 1);\n          TransformShaker.intensity[AttentionSum.textShaker[eid]] = 1 - elementT;\n\n          if (isPlus) {\n            const thisX = getVVectorWorldX(state, driverEid, VISIBLE_INDICES[tokenIndex]);\n            const nextX = getVVectorWorldX(state, driverEid, VISIBLE_INDICES[tokenIndex + 1]);\n            if (thisX !== null && nextX !== null) {\n              Transform.posX[textEid] = (thisX + nextX) / 2 + vSumOffsetX;\n              Transform.posY[textEid] = vWorldY;\n            }\n          } else if (isVEquals) {\n            const lastX = getVVectorWorldX(\n              state,\n              driverEid,\n              VISIBLE_INDICES[VISIBLE_INDICES.length - 1]\n            );\n            if (lastX !== null) {\n              Transform.posX[textEid] = lastX + vEqualsOffsetX;\n              Transform.posY[textEid] = vWorldY;\n            }\n          }\n        } else if (isEquals) {\n          TransformShaker.intensity[AttentionSum.textShaker[eid]] = 1;\n        }\n      } else {\n        if (isPlus || isEquals) {\n          const staggerOffset = STAGGER_OFFSETS[tokenIndex] ?? 0;\n          const elementT = clamp((sumT - staggerOffset) / STAGGER_SPREAD, 0, 1);\n          TransformShaker.intensity[AttentionSum.textShaker[eid]] = 1 - elementT;\n\n          const worldY = getScoreWorldY(state, driverEid);\n          if (worldY === null) continue;\n\n          if (isPlus) {\n            const thisX = getScoreTextWorldX(state, driverEid, VISIBLE_INDICES[tokenIndex]);\n            const nextX = getScoreTextWorldX(state, driverEid, VISIBLE_INDICES[tokenIndex + 1]);\n            const plusOffsetX = AttentionSumConfig.plusOffsetX[driverEid];\n            if (thisX !== null && nextX !== null) {\n              Transform.posX[textEid] = (thisX + nextX) / 2 + plusOffsetX;\n              Transform.posY[textEid] = worldY;\n            }\n          } else if (isEquals) {\n            const lastX = getScoreTextWorldX(\n              state,\n              driverEid,\n              VISIBLE_INDICES[VISIBLE_INDICES.length - 1]\n            );\n            if (lastX !== null) {\n              Transform.posX[textEid] = lastX + equalsOffsetX;\n              Transform.posY[textEid] = worldY;\n            }\n          }\n        } else if (isVEquals) {\n          TransformShaker.intensity[AttentionSum.textShaker[eid]] = 1;\n        }\n      }\n    }\n  },\n};\n\nexport const AttentionSumPlugin: GAME.Plugin = {\n  components: { AttentionSumConfig, AttentionSum },\n  systems: [AttentionSumSetupSystem, AttentionSumLayoutSystem],\n  config: {\n    defaults: {\n      'attention-sum-config': {\n        fontSize: 0.5,\n        color: 0xffffff,\n        plusOffsetX: 0,\n        equalsOffsetX: 0.7,\n        sumT: 0,\n        vSumT: 0,\n        vSumOffsetX: 0,\n        vEqualsOffsetX: 0.7,\n        initialized: 0,\n      },\n      'attention-sum': {\n        driver: 0,\n        textEntity: 0,\n        textShaker: 0,\n        tokenIndex: 0,\n        isPlus: 0,\n        isEquals: 0,\n        isVEquals: 0,\n        initialized: 0,\n      },\n    },\n  },\n};\n\nexport function addAttentionSumConfig(\n  state: GAME.State,\n  driverEid: number,\n  options?: {\n    fontSize?: number;\n    color?: number;\n    plusOffsetX?: number;\n    equalsOffsetX?: number;\n    vSumOffsetX?: number;\n    vEqualsOffsetX?: number;\n  }\n): void {\n  state.addComponent(driverEid, AttentionSumConfig, {\n    fontSize: options?.fontSize ?? 0.5,\n    color: options?.color ?? 0xffffff,\n    plusOffsetX: options?.plusOffsetX ?? 0,\n    equalsOffsetX: options?.equalsOffsetX ?? 0.7,\n    sumT: 0,\n    vSumT: 0,\n    vSumOffsetX: options?.vSumOffsetX ?? 0,\n    vEqualsOffsetX: options?.vEqualsOffsetX ?? 0.7,\n    initialized: 0,\n  });\n}\n","import * as GAME from 'vibegame';\nimport { Transform, WorldTransform } from 'vibegame/transforms';\nimport { Line } from 'vibegame/line';\nimport { TransformShaker } from 'vibegame/tweening';\nimport { Token, TokenDriver, TokenBox, tokenQuery, TokenBoxLayoutSystem } from './token-display';\nimport { TokenArrow, tokenArrowQuery, TokenArrowDriverSystem } from './token-arrow';\nimport { TokenVector, TokenVectorDriverSystem, tokenVectorQuery } from './token-vector';\nimport {\n  ProjectionVector,\n  ProjectionVectorConfig,\n  ProjectionVectorDriverSystem,\n  projectionVectorQuery,\n} from './projection-vector';\nimport { AttentionScore, AttentionScoreConfig, attentionScoreQuery } from './attention-score';\nimport { AttentionSumConfig } from './attention-sum';\n\nexport const TokenSwapDriver = GAME.defineComponent({\n  emergenceT: GAME.Types.f32,\n  joinT: GAME.Types.f32,\n  hotLayoutT: GAME.Types.f32,\n  hotT: GAME.Types.f32,\n  networkX: GAME.Types.f32,\n  networkY: GAME.Types.f32,\n  borderColor: GAME.Types.ui32,\n  barkingToken: GAME.Types.eid,\n  hotToken: GAME.Types.eid,\n  dogToken: GAME.Types.eid,\n  baseVectorT: GAME.Types.f32,\n  dogVectorT: GAME.Types.f32,\n  hotVectorT: GAME.Types.f32,\n  combineT: GAME.Types.f32,\n  dogQT: GAME.Types.f32,\n  dogKT: GAME.Types.f32,\n  dogVT: GAME.Types.f32,\n  hotQT: GAME.Types.f32,\n  hotKT: GAME.Types.f32,\n  hotVT: GAME.Types.f32,\n  baseQT: GAME.Types.f32,\n  qStaggerT: GAME.Types.f32,\n  baseKT: GAME.Types.f32,\n  baseVT: GAME.Types.f32,\n  qSquishT: GAME.Types.f32,\n  kSquishT: GAME.Types.f32,\n  vSquishT: GAME.Types.f32,\n  hotScoreT: GAME.Types.f32,\n  allScoresT: GAME.Types.f32,\n  softmaxT: GAME.Types.f32,\n  sumT: GAME.Types.f32,\n  vSumT: GAME.Types.f32,\n  scoreColorT: GAME.Types.f32,\n  vOffsetT: GAME.Types.f32,\n  vectorStaggerT: GAME.Types.f32,\n  vectorFlickerT: GAME.Types.f32,\n  initialized: GAME.Types.ui8,\n  borderColorApplied: GAME.Types.ui8,\n});\n\nconst tokenSwapDriverQuery = GAME.defineQuery([TokenSwapDriver]);\n\nconst TokenSwapDriverSystem: GAME.System = {\n  group: 'simulation',\n  after: [\n    TokenBoxLayoutSystem,\n    TokenArrowDriverSystem,\n    TokenVectorDriverSystem,\n    ProjectionVectorDriverSystem,\n  ],\n  update(state) {\n    for (const driverEid of tokenSwapDriverQuery(state.world)) {\n      if (!TokenSwapDriver.initialized[driverEid]) {\n        for (const tokenEid of tokenQuery(state.world)) {\n          if (Token.driver[tokenEid] !== driverEid) continue;\n          const index = Token.index[tokenEid];\n\n          if (index === 4) {\n            TokenSwapDriver.barkingToken[driverEid] = tokenEid;\n            Token.layoutScale[tokenEid] = 0;\n            Token.skipArrow[tokenEid] = 1;\n            Token.skipVector[tokenEid] = 1;\n            Transform.scaleX[tokenEid] = 0;\n            Transform.scaleY[tokenEid] = 0;\n            Transform.scaleZ[tokenEid] = 0;\n            Transform.posX[tokenEid] = TokenSwapDriver.networkX[driverEid];\n            Transform.posY[tokenEid] = TokenSwapDriver.networkY[driverEid];\n          } else if (index === 1) {\n            TokenSwapDriver.hotToken[driverEid] = tokenEid;\n            Token.layoutScale[tokenEid] = 0;\n            Transform.scaleX[tokenEid] = 0;\n            Transform.scaleY[tokenEid] = 0;\n            Transform.scaleZ[tokenEid] = 0;\n          } else if (index === 2) {\n            TokenSwapDriver.dogToken[driverEid] = tokenEid;\n          }\n        }\n        TokenSwapDriver.initialized[driverEid] = 1;\n      }\n\n      const barkingEid = TokenSwapDriver.barkingToken[driverEid];\n      if (barkingEid === 0) continue;\n\n      const emergenceT = TokenSwapDriver.emergenceT[driverEid];\n      const borderColor = TokenSwapDriver.borderColor[driverEid];\n\n      if (state.hasComponent(barkingEid, TokenBox) && TokenBox.initialized[barkingEid]) {\n        const showBorder = emergenceT > 0 ? 1 : 0;\n        TokenBox.showTop[barkingEid] = showBorder;\n        TokenBox.showRight[barkingEid] = showBorder;\n        TokenBox.showBottom[barkingEid] = showBorder;\n        TokenBox.showLeft[barkingEid] = showBorder;\n\n        if (borderColor !== 0 && !TokenSwapDriver.borderColorApplied[driverEid]) {\n          Line.color[TokenBox.lineTop[barkingEid]] = borderColor;\n          Line.color[TokenBox.lineRight[barkingEid]] = borderColor;\n          Line.color[TokenBox.lineBottom[barkingEid]] = borderColor;\n          Line.color[TokenBox.lineLeft[barkingEid]] = borderColor;\n          TokenSwapDriver.borderColorApplied[driverEid] = 1;\n        }\n      }\n\n      const joinT = TokenSwapDriver.joinT[driverEid];\n      const networkX = TokenSwapDriver.networkX[driverEid];\n      const networkY = TokenSwapDriver.networkY[driverEid];\n      const layoutX = Token.separatedX[barkingEid];\n      const layoutY = TokenDriver.separatedY[driverEid];\n\n      Transform.scaleX[barkingEid] = emergenceT;\n      Transform.scaleY[barkingEid] = emergenceT;\n      Transform.scaleZ[barkingEid] = emergenceT;\n\n      Token.layoutScale[barkingEid] = joinT > 0 ? 1 : 0;\n\n      if (joinT < 1) {\n        Transform.posX[barkingEid] = networkX + (layoutX - networkX) * joinT;\n        Transform.posY[barkingEid] = networkY + (layoutY - networkY) * joinT;\n      }\n\n      const hotEid = TokenSwapDriver.hotToken[driverEid];\n      if (hotEid !== 0) {\n        const hotLayoutT = TokenSwapDriver.hotLayoutT[driverEid];\n        const hotT = TokenSwapDriver.hotT[driverEid];\n\n        Transform.scaleX[hotEid] = hotT;\n        Transform.scaleY[hotEid] = hotT;\n        Transform.scaleZ[hotEid] = hotT;\n\n        Token.layoutScale[hotEid] = hotLayoutT > 0 ? 1 : 0;\n\n        Transform.posX[hotEid] = Token.separatedX[hotEid];\n        Transform.posY[hotEid] = TokenDriver.separatedY[driverEid];\n\n        if (state.hasComponent(hotEid, TokenBox) && TokenBox.initialized[hotEid]) {\n          const showBorder = hotT > 0 ? 1 : 0;\n          TokenBox.showTop[hotEid] = showBorder;\n          TokenBox.showRight[hotEid] = showBorder;\n          TokenBox.showBottom[hotEid] = showBorder;\n          TokenBox.showLeft[hotEid] = showBorder;\n        }\n      }\n\n      const dogEid = TokenSwapDriver.dogToken[driverEid];\n      const hotT = TokenSwapDriver.hotT[driverEid];\n      const baseVectorT = TokenSwapDriver.baseVectorT[driverEid];\n      const dogVectorT = TokenSwapDriver.dogVectorT[driverEid];\n      const hotVectorT = TokenSwapDriver.hotVectorT[driverEid];\n\n      for (const tokenEid of tokenVectorQuery(state.world)) {\n        if (Token.driver[tokenEid] !== driverEid) continue;\n\n        let targetGrowT: number;\n        if (tokenEid === dogEid) {\n          targetGrowT = Math.max(baseVectorT, dogVectorT);\n        } else if (tokenEid === hotEid) {\n          targetGrowT = Math.max(baseVectorT, hotVectorT) * hotT;\n        } else {\n          targetGrowT = baseVectorT;\n        }\n        TokenVector.growT[tokenEid] = targetGrowT;\n      }\n\n      for (const tokenEid of tokenArrowQuery(state.world)) {\n        if (Token.driver[tokenEid] !== driverEid) continue;\n\n        let targetGrowT: number;\n        if (tokenEid === dogEid) {\n          targetGrowT = Math.max(baseVectorT, dogVectorT);\n        } else if (tokenEid === hotEid) {\n          targetGrowT = Math.max(baseVectorT, hotVectorT) * hotT;\n        } else {\n          targetGrowT = baseVectorT;\n        }\n        TokenArrow.growT[tokenEid] = targetGrowT;\n      }\n\n      const combineT = TokenSwapDriver.combineT[driverEid];\n      if (combineT > 0 && dogEid !== 0 && hotEid !== 0) {\n        const dogShakerX = TokenVector.shakerX[dogEid];\n        const hotShakerX = TokenVector.shakerX[hotEid];\n        const dogBoxEid = TokenVector.boxEntity[dogEid];\n        const hotBoxEid = TokenVector.boxEntity[hotEid];\n\n        if (dogShakerX && hotShakerX && dogBoxEid && hotBoxEid) {\n          const dogWorldX = WorldTransform.posX[dogBoxEid];\n          const hotWorldX = WorldTransform.posX[hotBoxEid];\n          const midX = (dogWorldX + hotWorldX) / 2;\n\n          TransformShaker.value[dogShakerX] = midX - dogWorldX;\n          TransformShaker.intensity[dogShakerX] = combineT;\n          TransformShaker.value[hotShakerX] = midX - hotWorldX;\n          TransformShaker.intensity[hotShakerX] = combineT;\n        }\n      } else if (dogEid !== 0 && hotEid !== 0) {\n        const dogShakerX = TokenVector.shakerX[dogEid];\n        const hotShakerX = TokenVector.shakerX[hotEid];\n        if (dogShakerX && hotShakerX) {\n          TransformShaker.intensity[dogShakerX] = 0;\n          TransformShaker.intensity[hotShakerX] = 0;\n        }\n      }\n\n      const dogQT = TokenSwapDriver.dogQT[driverEid];\n      const dogKT = TokenSwapDriver.dogKT[driverEid];\n      const dogVT = TokenSwapDriver.dogVT[driverEid];\n      const hotQT = TokenSwapDriver.hotQT[driverEid];\n      const hotKT = TokenSwapDriver.hotKT[driverEid];\n      const hotVT = TokenSwapDriver.hotVT[driverEid];\n      const baseQT = TokenSwapDriver.baseQT[driverEid];\n      const qStaggerT = TokenSwapDriver.qStaggerT[driverEid];\n      const baseKT = TokenSwapDriver.baseKT[driverEid];\n      const baseVT = TokenSwapDriver.baseVT[driverEid];\n\n      for (const tokenEid of projectionVectorQuery(state.world)) {\n        if (!state.hasComponent(tokenEid, Token)) continue;\n        if (Token.driver[tokenEid] !== driverEid) continue;\n\n        const index = Token.index[tokenEid];\n        let qT: number, kT: number, vT: number;\n        if (tokenEid === dogEid) {\n          qT = Math.max(baseQT, dogQT);\n          kT = Math.max(baseKT, dogKT);\n          vT = Math.max(baseVT, dogVT);\n        } else if (tokenEid === hotEid) {\n          qT = Math.max(baseQT, hotQT) * hotT;\n          kT = Math.max(baseKT, hotKT) * hotT;\n          vT = Math.max(baseVT, hotVT) * hotT;\n        } else {\n          qT = baseQT;\n          kT = baseKT;\n          vT = baseVT;\n        }\n        if (qStaggerT > 0) {\n          const staggerOffset = index * 0.1;\n          const staggeredQ = Math.max(0, Math.min(1, (qStaggerT - staggerOffset) / 0.6));\n          qT = Math.max(qT, staggeredQ);\n        }\n        ProjectionVector.qGrowT[tokenEid] = qT;\n        ProjectionVector.kGrowT[tokenEid] = kT;\n        ProjectionVector.vGrowT[tokenEid] = vT;\n        ProjectionVector.qSquishT[tokenEid] = TokenSwapDriver.qSquishT[driverEid];\n        ProjectionVector.kSquishT[tokenEid] = TokenSwapDriver.kSquishT[driverEid];\n        ProjectionVector.vSquishT[tokenEid] = TokenSwapDriver.vSquishT[driverEid];\n      }\n\n      const hotScoreT = TokenSwapDriver.hotScoreT[driverEid];\n      const allScoresT = TokenSwapDriver.allScoresT[driverEid];\n      const softmaxT = TokenSwapDriver.softmaxT[driverEid];\n      const scoreColorT = TokenSwapDriver.scoreColorT[driverEid];\n\n      for (const tokenEid of attentionScoreQuery(state.world)) {\n        if (!state.hasComponent(tokenEid, Token)) continue;\n        if (Token.driver[tokenEid] !== driverEid) continue;\n\n        const index = Token.index[tokenEid];\n        let growT: number;\n        if (tokenEid === hotEid) {\n          growT = hotScoreT;\n        } else if (index === 0 || index === 2 || index === 3) {\n          growT = allScoresT;\n        } else {\n          growT = 0;\n        }\n        AttentionScore.growT[tokenEid] = growT;\n        AttentionScore.showSoftmax[tokenEid] = softmaxT > 0.5 ? 1 : 0;\n        AttentionScore.colorT[tokenEid] = scoreColorT;\n      }\n\n      const sumT = TokenSwapDriver.sumT[driverEid];\n      const vSumT = TokenSwapDriver.vSumT[driverEid];\n      if (state.hasComponent(driverEid, AttentionSumConfig)) {\n        AttentionSumConfig.sumT[driverEid] = sumT;\n        AttentionSumConfig.vSumT[driverEid] = vSumT;\n      }\n\n      const vOffsetT = TokenSwapDriver.vOffsetT[driverEid];\n      if (vOffsetT > 0) {\n        const vectorHeight = ProjectionVectorConfig.vectorHeight[driverEid];\n        const offsetAboveK = AttentionScoreConfig.offsetAboveK[driverEid];\n\n        for (const tokenEid of projectionVectorQuery(state.world)) {\n          if (!state.hasComponent(tokenEid, Token)) continue;\n          if (Token.driver[tokenEid] !== driverEid) continue;\n          if (!ProjectionVector.initialized[tokenEid]) continue;\n\n          const vShakerX = ProjectionVector.vShakerX[tokenEid];\n          const vShakerY = ProjectionVector.vShakerY[tokenEid];\n          if (!vShakerX || !vShakerY) continue;\n\n          const kGrowT = ProjectionVector.kGrowT[tokenEid];\n          const kScaleY = kGrowT * (1 - ProjectionVector.kSquishT[tokenEid] * 0.5);\n          const yDelta = (vectorHeight / 2) * kScaleY + offsetAboveK;\n          const xDelta = 0.3;\n\n          TransformShaker.value[vShakerX] = xDelta;\n          TransformShaker.intensity[vShakerX] = vOffsetT;\n          TransformShaker.value[vShakerY] = yDelta;\n          TransformShaker.intensity[vShakerY] = vOffsetT;\n        }\n      } else {\n        for (const tokenEid of projectionVectorQuery(state.world)) {\n          if (!state.hasComponent(tokenEid, Token)) continue;\n          if (Token.driver[tokenEid] !== driverEid) continue;\n          if (!ProjectionVector.initialized[tokenEid]) continue;\n\n          const vShakerX = ProjectionVector.vShakerX[tokenEid];\n          const vShakerY = ProjectionVector.vShakerY[tokenEid];\n          if (vShakerX) TransformShaker.intensity[vShakerX] = 0;\n          if (vShakerY) TransformShaker.intensity[vShakerY] = 0;\n        }\n      }\n\n      const vectorStaggerT = TokenSwapDriver.vectorStaggerT[driverEid];\n      const vectorFlickerT = TokenSwapDriver.vectorFlickerT[driverEid];\n      for (const tokenEid of tokenVectorQuery(state.world)) {\n        if (Token.driver[tokenEid] !== driverEid) continue;\n        if (!TokenVector.initialized[tokenEid]) continue;\n\n        const shakerScale = TokenVector.shakerScale[tokenEid];\n        if (shakerScale) {\n          const index = Token.index[tokenEid];\n          const staggerOffset = index * 0.15;\n          const staggeredIntensity = Math.max(\n            0,\n            Math.min(1, (vectorStaggerT - staggerOffset) / 0.3)\n          );\n          const pulseIntensity =\n            staggeredIntensity < 0.5 ? staggeredIntensity * 2 : (1 - staggeredIntensity) * 2;\n          TransformShaker.intensity[shakerScale] = pulseIntensity;\n        }\n\n        if (vectorFlickerT > 0) {\n          const index = Token.index[tokenEid];\n          const primes = [7, 11, 13, 17, 19, 23, 29, 31];\n          const prime = primes[index % primes.length];\n          const phase = (vectorFlickerT * prime * 3) % 1;\n          const flickerOn = phase < 0.3;\n          TokenVector.colorT[tokenEid] = flickerOn ? 1 : 0;\n        } else {\n          TokenVector.colorT[tokenEid] = 0;\n        }\n      }\n    }\n  },\n};\n\nexport const TokenSwapDriverPlugin: GAME.Plugin = {\n  components: { TokenSwapDriver },\n  systems: [TokenSwapDriverSystem],\n  config: {\n    defaults: {\n      'token-swap-driver': {\n        emergenceT: 0,\n        joinT: 0,\n        hotLayoutT: 0,\n        hotT: 0,\n        networkX: 7,\n        networkY: -15,\n        borderColor: 0,\n        barkingToken: 0,\n        hotToken: 0,\n        dogToken: 0,\n        baseVectorT: 0,\n        dogVectorT: 0,\n        hotVectorT: 0,\n        combineT: 0,\n        dogQT: 0,\n        dogKT: 0,\n        dogVT: 0,\n        hotQT: 0,\n        hotKT: 0,\n        hotVT: 0,\n        baseQT: 0,\n        qStaggerT: 0,\n        baseKT: 0,\n        baseVT: 0,\n        qSquishT: 0,\n        kSquishT: 0,\n        vSquishT: 0,\n        hotScoreT: 0,\n        allScoresT: 0,\n        softmaxT: 0,\n        sumT: 0,\n        vSumT: 0,\n        scoreColorT: 0,\n        vOffsetT: 0,\n        vectorStaggerT: 0,\n        vectorFlickerT: 0,\n        initialized: 0,\n        borderColorApplied: 0,\n      },\n    },\n  },\n};\n","import * as GAME from 'vibegame';\nimport { Transform, WorldTransform, Parent } from 'vibegame/transforms';\nimport { Line } from 'vibegame/line';\nimport { Word, setTextContent } from 'vibegame/text';\n\nexport const BracketVector = GAME.defineComponent({\n  value1: GAME.Types.f32,\n  value2: GAME.Types.f32,\n  value3: GAME.Types.f32,\n  color: GAME.Types.ui32,\n  bracketHeight: GAME.Types.f32,\n  bracketWidth: GAME.Types.f32,\n  fontSize: GAME.Types.f32,\n  growT: GAME.Types.f32,\n  leftTopLine: GAME.Types.eid,\n  leftBottomLine: GAME.Types.eid,\n  leftVerticalLine: GAME.Types.eid,\n  rightTopLine: GAME.Types.eid,\n  rightBottomLine: GAME.Types.eid,\n  rightVerticalLine: GAME.Types.eid,\n  text1Entity: GAME.Types.eid,\n  text2Entity: GAME.Types.eid,\n  text3Entity: GAME.Types.eid,\n  initialized: GAME.Types.ui8,\n});\n\nconst bracketVectorQuery = GAME.defineQuery([BracketVector, Transform]);\n\nfunction createLineEntity(\n  state: GAME.State,\n  parentEid: number,\n  color: number,\n  thickness: number\n): number {\n  const eid = state.createEntity();\n  state.addComponent(eid, Transform, { posX: 0, posY: 0, posZ: 0 });\n  state.addComponent(eid, WorldTransform, {});\n  state.addComponent(eid, Parent, { entity: parentEid });\n  state.addComponent(eid, Line, {\n    offsetX: 0,\n    offsetY: 0,\n    offsetZ: 0,\n    color,\n    thickness,\n    opacity: 1,\n    arrowEnd: 0,\n    arrowStart: 0,\n    arrowSize: 0,\n    visible: 1,\n  });\n  return eid;\n}\n\nfunction createTextEntity(\n  state: GAME.State,\n  parentEid: number,\n  color: number,\n  fontSize: number,\n  content: string\n): number {\n  const eid = state.createEntity();\n  state.addComponent(eid, Transform, { posX: 0, posY: 0, posZ: 0 });\n  state.addComponent(eid, WorldTransform, {});\n  state.addComponent(eid, Parent, { entity: parentEid });\n  state.addComponent(eid, Word, {\n    fontSize,\n    color,\n    dirty: 1,\n  });\n  setTextContent(state, eid, content);\n  return eid;\n}\n\nconst BracketVectorSetupSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of bracketVectorQuery(state.world)) {\n      if (BracketVector.initialized[eid]) continue;\n\n      const color = BracketVector.color[eid];\n      const fontSize = BracketVector.fontSize[eid];\n      const thickness = 2;\n\n      BracketVector.leftTopLine[eid] = createLineEntity(state, eid, color, thickness);\n      BracketVector.leftBottomLine[eid] = createLineEntity(state, eid, color, thickness);\n      BracketVector.leftVerticalLine[eid] = createLineEntity(state, eid, color, thickness);\n      BracketVector.rightTopLine[eid] = createLineEntity(state, eid, color, thickness);\n      BracketVector.rightBottomLine[eid] = createLineEntity(state, eid, color, thickness);\n      BracketVector.rightVerticalLine[eid] = createLineEntity(state, eid, color, thickness);\n\n      const value1 = BracketVector.value1[eid];\n      const value2 = BracketVector.value2[eid];\n      const value3 = BracketVector.value3[eid];\n      BracketVector.text1Entity[eid] = createTextEntity(\n        state,\n        eid,\n        color,\n        fontSize,\n        String(value1)\n      );\n      BracketVector.text2Entity[eid] = createTextEntity(\n        state,\n        eid,\n        color,\n        fontSize,\n        String(value2)\n      );\n      BracketVector.text3Entity[eid] = createTextEntity(\n        state,\n        eid,\n        color,\n        fontSize,\n        String(value3)\n      );\n\n      BracketVector.initialized[eid] = 1;\n    }\n  },\n};\n\nconst BracketVectorLayoutSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of bracketVectorQuery(state.world)) {\n      if (!BracketVector.initialized[eid]) continue;\n\n      const bracketHeight = BracketVector.bracketHeight[eid];\n      const bracketWidth = BracketVector.bracketWidth[eid];\n      const growT = BracketVector.growT[eid];\n\n      const halfHeight = (bracketHeight / 2) * growT;\n      const hookSize = bracketWidth * 0.15;\n      const lineVisible = growT > 0 ? 1 : 0;\n\n      const leftTop = BracketVector.leftTopLine[eid];\n      const leftBottom = BracketVector.leftBottomLine[eid];\n      const leftVertical = BracketVector.leftVerticalLine[eid];\n      const rightTop = BracketVector.rightTopLine[eid];\n      const rightBottom = BracketVector.rightBottomLine[eid];\n      const rightVertical = BracketVector.rightVerticalLine[eid];\n      const text1 = BracketVector.text1Entity[eid];\n      const text2 = BracketVector.text2Entity[eid];\n\n      Transform.posX[leftTop] = -bracketWidth / 2;\n      Transform.posY[leftTop] = halfHeight;\n      Line.offsetX[leftTop] = hookSize * growT;\n      Line.offsetY[leftTop] = 0;\n      Line.visible[leftTop] = lineVisible;\n\n      Transform.posX[leftBottom] = -bracketWidth / 2;\n      Transform.posY[leftBottom] = -halfHeight;\n      Line.offsetX[leftBottom] = hookSize * growT;\n      Line.offsetY[leftBottom] = 0;\n      Line.visible[leftBottom] = lineVisible;\n\n      Transform.posX[leftVertical] = -bracketWidth / 2;\n      Transform.posY[leftVertical] = -halfHeight;\n      Line.offsetX[leftVertical] = 0;\n      Line.offsetY[leftVertical] = bracketHeight * growT;\n      Line.visible[leftVertical] = lineVisible;\n\n      Transform.posX[rightTop] = bracketWidth / 2;\n      Transform.posY[rightTop] = halfHeight;\n      Line.offsetX[rightTop] = -hookSize * growT;\n      Line.offsetY[rightTop] = 0;\n      Line.visible[rightTop] = lineVisible;\n\n      Transform.posX[rightBottom] = bracketWidth / 2;\n      Transform.posY[rightBottom] = -halfHeight;\n      Line.offsetX[rightBottom] = -hookSize * growT;\n      Line.offsetY[rightBottom] = 0;\n      Line.visible[rightBottom] = lineVisible;\n\n      Transform.posX[rightVertical] = bracketWidth / 2;\n      Transform.posY[rightVertical] = -halfHeight;\n      Line.offsetX[rightVertical] = 0;\n      Line.offsetY[rightVertical] = bracketHeight * growT;\n      Line.visible[rightVertical] = lineVisible;\n\n      const text3 = BracketVector.text3Entity[eid];\n      const rowSpacing = (bracketHeight / 3) * growT;\n      Transform.posY[text1] = rowSpacing;\n      Transform.posY[text2] = 0;\n      Transform.posY[text3] = -rowSpacing;\n      Transform.scaleX[text1] = growT;\n      Transform.scaleY[text1] = growT;\n      Transform.scaleX[text2] = growT;\n      Transform.scaleY[text2] = growT;\n      Transform.scaleX[text3] = growT;\n      Transform.scaleY[text3] = growT;\n    }\n  },\n};\n\nexport const BracketVectorPlugin: GAME.Plugin = {\n  components: { BracketVector },\n  systems: [BracketVectorSetupSystem, BracketVectorLayoutSystem],\n  config: {\n    defaults: {\n      'bracket-vector': {\n        value1: 0,\n        value2: 0,\n        value3: 0,\n        color: 0xffffff,\n        bracketHeight: 2,\n        bracketWidth: 1,\n        fontSize: 0.5,\n        growT: 0,\n        leftTopLine: 0,\n        leftBottomLine: 0,\n        leftVerticalLine: 0,\n        rightTopLine: 0,\n        rightBottomLine: 0,\n        rightVerticalLine: 0,\n        text1Entity: 0,\n        text2Entity: 0,\n        text3Entity: 0,\n        initialized: 0,\n      },\n    },\n  },\n};\n","import * as GAME from 'vibegame';\nimport { Transform, WorldTransform, Parent } from 'vibegame/transforms';\nimport { Word, setTextContent } from 'vibegame/text';\nimport { createShaker, TransformShaker } from 'vibegame/tweening';\n\nexport const DotProduct = GAME.defineComponent({\n  transitionT: GAME.Types.f32,\n  sumT: GAME.Types.f32,\n  sumBounceT: GAME.Types.f32,\n  mult1: GAME.Types.eid,\n  mult2: GAME.Types.eid,\n  mult3: GAME.Types.eid,\n  mult1Shaker: GAME.Types.eid,\n  mult2Shaker: GAME.Types.eid,\n  mult3Shaker: GAME.Types.eid,\n  eq1: GAME.Types.eid,\n  eq2: GAME.Types.eid,\n  eq3: GAME.Types.eid,\n  eq1Shaker: GAME.Types.eid,\n  eq2Shaker: GAME.Types.eid,\n  eq3Shaker: GAME.Types.eid,\n  sum: GAME.Types.eid,\n  sumShaker: GAME.Types.eid,\n  color: GAME.Types.ui32,\n  fontSize: GAME.Types.f32,\n  rowHeight: GAME.Types.f32,\n  initialized: GAME.Types.ui8,\n});\n\nconst dotProductQuery = GAME.defineQuery([DotProduct, Transform]);\n\nfunction createTextEntity(\n  state: GAME.State,\n  parentEid: number,\n  color: number,\n  fontSize: number,\n  content: string,\n  posX: number,\n  posY: number\n): number {\n  const eid = state.createEntity();\n  state.addComponent(eid, Transform, {\n    posX,\n    posY,\n    posZ: 0,\n    scaleX: 1,\n    scaleY: 1,\n    scaleZ: 1,\n  });\n  state.addComponent(eid, WorldTransform, {});\n  state.addComponent(eid, Parent, { entity: parentEid });\n  state.addComponent(eid, Word, {\n    fontSize,\n    color,\n    dirty: 1,\n  });\n  setTextContent(state, eid, content);\n  return eid;\n}\n\nconst MULT_OFFSET_X = 1.5;\nconst EQ_OFFSET_X = 4.5;\n\nconst OFFSETS = {\n  mult1: 0.0,\n  eq1: 0.08,\n  mult2: 0.16,\n  eq2: 0.24,\n  mult3: 0.32,\n  eq3: 0.4,\n};\n\nconst SPREAD = 0.15;\n\nfunction clamp(value: number, min: number, max: number): number {\n  return Math.max(min, Math.min(max, value));\n}\n\nconst DotProductSetupSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of dotProductQuery(state.world)) {\n      if (DotProduct.initialized[eid]) continue;\n\n      const color = DotProduct.color[eid];\n      const fontSize = DotProduct.fontSize[eid];\n      const rowHeight = DotProduct.rowHeight[eid];\n\n      const rowYs = [rowHeight, 0, -rowHeight];\n\n      DotProduct.mult1[eid] = createTextEntity(\n        state,\n        eid,\n        color,\n        fontSize,\n        '',\n        MULT_OFFSET_X,\n        rowYs[0]\n      );\n      DotProduct.mult2[eid] = createTextEntity(\n        state,\n        eid,\n        color,\n        fontSize,\n        '',\n        MULT_OFFSET_X,\n        rowYs[1]\n      );\n      DotProduct.mult3[eid] = createTextEntity(\n        state,\n        eid,\n        color,\n        fontSize,\n        '',\n        MULT_OFFSET_X,\n        rowYs[2]\n      );\n\n      DotProduct.eq1[eid] = createTextEntity(\n        state,\n        eid,\n        color,\n        fontSize,\n        '=',\n        EQ_OFFSET_X,\n        rowYs[0]\n      );\n      DotProduct.eq2[eid] = createTextEntity(\n        state,\n        eid,\n        color,\n        fontSize,\n        '=',\n        EQ_OFFSET_X,\n        rowYs[1]\n      );\n      DotProduct.eq3[eid] = createTextEntity(\n        state,\n        eid,\n        color,\n        fontSize,\n        '=',\n        EQ_OFFSET_X,\n        rowYs[2]\n      );\n\n      DotProduct.mult1Shaker[eid] = createShaker(state, DotProduct.mult1[eid], 'scale', {\n        value: 0,\n        intensity: 1,\n        mode: 'multiplicative',\n      });\n\n      DotProduct.mult2Shaker[eid] = createShaker(state, DotProduct.mult2[eid], 'scale', {\n        value: 0,\n        intensity: 1,\n        mode: 'multiplicative',\n      });\n\n      DotProduct.mult3Shaker[eid] = createShaker(state, DotProduct.mult3[eid], 'scale', {\n        value: 0,\n        intensity: 1,\n        mode: 'multiplicative',\n      });\n\n      DotProduct.eq1Shaker[eid] = createShaker(state, DotProduct.eq1[eid], 'scale', {\n        value: 0,\n        intensity: 1,\n        mode: 'multiplicative',\n      });\n\n      DotProduct.eq2Shaker[eid] = createShaker(state, DotProduct.eq2[eid], 'scale', {\n        value: 0,\n        intensity: 1,\n        mode: 'multiplicative',\n      });\n\n      DotProduct.eq3Shaker[eid] = createShaker(state, DotProduct.eq3[eid], 'scale', {\n        value: 0,\n        intensity: 1,\n        mode: 'multiplicative',\n      });\n\n      const SUM_OFFSET_X = 6.0;\n      DotProduct.sum[eid] = createTextEntity(state, eid, color, fontSize, '32', SUM_OFFSET_X, 0);\n\n      DotProduct.sumShaker[eid] = createShaker(state, DotProduct.sum[eid], 'scale', {\n        value: 0,\n        intensity: 1,\n        mode: 'multiplicative',\n      });\n\n      DotProduct.initialized[eid] = 1;\n    }\n  },\n};\n\nconst DotProductDriverSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of dotProductQuery(state.world)) {\n      if (!DotProduct.initialized[eid]) continue;\n\n      const t = DotProduct.transitionT[eid];\n\n      TransformShaker.intensity[DotProduct.mult1Shaker[eid]] =\n        1 - clamp((t - OFFSETS.mult1) / SPREAD, 0, 1);\n      TransformShaker.intensity[DotProduct.eq1Shaker[eid]] =\n        1 - clamp((t - OFFSETS.eq1) / SPREAD, 0, 1);\n      TransformShaker.intensity[DotProduct.mult2Shaker[eid]] =\n        1 - clamp((t - OFFSETS.mult2) / SPREAD, 0, 1);\n      TransformShaker.intensity[DotProduct.eq2Shaker[eid]] =\n        1 - clamp((t - OFFSETS.eq2) / SPREAD, 0, 1);\n      TransformShaker.intensity[DotProduct.mult3Shaker[eid]] =\n        1 - clamp((t - OFFSETS.mult3) / SPREAD, 0, 1);\n      TransformShaker.intensity[DotProduct.eq3Shaker[eid]] =\n        1 - clamp((t - OFFSETS.eq3) / SPREAD, 0, 1);\n\n      const sumT = DotProduct.sumT[eid];\n      const sumBounceT = DotProduct.sumBounceT[eid];\n      const sumEid = DotProduct.sum[eid];\n\n      TransformShaker.intensity[DotProduct.sumShaker[eid]] = 1 - sumT;\n\n      const bounceScale = 1 + sumBounceT * 0.1;\n      Transform.scaleX[sumEid] = bounceScale;\n      Transform.scaleY[sumEid] = bounceScale;\n      Transform.scaleZ[sumEid] = bounceScale;\n    }\n  },\n};\n\nexport const DotProductPlugin: GAME.Plugin = {\n  components: { DotProduct },\n  systems: [DotProductSetupSystem, DotProductDriverSystem],\n  config: {\n    defaults: {\n      'dot-product': {\n        transitionT: 0,\n        sumT: 0,\n        sumBounceT: 0,\n        mult1: 0,\n        mult2: 0,\n        mult3: 0,\n        mult1Shaker: 0,\n        mult2Shaker: 0,\n        mult3Shaker: 0,\n        eq1: 0,\n        eq2: 0,\n        eq3: 0,\n        eq1Shaker: 0,\n        eq2Shaker: 0,\n        eq3Shaker: 0,\n        sum: 0,\n        sumShaker: 0,\n        color: 0xffffff,\n        fontSize: 0.5,\n        rowHeight: 0.6,\n        initialized: 0,\n      },\n    },\n  },\n};\n","import * as GAME from 'vibegame';\nimport { Transform, WorldTransform, Parent } from 'vibegame/transforms';\nimport { Word, setTextContent } from 'vibegame/text';\nimport { createShaker, TransformShaker } from 'vibegame/tweening';\n\nexport const DotProductLabel = GAME.defineComponent({\n  qEntity: GAME.Types.eid,\n  dotEntity: GAME.Types.eid,\n  kEntity: GAME.Types.eid,\n  equalsEntity: GAME.Types.eid,\n  resultEntity: GAME.Types.eid,\n  qShaker: GAME.Types.eid,\n  kShaker: GAME.Types.eid,\n  qT: GAME.Types.f32,\n  dotT: GAME.Types.f32,\n  kT: GAME.Types.f32,\n  equalsT: GAME.Types.f32,\n  resultT: GAME.Types.f32,\n  resultValue: GAME.Types.f32,\n  qBounceT: GAME.Types.f32,\n  kBounceT: GAME.Types.f32,\n  qColor: GAME.Types.ui32,\n  dotColor: GAME.Types.ui32,\n  kColor: GAME.Types.ui32,\n  resultColor: GAME.Types.ui32,\n  fontSize: GAME.Types.f32,\n  spacing: GAME.Types.f32,\n  initialized: GAME.Types.ui8,\n});\n\nconst dotProductLabelQuery = GAME.defineQuery([DotProductLabel, Transform]);\n\nfunction createTextEntity(\n  state: GAME.State,\n  parentEid: number,\n  color: number,\n  fontSize: number,\n  content: string,\n  posX: number\n): number {\n  const eid = state.createEntity();\n  state.addComponent(eid, Transform, {\n    posX,\n    posY: 0,\n    posZ: 0,\n    scaleX: 0,\n    scaleY: 0,\n    scaleZ: 0,\n  });\n  state.addComponent(eid, WorldTransform, {});\n  state.addComponent(eid, Parent, { entity: parentEid });\n  state.addComponent(eid, Word, {\n    fontSize,\n    color,\n    dirty: 1,\n  });\n  setTextContent(state, eid, content);\n  return eid;\n}\n\nconst DotProductLabelSetupSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of dotProductLabelQuery(state.world)) {\n      if (DotProductLabel.initialized[eid]) continue;\n\n      const qColor = DotProductLabel.qColor[eid];\n      const dotColor = DotProductLabel.dotColor[eid];\n      const kColor = DotProductLabel.kColor[eid];\n      const fontSize = DotProductLabel.fontSize[eid];\n      const spacing = DotProductLabel.spacing[eid];\n\n      const resultColor = DotProductLabel.resultColor[eid] || dotColor;\n\n      DotProductLabel.qEntity[eid] = createTextEntity(state, eid, qColor, fontSize, 'Q', -spacing);\n      DotProductLabel.dotEntity[eid] = createTextEntity(state, eid, dotColor, fontSize, '', 0);\n      DotProductLabel.kEntity[eid] = createTextEntity(state, eid, kColor, fontSize, 'K', spacing);\n      DotProductLabel.equalsEntity[eid] = createTextEntity(\n        state,\n        eid,\n        dotColor,\n        fontSize,\n        '=',\n        spacing * 2\n      );\n      DotProductLabel.resultEntity[eid] = createTextEntity(\n        state,\n        eid,\n        resultColor,\n        fontSize,\n        '7',\n        spacing * 3\n      );\n\n      DotProductLabel.qShaker[eid] = createShaker(state, DotProductLabel.qEntity[eid], 'scale', {\n        value: 1.15,\n        intensity: 0,\n        mode: 'multiplicative',\n      });\n      DotProductLabel.kShaker[eid] = createShaker(state, DotProductLabel.kEntity[eid], 'scale', {\n        value: 1.15,\n        intensity: 0,\n        mode: 'multiplicative',\n      });\n\n      DotProductLabel.initialized[eid] = 1;\n    }\n  },\n};\n\nconst DotProductLabelDriverSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of dotProductLabelQuery(state.world)) {\n      if (!DotProductLabel.initialized[eid]) continue;\n\n      const qT = DotProductLabel.qT[eid];\n      const dotT = DotProductLabel.dotT[eid];\n      const kT = DotProductLabel.kT[eid];\n      const equalsT = DotProductLabel.equalsT[eid];\n      const resultT = DotProductLabel.resultT[eid];\n\n      const qEntity = DotProductLabel.qEntity[eid];\n      const dotEntity = DotProductLabel.dotEntity[eid];\n      const kEntity = DotProductLabel.kEntity[eid];\n      const equalsEntity = DotProductLabel.equalsEntity[eid];\n      const resultEntity = DotProductLabel.resultEntity[eid];\n\n      Transform.scaleX[qEntity] = qT;\n      Transform.scaleY[qEntity] = qT;\n      Transform.scaleZ[qEntity] = qT;\n\n      Transform.scaleX[dotEntity] = dotT;\n      Transform.scaleY[dotEntity] = dotT;\n      Transform.scaleZ[dotEntity] = dotT;\n\n      Transform.scaleX[kEntity] = kT;\n      Transform.scaleY[kEntity] = kT;\n      Transform.scaleZ[kEntity] = kT;\n\n      Transform.scaleX[equalsEntity] = equalsT;\n      Transform.scaleY[equalsEntity] = equalsT;\n      Transform.scaleZ[equalsEntity] = equalsT;\n\n      Transform.scaleX[resultEntity] = resultT;\n      Transform.scaleY[resultEntity] = resultT;\n      Transform.scaleZ[resultEntity] = resultT;\n\n      TransformShaker.intensity[DotProductLabel.qShaker[eid]] = DotProductLabel.qBounceT[eid];\n      TransformShaker.intensity[DotProductLabel.kShaker[eid]] = DotProductLabel.kBounceT[eid];\n    }\n  },\n};\n\nexport const DotProductLabelPlugin: GAME.Plugin = {\n  components: { DotProductLabel },\n  systems: [DotProductLabelSetupSystem, DotProductLabelDriverSystem],\n  config: {\n    defaults: {\n      'dot-product-label': {\n        qEntity: 0,\n        dotEntity: 0,\n        kEntity: 0,\n        equalsEntity: 0,\n        resultEntity: 0,\n        qShaker: 0,\n        kShaker: 0,\n        qT: 0,\n        dotT: 0,\n        kT: 0,\n        equalsT: 0,\n        resultT: 0,\n        resultValue: 7,\n        qBounceT: 0,\n        kBounceT: 0,\n        qColor: 0xffffff,\n        dotColor: 0xffffff,\n        kColor: 0xffffff,\n        resultColor: 0xffffff,\n        fontSize: 1.0,\n        spacing: 0.8,\n        initialized: 0,\n      },\n    },\n  },\n};\n","import * as GAME from 'vibegame';\nimport { Transform, WorldTransform, Parent } from 'vibegame/transforms';\nimport { Word, setTextContent } from 'vibegame/text';\n\nexport const VLabel = GAME.defineComponent({\n  textEntity: GAME.Types.eid,\n  color: GAME.Types.ui32,\n  fontSize: GAME.Types.f32,\n  growT: GAME.Types.f32,\n  initialized: GAME.Types.ui8,\n});\n\nconst vLabelQuery = GAME.defineQuery([VLabel, Transform]);\n\nconst VLabelSetupSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of vLabelQuery(state.world)) {\n      if (VLabel.initialized[eid]) continue;\n\n      const color = VLabel.color[eid];\n      const fontSize = VLabel.fontSize[eid];\n\n      const textEntity = state.createEntity();\n      state.addComponent(textEntity, Transform, {\n        posX: 0,\n        posY: 0,\n        posZ: 0,\n        scaleX: 0,\n        scaleY: 0,\n        scaleZ: 0,\n      });\n      state.addComponent(textEntity, WorldTransform, {});\n      state.addComponent(textEntity, Parent, { entity: eid });\n      state.addComponent(textEntity, Word, {\n        fontSize,\n        color,\n        dirty: 1,\n      });\n      setTextContent(state, textEntity, 'V');\n\n      VLabel.textEntity[eid] = textEntity;\n      VLabel.initialized[eid] = 1;\n    }\n  },\n};\n\nconst VLabelDriverSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of vLabelQuery(state.world)) {\n      if (!VLabel.initialized[eid]) continue;\n\n      const growT = VLabel.growT[eid];\n      const textEntity = VLabel.textEntity[eid];\n\n      Transform.scaleX[textEntity] = growT;\n      Transform.scaleY[textEntity] = growT;\n      Transform.scaleZ[textEntity] = growT;\n    }\n  },\n};\n\nexport const VLabelPlugin: GAME.Plugin = {\n  components: { VLabel },\n  systems: [VLabelSetupSystem, VLabelDriverSystem],\n  config: {\n    defaults: {\n      'v-label': {\n        textEntity: 0,\n        color: 0x5a9bb0,\n        fontSize: 0.65,\n        growT: 0,\n        initialized: 0,\n      },\n    },\n  },\n};\n","import * as GAME from 'vibegame';\nimport { Transform, WorldTransform, Parent } from 'vibegame/transforms';\nimport { Word, setTextContent } from 'vibegame/text';\n\nexport const VFormulaLabel = GAME.defineComponent({\n  lparenEntity: GAME.Types.eid,\n  qEntity: GAME.Types.eid,\n  dotEntity: GAME.Types.eid,\n  kEntity: GAME.Types.eid,\n  rparenEntity: GAME.Types.eid,\n  timesEntity: GAME.Types.eid,\n  vEntity: GAME.Types.eid,\n  qColor: GAME.Types.ui32,\n  kColor: GAME.Types.ui32,\n  vColor: GAME.Types.ui32,\n  parenColor: GAME.Types.ui32,\n  fontSize: GAME.Types.f32,\n  spacing: GAME.Types.f32,\n  growT: GAME.Types.f32,\n  initialized: GAME.Types.ui8,\n});\n\nconst vFormulaLabelQuery = GAME.defineQuery([VFormulaLabel, Transform]);\n\nfunction createTextEntity(\n  state: GAME.State,\n  parentEid: number,\n  color: number,\n  fontSize: number,\n  content: string,\n  posX: number\n): number {\n  const eid = state.createEntity();\n  state.addComponent(eid, Transform, {\n    posX,\n    posY: 0,\n    posZ: 0,\n    scaleX: 0,\n    scaleY: 0,\n    scaleZ: 0,\n  });\n  state.addComponent(eid, WorldTransform, {});\n  state.addComponent(eid, Parent, { entity: parentEid });\n  state.addComponent(eid, Word, {\n    fontSize,\n    color,\n    dirty: 1,\n  });\n  setTextContent(state, eid, content);\n  return eid;\n}\n\nconst VFormulaLabelSetupSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of vFormulaLabelQuery(state.world)) {\n      if (VFormulaLabel.initialized[eid]) continue;\n\n      const qColor = VFormulaLabel.qColor[eid];\n      const kColor = VFormulaLabel.kColor[eid];\n      const vColor = VFormulaLabel.vColor[eid];\n      const parenColor = VFormulaLabel.parenColor[eid];\n      const fontSize = VFormulaLabel.fontSize[eid];\n      const spacing = VFormulaLabel.spacing[eid];\n\n      const offset = spacing * 3;\n      VFormulaLabel.lparenEntity[eid] = createTextEntity(\n        state,\n        eid,\n        parenColor,\n        fontSize,\n        '(',\n        -offset\n      );\n      VFormulaLabel.qEntity[eid] = createTextEntity(\n        state,\n        eid,\n        qColor,\n        fontSize,\n        'Q',\n        -offset + spacing\n      );\n      VFormulaLabel.dotEntity[eid] = createTextEntity(\n        state,\n        eid,\n        parenColor,\n        fontSize,\n        '',\n        -offset + spacing * 2\n      );\n      VFormulaLabel.kEntity[eid] = createTextEntity(\n        state,\n        eid,\n        kColor,\n        fontSize,\n        'K',\n        -offset + spacing * 3\n      );\n      VFormulaLabel.rparenEntity[eid] = createTextEntity(\n        state,\n        eid,\n        parenColor,\n        fontSize,\n        ')',\n        -offset + spacing * 4\n      );\n      VFormulaLabel.timesEntity[eid] = createTextEntity(\n        state,\n        eid,\n        parenColor,\n        fontSize,\n        '',\n        -offset + spacing * 5\n      );\n      VFormulaLabel.vEntity[eid] = createTextEntity(\n        state,\n        eid,\n        vColor,\n        fontSize,\n        'V',\n        -offset + spacing * 6\n      );\n\n      VFormulaLabel.initialized[eid] = 1;\n    }\n  },\n};\n\nconst VFormulaLabelDriverSystem: GAME.System = {\n  group: 'simulation',\n  update(state) {\n    for (const eid of vFormulaLabelQuery(state.world)) {\n      if (!VFormulaLabel.initialized[eid]) continue;\n\n      const growT = VFormulaLabel.growT[eid];\n\n      const entities = [\n        VFormulaLabel.lparenEntity[eid],\n        VFormulaLabel.qEntity[eid],\n        VFormulaLabel.dotEntity[eid],\n        VFormulaLabel.kEntity[eid],\n        VFormulaLabel.rparenEntity[eid],\n        VFormulaLabel.timesEntity[eid],\n        VFormulaLabel.vEntity[eid],\n      ];\n\n      for (const entity of entities) {\n        Transform.scaleX[entity] = growT;\n        Transform.scaleY[entity] = growT;\n        Transform.scaleZ[entity] = growT;\n      }\n    }\n  },\n};\n\nexport const VFormulaLabelPlugin: GAME.Plugin = {\n  components: { VFormulaLabel },\n  systems: [VFormulaLabelSetupSystem, VFormulaLabelDriverSystem],\n  config: {\n    defaults: {\n      'v-formula-label': {\n        lparenEntity: 0,\n        qEntity: 0,\n        dotEntity: 0,\n        kEntity: 0,\n        rparenEntity: 0,\n        timesEntity: 0,\n        vEntity: 0,\n        qColor: 0xffffff,\n        kColor: 0xffffff,\n        vColor: 0x5a9bb0,\n        parenColor: 0xffffff,\n        fontSize: 0.65,\n        spacing: 0.55,\n        growT: 0,\n        initialized: 0,\n      },\n    },\n  },\n};\n","export default \"<sequence name=\\\"enter-scene\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-driver.separation-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-box-config.offset-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"sine-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"exit-scene\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-box-config.offset-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.1\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-driver.separation-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.1\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"enter-vectors\\\">\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"2\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0.3\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0.5\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-arrow-driver.grow-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-vector-driver.grow-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.base-vector-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"exit-vectors\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-vector-driver.grow-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.base-vector-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-arrow-driver.grow-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"pan-to-graph\\\">\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"15\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0.6\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0.4\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.2\\\"></pause>\\n  <tween\\n    target=\\\"vector-graph\\\"\\n    attr=\\\"axis-graph.vector-grow-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"pan-from-graph\\\">\\n  <tween\\n    target=\\\"vector-graph\\\"\\n    attr=\\\"axis-graph.vector-grow-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"sine-in\\\"\\n  ></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"2\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0.5\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0.3\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"pan-to-vectors\\\">\\n  <tween\\n    target=\\\"vector-graph\\\"\\n    attr=\\\"axis-graph.vector-grow-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"sine-in\\\"\\n  ></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"2\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0.5\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0.3\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"pan-from-vectors\\\">\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"15\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0.6\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0.4\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.2\\\"></pause>\\n  <tween\\n    target=\\\"vector-graph\\\"\\n    attr=\\\"axis-graph.vector-grow-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"pan-to-network\\\">\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-x\\\"\\n    to=\\\"3.5\\\"\\n    duration=\\\"0.8\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"-15\\\"\\n    duration=\\\"0.8\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"main-camera.ortho-size\\\"\\n    to=\\\"14\\\"\\n    duration=\\\"0.8\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0.5\\\"\\n    duration=\\\"0.8\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0.3\\\"\\n    duration=\\\"0.8\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.3\\\"></pause>\\n\\n  <tween\\n    target=\\\"neural-network\\\"\\n    attr=\\\"neural-network.connections\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.2\\\"></pause>\\n\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.emergence-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.3\\\"></pause>\\n\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-x\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"1.0\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"2\\\"\\n    duration=\\\"1.0\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"main-camera.ortho-size\\\"\\n    to=\\\"10\\\"\\n    duration=\\\"1.0\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.join-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"1.0\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.2\\\"></pause>\\n\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0.3\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0.5\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"pan-from-network\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.join-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"sine-in\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.emergence-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"sine-in\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-x\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"sine-in\\\"\\n  ></tween>\\n  <pause duration=\\\"0.2\\\"></pause>\\n\\n  <tween\\n    target=\\\"neural-network\\\"\\n    attr=\\\"neural-network.connections\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"sine-in\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"zoom-out\\\">\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"main-camera.ortho-size\\\"\\n    to=\\\"12\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"zoom-in\\\">\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"main-camera.ortho-size\\\"\\n    to=\\\"10\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"swap-to-hot\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.emergence-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"sine-in-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.join-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"sine-in-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-layout-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"sine-in-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.base-vector-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"sine-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"sine-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"sine-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"main-camera.ortho-size\\\"\\n    to=\\\"10\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"sine-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.3\\\"></pause>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"sine-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"swap-to-barking\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"sine-in\\\"\\n  ></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-layout-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"sine-in-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.emergence-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"sine-in-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.join-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"sine-in-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0.3\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"sine-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0.5\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"sine-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"main-camera.ortho-size\\\"\\n    to=\\\"12\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"sine-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.base-vector-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-dog-vector\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.dog-vector-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-dog-vector\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.dog-vector-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-hot-vector\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-vector-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-hot-vector\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-vector-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"combine-vectors\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.combine-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"separate-vectors\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.combine-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"pan-to-dot-product\\\">\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-x\\\"\\n    to=\\\"15\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.3\\\"></pause>\\n\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.dog-vector-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-vector-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.combine-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n\\n  <tween target=\\\"vector-a\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"1\\\" duration=\\\"0.4\\\" easing=\\\"back-out\\\"></tween>\\n  <tween target=\\\"vector-b\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"1\\\" duration=\\\"0.4\\\" easing=\\\"back-out\\\"></tween>\\n</sequence>\\n\\n<sequence name=\\\"pan-from-dot-product\\\">\\n  <tween target=\\\"vector-a\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"0\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"vector-b\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"0\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.combine-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-x\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.6\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"2\\\"\\n    duration=\\\"0.6\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.2\\\"></pause>\\n\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.dog-vector-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-vector-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-multiplication\\\">\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-x\\\"\\n    to=\\\"16\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween target=\\\"dot-product\\\" attr=\\\"dot-product.transition-t\\\" to=\\\"1\\\" duration=\\\"1.2\\\" easing=\\\"expo-out\\\"></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween target=\\\"result-vector\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"1\\\" duration=\\\"0.4\\\" easing=\\\"expo-out\\\"></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-multiplication\\\">\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-x\\\"\\n    to=\\\"15\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween target=\\\"result-vector\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"0\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"dot-product\\\" attr=\\\"dot-product.transition-t\\\" to=\\\"0\\\" duration=\\\"0.6\\\" easing=\\\"expo-out\\\"></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-sum\\\">\\n  <tween target=\\\"result-vector\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"0\\\" duration=\\\"0.2\\\" easing=\\\"expo-out\\\"></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween target=\\\"dot-product\\\" attr=\\\"dot-product.sum-t\\\" to=\\\"1\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-sum\\\">\\n  <tween target=\\\"dot-product\\\" attr=\\\"dot-product.sum-t\\\" to=\\\"0\\\" duration=\\\"0.2\\\" easing=\\\"expo-out\\\"></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween target=\\\"result-vector\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"1\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"scale-vectors-ab\\\">\\n  <tween target=\\\"vector-a\\\" attr=\\\"scale\\\" to=\\\"1.05 1.05 1.05\\\" duration=\\\"0.15\\\" easing=\\\"sine-in-out\\\"></tween>\\n  <tween target=\\\"vector-b\\\" attr=\\\"scale\\\" to=\\\"1.05 1.05 1.05\\\" duration=\\\"0.15\\\" easing=\\\"sine-in-out\\\"></tween>\\n  <pause duration=\\\"0.15\\\"></pause>\\n  <tween target=\\\"vector-a\\\" attr=\\\"scale\\\" to=\\\"1 1 1\\\" duration=\\\"0.15\\\" easing=\\\"sine-in-out\\\"></tween>\\n  <tween target=\\\"vector-b\\\" attr=\\\"scale\\\" to=\\\"1 1 1\\\" duration=\\\"0.15\\\" easing=\\\"sine-in-out\\\"></tween>\\n</sequence>\\n\\n<sequence name=\\\"unscale-vectors-ab\\\">\\n  <tween target=\\\"vector-a\\\" attr=\\\"scale\\\" to=\\\"1.05 1.05 1.05\\\" duration=\\\"0.15\\\" easing=\\\"sine-in-out\\\"></tween>\\n  <tween target=\\\"vector-b\\\" attr=\\\"scale\\\" to=\\\"1.05 1.05 1.05\\\" duration=\\\"0.15\\\" easing=\\\"sine-in-out\\\"></tween>\\n  <pause duration=\\\"0.15\\\"></pause>\\n  <tween target=\\\"vector-a\\\" attr=\\\"scale\\\" to=\\\"1 1 1\\\" duration=\\\"0.15\\\" easing=\\\"sine-in-out\\\"></tween>\\n  <tween target=\\\"vector-b\\\" attr=\\\"scale\\\" to=\\\"1 1 1\\\" duration=\\\"0.15\\\" easing=\\\"sine-in-out\\\"></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"scale-sum\\\">\\n  <tween target=\\\"dot-product\\\" attr=\\\"dot-product.sum-bounce-t\\\" to=\\\"1\\\" duration=\\\"0.15\\\" easing=\\\"sine-in-out\\\"></tween>\\n  <pause duration=\\\"0.15\\\"></pause>\\n  <tween target=\\\"dot-product\\\" attr=\\\"dot-product.sum-bounce-t\\\" to=\\\"0\\\" duration=\\\"0.15\\\" easing=\\\"sine-in-out\\\"></tween>\\n</sequence>\\n\\n<sequence name=\\\"unscale-sum\\\">\\n  <tween target=\\\"dot-product\\\" attr=\\\"dot-product.sum-bounce-t\\\" to=\\\"1\\\" duration=\\\"0.15\\\" easing=\\\"sine-in-out\\\"></tween>\\n  <pause duration=\\\"0.15\\\"></pause>\\n  <tween target=\\\"dot-product\\\" attr=\\\"dot-product.sum-bounce-t\\\" to=\\\"0\\\" duration=\\\"0.15\\\" easing=\\\"sine-in-out\\\"></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"zoom-out-dot-product\\\">\\n  <tween target=\\\"camera\\\" attr=\\\"main-camera.ortho-size\\\" to=\\\"12\\\" duration=\\\"0.5\\\" easing=\\\"expo-out\\\"></tween>\\n</sequence>\\n\\n<sequence name=\\\"zoom-in-dot-product\\\">\\n  <tween target=\\\"camera\\\" attr=\\\"main-camera.ortho-size\\\" to=\\\"10\\\" duration=\\\"0.5\\\" easing=\\\"expo-out\\\"></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"pan-to-tokens\\\">\\n  <tween target=\\\"camera\\\" attr=\\\"main-camera.ortho-size\\\" to=\\\"10\\\" duration=\\\"0.5\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-x\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"2\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0.3\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0.5\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-arrow-driver.grow-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-vector-driver.grow-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.base-vector-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"pan-from-tokens\\\">\\n  <tween target=\\\"camera\\\" attr=\\\"main-camera.ortho-size\\\" to=\\\"12\\\" duration=\\\"0.5\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-vector-driver.grow-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.base-vector-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-arrow-driver.grow-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-x\\\"\\n    to=\\\"16\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.7\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-dog-q\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.dog-q-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"3\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-dog-q\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.dog-q-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"2\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"zoom-in-q\\\">\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"main-camera.ortho-size\\\"\\n    to=\\\"9\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"zoom-out-q\\\">\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"main-camera.ortho-size\\\"\\n    to=\\\"10\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-hot-k\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-k-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-hot-k\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-k-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"zoom-out-k\\\">\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"main-camera.ortho-size\\\"\\n    to=\\\"11\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"zoom-in-k\\\">\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"main-camera.ortho-size\\\"\\n    to=\\\"9\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-qk-label\\\">\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"4\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"qk-label\\\"\\n    attr=\\\"dot-product-label.q-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"qk-label\\\"\\n    attr=\\\"dot-product-label.dot-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"back-out\\\"\\n    delay=\\\"0.1\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"qk-label\\\"\\n    attr=\\\"dot-product-label.k-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"back-out\\\"\\n    delay=\\\"0.2\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"qk-label\\\"\\n    attr=\\\"dot-product-label.equals-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"back-out\\\"\\n    delay=\\\"0.3\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"qk-label\\\"\\n    attr=\\\"dot-product-label.result-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"back-out\\\"\\n    delay=\\\"0.4\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-qk-label\\\">\\n  <tween\\n    target=\\\"camera-target\\\"\\n    attr=\\\"transform.pos-y\\\"\\n    to=\\\"3\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0.3\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0.5\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"qk-label\\\"\\n    attr=\\\"dot-product-label.result-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"qk-label\\\"\\n    attr=\\\"dot-product-label.equals-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n    delay=\\\"0.05\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"qk-label\\\"\\n    attr=\\\"dot-product-label.k-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n    delay=\\\"0.1\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"qk-label\\\"\\n    attr=\\\"dot-product-label.dot-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n    delay=\\\"0.15\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"qk-label\\\"\\n    attr=\\\"dot-product-label.q-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n    delay=\\\"0.2\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"scale-qk\\\">\\n  <tween target=\\\"qk-label\\\" attr=\\\"dot-product-label.q-t\\\" to=\\\"0\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"qk-label\\\" attr=\\\"dot-product-label.dot-t\\\" to=\\\"0\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"qk-label\\\" attr=\\\"dot-product-label.k-t\\\" to=\\\"0\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"qk-label\\\" attr=\\\"dot-product-label.equals-t\\\" to=\\\"0\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"qk-label\\\" attr=\\\"dot-product-label.result-t\\\" to=\\\"0\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n  <pause duration=\\\"0.2\\\"></pause>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-score-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"unscale-qk\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-score-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween target=\\\"qk-label\\\" attr=\\\"dot-product-label.q-t\\\" to=\\\"1\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"qk-label\\\" attr=\\\"dot-product-label.dot-t\\\" to=\\\"1\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"qk-label\\\" attr=\\\"dot-product-label.k-t\\\" to=\\\"1\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"qk-label\\\" attr=\\\"dot-product-label.equals-t\\\" to=\\\"1\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"qk-label\\\" attr=\\\"dot-product-label.result-t\\\" to=\\\"1\\\" duration=\\\"0.3\\\" easing=\\\"expo-out\\\"></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-all-k\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.base-k-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.2\\\"></pause>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.all-scores-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-all-k\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.all-scores-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.base-k-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"squish-qk\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.q-squish-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.k-squish-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.softmax-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"back-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"unsquish-qk\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.softmax-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.q-squish-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.k-squish-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-sum-equals\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.sum-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.6\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-sum-equals\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.sum-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-score-colors\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.score-color-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.6\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.sum-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-score-colors\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.score-color-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.sum-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.6\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-all-v\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.v-squish-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.1\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.base-v-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-all-v\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.base-v-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.v-squish-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.1\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-v-label\\\">\\n  <tween\\n    target=\\\"v-label\\\"\\n    attr=\\\"v-label.grow-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-v-label\\\">\\n  <tween\\n    target=\\\"v-label\\\"\\n    attr=\\\"v-label.grow-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"tilt-camera\\\">\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0.6\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0.4\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"untilt-camera\\\">\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"offset-v-vectors\\\">\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.v-offset-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"v-label\\\"\\n    attr=\\\"v-label.grow-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"v-formula-label\\\"\\n    attr=\\\"v-formula-label.grow-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"unoffset-v-vectors\\\">\\n  <tween\\n    target=\\\"v-formula-label\\\"\\n    attr=\\\"v-formula-label.grow-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"v-label\\\"\\n    attr=\\\"v-label.grow-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.v-offset-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0.6\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-pitch\\\"\\n    to=\\\"0.4\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"show-v-sum\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.v-sum-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.6\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"hide-v-sum\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.v-sum-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.sum-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.3\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"reset-for-all-tokens\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.all-scores-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.15\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-score-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.15\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.v-offset-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.sum-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.15\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.v-sum-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.15\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.q-stagger-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.4\\\"\\n    easing=\\\"linear\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"undo-reset-for-all-tokens\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.q-stagger-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <pause duration=\\\"0.1\\\"></pause>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.v-sum-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.sum-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.v-offset-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.2\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.hot-score-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.15\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.all-scores-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.15\\\"\\n    easing=\\\"expo-out\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"pulse-token-vectors\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.vector-stagger-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.8\\\"\\n    easing=\\\"linear\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"undo-pulse-token-vectors\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.vector-stagger-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.01\\\"\\n    easing=\\\"linear\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"flicker-token-vectors\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.vector-flicker-t\\\"\\n    to=\\\"1\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"linear\\\"\\n  ></tween>\\n  <pause duration=\\\"0.5\\\"></pause>\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.vector-flicker-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.01\\\"\\n    easing=\\\"linear\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"undo-flicker-token-vectors\\\">\\n  <tween\\n    target=\\\"tokens\\\"\\n    attr=\\\"token-swap-driver.vector-flicker-t\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.01\\\"\\n    easing=\\\"linear\\\"\\n  ></tween>\\n</sequence>\\n\"","export default \"<sequence name=\\\"rotate-camera\\\">\\n  <tween target=\\\"dot-product\\\" attr=\\\"dot-product.transition-t\\\" to=\\\"0\\\" duration=\\\"0.1\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"dot-product\\\" attr=\\\"dot-product.sum-t\\\" to=\\\"0\\\" duration=\\\"0.1\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"vector-a\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"0\\\" duration=\\\"0.1\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"vector-b\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"0\\\" duration=\\\"0.1\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"result-vector\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"0\\\" duration=\\\"0.1\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"6.283185\\\"\\n    duration=\\\"1\\\"\\n    easing=\\\"sine-in-out\\\"\\n  ></tween>\\n</sequence>\\n\\n<sequence name=\\\"undo-rotate-camera\\\">\\n  <tween\\n    target=\\\"camera\\\"\\n    attr=\\\"orbit-camera.target-yaw\\\"\\n    to=\\\"0\\\"\\n    duration=\\\"0.5\\\"\\n    easing=\\\"linear\\\"\\n  ></tween>\\n  <pause duration=\\\"0.5\\\"></pause>\\n  <tween target=\\\"dot-product\\\" attr=\\\"dot-product.transition-t\\\" to=\\\"1\\\" duration=\\\"0.1\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"dot-product\\\" attr=\\\"dot-product.sum-t\\\" to=\\\"1\\\" duration=\\\"0.1\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"vector-a\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"1\\\" duration=\\\"0.1\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"vector-b\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"1\\\" duration=\\\"0.1\\\" easing=\\\"expo-out\\\"></tween>\\n  <tween target=\\\"result-vector\\\" attr=\\\"bracket-vector.grow-t\\\" to=\\\"1\\\" duration=\\\"0.1\\\" easing=\\\"expo-out\\\"></tween>\\n</sequence>\\n\"","import step01 from './step-0-1.xml?raw';\nimport step12 from './step-1-2.xml?raw';\nimport step23 from './step-2-3.xml?raw';\nimport step34 from './step-3-4.xml?raw';\nimport step45 from './step-4-5.xml?raw';\nimport step56 from './step-5-6.xml?raw';\nimport step67 from './step-6-7.xml?raw';\nimport step78 from './step-7-8.xml?raw';\nimport step89 from './step-8-9.xml?raw';\nimport step910 from './step-9-10.xml?raw';\nimport step1011 from './step-10-11.xml?raw';\nimport step1112 from './step-11-12.xml?raw';\nimport step1213 from './step-12-13.xml?raw';\nimport step1314 from './step-13-14.xml?raw';\nimport step1415 from './step-14-15.xml?raw';\nimport step1516 from './step-15-16.xml?raw';\nimport step1617 from './step-16-17.xml?raw';\nimport step1718 from './step-17-18.xml?raw';\nimport step1819 from './step-18-19.xml?raw';\nimport step1920 from './step-19-20.xml?raw';\nimport step2021 from './step-20-21.xml?raw';\nimport step2122 from './step-21-22.xml?raw';\nimport step2223 from './step-22-23.xml?raw';\nimport step2324 from './step-23-24.xml?raw';\nimport step2425 from './step-24-25.xml?raw';\nimport step2526 from './step-25-26.xml?raw';\nimport step2627 from './step-26-27.xml?raw';\nimport step2728 from './step-27-28.xml?raw';\nimport step2829 from './step-28-29.xml?raw';\nimport step2930 from './step-29-30.xml?raw';\nimport step3031 from './step-30-31.xml?raw';\nimport step3132 from './step-31-32.xml?raw';\nimport step3233 from './step-32-33.xml?raw';\nimport step3334 from './step-33-34.xml?raw';\nimport step3435 from './step-34-35.xml?raw';\nimport step3536 from './step-35-36.xml?raw';\nexport const STEP_SEQUENCES: Record<string, string> = {\n  '0-1': 'enter-scene',\n  '1-0': 'exit-scene',\n  '1-2': 'enter-vectors',\n  '2-1': 'exit-vectors',\n  '2-3': 'pan-to-graph',\n  '3-2': 'pan-from-graph',\n  '3-4': 'pan-to-vectors',\n  '4-3': 'pan-from-vectors',\n  '4-5': 'pan-to-network',\n  '5-4': 'pan-from-network',\n  '5-6': 'zoom-out',\n  '6-5': 'zoom-in',\n  '6-7': 'swap-to-hot',\n  '7-6': 'swap-to-barking',\n  '7-8': 'show-dog-vector',\n  '8-7': 'hide-dog-vector',\n  '8-9': 'show-hot-vector',\n  '9-8': 'hide-hot-vector',\n  '9-10': 'combine-vectors',\n  '10-9': 'separate-vectors',\n  '10-11': 'pan-to-dot-product',\n  '11-10': 'pan-from-dot-product',\n  '11-12': 'show-multiplication',\n  '12-11': 'hide-multiplication',\n  '12-13': 'show-sum',\n  '13-12': 'hide-sum',\n  '13-14': 'scale-vectors-ab',\n  '14-13': 'unscale-vectors-ab',\n  '14-15': 'scale-sum',\n  '15-14': 'unscale-sum',\n  '15-16': 'zoom-out-dot-product',\n  '16-15': 'zoom-in-dot-product',\n  '16-17': 'pan-to-tokens',\n  '17-16': 'pan-from-tokens',\n  '17-18': 'show-dog-q',\n  '18-17': 'hide-dog-q',\n  '18-19': 'zoom-in-q',\n  '19-18': 'zoom-out-q',\n  '19-20': 'show-hot-k',\n  '20-19': 'hide-hot-k',\n  '20-21': 'zoom-out-k',\n  '21-20': 'zoom-in-k',\n  '21-22': 'show-qk-label',\n  '22-21': 'hide-qk-label',\n  '22-23': 'scale-qk',\n  '23-22': 'unscale-qk',\n  '23-24': 'show-all-k',\n  '24-23': 'hide-all-k',\n  '24-25': 'squish-qk',\n  '25-24': 'unsquish-qk',\n  '25-26': 'show-sum-equals',\n  '26-25': 'hide-sum-equals',\n  '26-27': 'show-score-colors',\n  '27-26': 'hide-score-colors',\n  '27-28': 'show-all-v',\n  '28-27': 'hide-all-v',\n  '28-29': 'show-v-label',\n  '29-28': 'hide-v-label',\n  '29-30': 'tilt-camera',\n  '30-29': 'untilt-camera',\n  '30-31': 'offset-v-vectors',\n  '31-30': 'unoffset-v-vectors',\n  '31-32': 'show-v-sum',\n  '32-31': 'hide-v-sum',\n  '32-33': 'reset-for-all-tokens',\n  '33-32': 'undo-reset-for-all-tokens',\n  '33-34': 'pulse-token-vectors',\n  '34-33': 'undo-pulse-token-vectors',\n  '34-35': 'flicker-token-vectors',\n  '35-34': 'undo-flicker-token-vectors',\n  '35-36': 'rotate-camera',\n  '36-35': 'undo-rotate-camera',\n};\n\nexport function injectSequences(worldElement: Element): void {\n  const fragments = [\n    step01,\n    step12,\n    step23,\n    step34,\n    step45,\n    step56,\n    step67,\n    step78,\n    step89,\n    step910,\n    step1011,\n    step1112,\n    step1213,\n    step1314,\n    step1415,\n    step1516,\n    step1617,\n    step1718,\n    step1819,\n    step1920,\n    step2021,\n    step2122,\n    step2223,\n    step2324,\n    step2425,\n    step2526,\n    step2627,\n    step2728,\n    step2829,\n    step2930,\n    step3031,\n    step3132,\n    step3233,\n    step3334,\n    step3435,\n    step3536,\n  ];\n\n  for (const fragment of fragments) {\n    const temp = document.createElement('div');\n    temp.innerHTML = fragment.trim();\n\n    for (const child of Array.from(temp.children)) {\n      worldElement.appendChild(child);\n    }\n  }\n}\n","import { initCanvas, type CanvasConfig, DARK } from '@blog-components/canvas';\nimport { createPlugin } from '@blog-components/sequence';\nimport { setupRecording } from '@blog-components/recorder';\nimport {\n  TokenDisplayPlugin,\n  TokenDriver,\n  TokenVectorPlugin,\n  setTokenDriverText,\n  addTokenBoxConfig,\n  addTokenVectorConfig,\n  TokenArrowPlugin,\n  addTokenArrowConfig,\n  AxisGraphPlugin,\n  AxisGraph,\n  NeuralNetworkPlugin,\n  NeuralNetwork,\n  TokenSwapDriverPlugin,\n  TokenSwapDriver,\n  BracketVectorPlugin,\n  BracketVector,\n  DotProductPlugin,\n  DotProduct,\n  ProjectionVectorPlugin,\n  addProjectionVectorConfig,\n  DotProductLabelPlugin,\n  DotProductLabel,\n  AttentionScorePlugin,\n  addAttentionScoreConfig,\n  setAttentionScores,\n  AttentionSumPlugin,\n  addAttentionSumConfig,\n  VLabelPlugin,\n  VFormulaLabelPlugin,\n  VFormulaLabel,\n} from './src';\nimport { injectSequences, STEP_SEQUENCES } from './sequences';\n\nconst demos: CanvasConfig[] = [\n  {\n    canvasId: 'canvas-1',\n    theme: DARK,\n    createPlugin: () => [\n      createPlugin(STEP_SEQUENCES),\n      TokenDisplayPlugin,\n      TokenVectorPlugin,\n      TokenArrowPlugin,\n      AxisGraphPlugin,\n      NeuralNetworkPlugin,\n      TokenSwapDriverPlugin,\n      ProjectionVectorPlugin,\n      BracketVectorPlugin,\n      DotProductPlugin,\n      DotProductLabelPlugin,\n      AttentionScorePlugin,\n      AttentionSumPlugin,\n      VLabelPlugin,\n      VFormulaLabelPlugin,\n    ],\n    setupUI: (state, theme) => {\n      const tokens = state.getEntityByName('tokens');\n      if (tokens !== null) {\n        TokenDriver.color[tokens] = theme.foreground;\n        TokenDriver.baseY[tokens] = -0.3;\n        TokenDriver.separatedY[tokens] = 0;\n        setTokenDriverText(state, tokens, 'the hot dog was barking');\n        addTokenBoxConfig(state, tokens, { color: theme.teal, padding: 0.05, offsetT: 0 });\n        addTokenArrowConfig(state, tokens, {\n          color: theme.muted,\n          arrowHeight: 0.6,\n          startOffset: 0.2,\n        });\n        addTokenVectorConfig(state, tokens, {\n          color: theme.teal,\n          flickerColor: theme.negative,\n          arrowHeight: 0.6,\n          arrowStartOffset: 0.2,\n        });\n        state.addComponent(tokens, TokenSwapDriver, {\n          networkX: 7,\n          networkY: -15,\n          borderColor: theme.yellow,\n        });\n        addProjectionVectorConfig(state, tokens, {\n          vectorHeight: 2.0,\n          vectorWidth: 0.25,\n          vectorGap: 0.25,\n          qColor: theme.green,\n          kColor: theme.blue,\n          vColor: theme.teal,\n        });\n        addAttentionScoreConfig(state, tokens, {\n          fontSize: 0.6,\n          color: theme.teal,\n          offsetAboveK: 0.5,\n        });\n        setAttentionScores(state, tokens, [2, 7, 10, 1]);\n        addAttentionSumConfig(state, tokens, {\n          fontSize: 0.5,\n          color: theme.foreground,\n          plusOffsetX: -0.1,\n          equalsOffsetX: 0.8,\n          vSumOffsetX: -0.8,\n          vEqualsOffsetX: 0.2,\n        });\n      }\n\n      const network = state.getEntityByName('neural-network');\n      if (network !== null) {\n        NeuralNetwork.connections[network] = 0;\n      }\n\n      const graph = state.getEntityByName('vector-graph');\n      if (graph !== null) {\n        AxisGraph.axisColor[graph] = theme.foreground;\n        AxisGraph.vectorColor[graph] = theme.foreground;\n      }\n\n      const vectorA = state.getEntityByName('vector-a');\n      if (vectorA !== null) {\n        BracketVector.color[vectorA] = theme.foreground;\n      }\n\n      const vectorB = state.getEntityByName('vector-b');\n      if (vectorB !== null) {\n        BracketVector.color[vectorB] = theme.foreground;\n      }\n\n      const resultVector = state.getEntityByName('result-vector');\n      if (resultVector !== null) {\n        BracketVector.color[resultVector] = theme.foreground;\n      }\n\n      const dotProduct = state.getEntityByName('dot-product');\n      if (dotProduct !== null) {\n        DotProduct.color[dotProduct] = theme.foreground;\n      }\n\n      const qkLabel = state.getEntityByName('qk-label');\n      if (qkLabel !== null) {\n        DotProductLabel.qColor[qkLabel] = theme.positive;\n        DotProductLabel.dotColor[qkLabel] = theme.foreground;\n        DotProductLabel.kColor[qkLabel] = theme.blue;\n        DotProductLabel.resultColor[qkLabel] = theme.teal;\n      }\n\n      const vFormulaLabel = state.getEntityByName('v-formula-label');\n      if (vFormulaLabel !== null) {\n        VFormulaLabel.qColor[vFormulaLabel] = theme.positive;\n        VFormulaLabel.kColor[vFormulaLabel] = theme.blue;\n        VFormulaLabel.vColor[vFormulaLabel] = theme.teal;\n        VFormulaLabel.parenColor[vFormulaLabel] = theme.foreground;\n      }\n    },\n  },\n];\n\nfunction injectVideoEntities(worldElement: Element): void {\n  const neuralNetwork = document.createElement('entity');\n  neuralNetwork.setAttribute('name', 'neural-network');\n  neuralNetwork.setAttribute('transform', 'pos: 0 -15 0; scale: 0.5');\n  neuralNetwork.setAttribute('neural-network', 'connections: 0');\n  worldElement.appendChild(neuralNetwork);\n\n  const qkLabel = document.createElement('entity');\n  qkLabel.setAttribute('name', 'qk-label');\n  qkLabel.setAttribute('transform', 'pos: 0 8 0');\n  qkLabel.setAttribute('dot-product-label', 'font-size: 0.65; spacing: 0.55');\n  worldElement.appendChild(qkLabel);\n\n  const vLabel = document.createElement('entity');\n  vLabel.setAttribute('name', 'v-label');\n  vLabel.setAttribute('transform', 'pos: 0 8 0');\n  vLabel.setAttribute('v-label', 'font-size: 0.65; color: 0x5a9bb0');\n  worldElement.appendChild(vLabel);\n\n  const vFormulaLabel = document.createElement('entity');\n  vFormulaLabel.setAttribute('name', 'v-formula-label');\n  vFormulaLabel.setAttribute('transform', 'pos: 0 8 0');\n  vFormulaLabel.setAttribute('v-formula-label', 'font-size: 0.65; spacing: 0.5');\n  worldElement.appendChild(vFormulaLabel);\n}\n\nif (typeof document !== 'undefined') {\n  const init = () => {\n    const world = document.querySelector('world[canvas=\"#canvas-1\"]');\n    if (world) {\n      injectVideoEntities(world);\n      injectSequences(world);\n    }\n    initCanvas(demos);\n    setupRecording('#canvas-1', STEP_SEQUENCES);\n  };\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n}\n"],"names":["DEFAULT_CONFIG","__accessCheck","obj","member","msg","__privateGet","getter","__privateAdd","value","__privateSet","setter","__privateWrapper","__privateMethod","method","bytes","view","u8","u16","i16","u24","u32","i32","u64","fixed_8_8","fixed_16_16","fixed_2_30","ascii","text","nullTerminated","bytes2","_","last","arr","lastPresentedSample","samples","result","sample","intoTimescale","timeInSeconds","timescale","round","rotationMatrix","rotationInDegrees","theta","cosTheta","sinTheta","IDENTITY_MATRIX","matrixToBytes","matrix","deepClone","x","key","isU32","box","type","contents","children","fullBox","version","flags","ftyp","details","minorVersion","mdat","reserveLargeSize","free","size","moov","tracks","creationTime","fragmented","mvhd","trak","mvex","duration","lastSample","GLOBAL_TIMESCALE","nextTrackId","needsU64","u32OrU64","track","tkhd","mdia","durationInGlobalTimescale","mdhd","hdlr","minf","localDuration","componentSubtype","vmhd","smhd","dinf","stbl","dref","url","needsCtts","stsd","stts","stss","stsc","stsz","stco","ctts","videoSampleDescription","VIDEO_CODEC_TO_BOX_NAME","soundSampleDescription","AUDIO_CODEC_TO_BOX_NAME","compressionType","VIDEO_CODEC_TO_CONFIGURATION_BOX","colr","COLOR_PRIMARIES_MAP","TRANSFER_CHARACTERISTICS_MAP","MATRIX_COEFFICIENTS_MAP","avcC","hvcC","vpcC","decoderConfig","parts","profile","level","thirdByte","av1C","firstByte","AUDIO_CODEC_TO_CONFIGURATION_BOX","esds","description","dOps","preskip","gain","view2","keySamples","index","trex","moof","sequenceNumber","mfhd","traf","fragmentSampleFlags","byte1","byte2","byte3","byte4","sampleIsDifferenceSample","tfhd","tfdt","trun","tfFlags","referenceSample","referenceSampleInfo","allSampleDurations","allSampleSizes","allSampleFlags","allSampleCompositionTimeOffsets","uniqueSampleDurations","uniqueSampleSizes","uniqueSampleFlags","uniqueSampleCompositionTimeOffsets","firstSampleFlagsPresent","sampleDurationPresent","sampleSizePresent","sampleFlagsPresent","sampleCompositionTimeOffsetsPresent","i","mfra","tfra","mfro","trackIndex","chunk","Target","ArrayBufferTarget","StreamTarget","options","FileSystemWritableFileStreamTarget","stream","_helper","_helperView","Writer","newPos","box2","startPos","child","endPos","_target","_buffer","_bytes","_maxPos","_ensureSize","ensureSize_fn","ArrayBufferTargetWriter","target","data","newLength","newBuffer","newBytes","DEFAULT_CHUNK_SIZE","MAX_CHUNKS_AT_ONCE","_target2","_sections","_chunked","_chunkSize","_chunks","_writeDataIntoChunks","writeDataIntoChunks_fn","_insertSectionIntoChunk","insertSectionIntoChunk_fn","_createChunk","createChunk_fn","_flushChunks","flushChunks_fn","StreamTargetWriter","chunks","sorted","a","b","lastChunk","section","position","chunkIndex","relativePosition","toWrite","low","high","mid","includesPosition","force","FileSystemWritableFileStreamTargetWriter","SUPPORTED_VIDEO_CODECS","SUPPORTED_AUDIO_CODECS","TIMESTAMP_OFFSET","FIRST_TIMESTAMP_BEHAVIORS","_options","_writer","_ftypSize","_mdat","_videoTrack","_audioTrack","_creationTime","_finalizedChunks","_nextFragmentNumber","_videoSampleQueue","_audioSampleQueue","_finalized","_validateOptions","validateOptions_fn","_writeHeader","writeHeader_fn","_computeMoovSizeUpperBound","computeMoovSizeUpperBound_fn","_prepareTracks","prepareTracks_fn","_generateMpeg4AudioSpecificConfig","generateMpeg4AudioSpecificConfig_fn","_createSampleForTrack","createSampleForTrack_fn","_addSampleToTrack","addSampleToTrack_fn","_validateTimestamp","validateTimestamp_fn","_finalizeCurrentChunk","finalizeCurrentChunk_fn","_finalizeFragment","finalizeFragment_fn","_maybeFlushStreamingTargetWriter","maybeFlushStreamingTargetWriter_fn","_ensureNotFinalized","ensureNotFinalized_fn","Muxer","meta","timestamp","compositionTimeOffset","videoSample","audioSample","mdatSize","movieBox2","movieBoxSize","currentChunkPos","movieBox","mfraBox","mfraBoxSize","mdatPos","remainingBytes","videoRotation","moovSizeUpperBound","upperBound","sampleCounts","guessedCodecPrivate","objectType","sampleRate","numberOfChannels","frequencyIndex","channelConfig","configBits","paddingLength","configBytes","presentationTimestampInSeconds","decodeTimestampInSeconds","durationInSeconds","adjusted","sampleCompositionTimeOffset","timescaleUnits","delta","lastTableEntry","lastCompositionTimeOffsetTableEntry","beginNewChunk","currentChunkDuration","mostImportantTrack","chunkDuration","presentationTimestamp","decodeTimestamp","strictTimestampBehavior","noLastDecodeTimestamp","baseDecodeTimestamp","flushStreamingWriter","fragmentNumber","moofOffset","moofBox","mdatBox","totalTrackSampleSize","newMoofBox","encodeSequence","canvas","state","config","onProgress","totalFrames","muxer","encoder","e","stepTime","videoFrame","r","downloadBlob","blob","filename","getStepController","controllerName","eid","StepController","v","recordingUI","updateStatus","status","createUI","controller","onPrev","onNext","onRecord","isRecording","updateDisplay","currentEl","maxEl","prevBtn","nextBtn","recordBtn","getSequenceInfo","fromStep","toStep","sequenceMap","seqName","recordSequence","sequence","origWidth","origHeight","origStyle","startTime","frame","total","elapsed","speed","setupRecording","canvasSelector","fullConfig","checkReady","from","to","TokenDriver","GAME.defineComponent","GAME.Types","Token","TokenBoxConfig","TokenBox","tokenDriverQuery","GAME.defineQuery","tokenQuery","tokenBoxQuery","textStores","pendingMeasurements","getTextStore","store","getPendingSet","pending","setTokenDriverText","entity","getTokenDriverText","addPendingMeasurement","removePendingMeasurement","getPendingMeasurements","TokenSetupSystem","driverEid","words","w","fontSize","color","tokenEid","Transform","Parent","Word","setTextContent","TokenMeasureSystem","measureText","bounds","TokenLayoutSystem","tokenCount","measuredCount","tokens","hasDynamicToken","baseGap","gap","widths","activeCount","totalWidth","sum","gaps","totalBaseWidth","totalSeparatedWidth","baseCursor","separatedCursor","width","lerpFactor","t","targetX","targetY","createLineEntity","Line","tokenBoxTokenQuery","TokenBoxSetupSystem","underlineOnly","lineTop","lineRight","lineBottom","lineLeft","TokenBoxLayoutSystem","tokenX","tokenY","tokenZ","padding","halfWidth","halfHeight","left","right","top","bottom","boxWidth","boxHeight","offsetT","tokenDriverRecipe","TokenDisplayPlugin","addTokenBoxConfig","TokenArrowConfig","TokenArrowDriver","TokenArrow","tokenArrowQuery","tokenArrowTokenQuery","TokenArrowSetupSystem","arrowSize","thickness","lineEntity","WorldTransform","TokenArrowDriverSystem","TokenArrowLayoutSystem","growT","arrowHeight","startOffset","TokenArrowPlugin","addTokenArrowConfig","AxisGraph","axisGraphQuery","parentEid","opacity","arrowEnd","AxisGraphSetupSystem","axisColor","axisThickness","negOpacity","vectorColor","vectorThickness","vectorArrowSize","AxisGraphLayoutSystem","axisLength","vectorX","vectorY","vectorZ","axisXPos","axisXNeg","axisYPos","axisYNeg","axisZPos","axisZNeg","vector","AxisGraphPlugin","NeuralNetwork","NeuralNetworkLayer","NeuralNetworkNode","NeuralNetworkConnection","LAYER_SIZES","neuralNetworkQuery","NeuralNetworkSetupSystem","layerSpacing","nodeSpacing","depthRows","nodeSize","numLayers","startX","nodeEntities","layerIdx","nodesPerRow","rows","totalNodes","layerX","layerEntity","totalHeight","totalDepth","startY","startZ","row","col","y","z","nodeEntity","isInput","isOutput","Renderer","fromNodes","toNodes","fromNode","toNode","connectionEntity","nodeQuery","NodeCollapseSystem","layerEid","collapse","originY","originZ","connectionQuery","ConnectionAnimationSystem","numConnectionLayers","network","startNode","endNode","layerStart","layerEnd","layerT","endX","endY","endZ","scale","neuralNetworkRecipe","NeuralNetworkPlugin","lerpColor","colorA","colorB","rA","gA","bA","rB","gB","bB","g","TokenVectorConfig","TokenVectorDriver","TokenVector","tokenVectorQuery","tokenVectorTokenQuery","TokenVectorSetupSystem","vectorHeight","vectorWidth","boxEntity","createShaker","TokenVectorDriverSystem","TokenVectorLayoutSystem","colorT","arrowStartOffset","localY","baseColor","flickerColor","TokenVectorPlugin","addTokenVectorConfig","ProjectionVectorConfig","ProjectionVectorDriver","ProjectionVector","projectionVectorQuery","projectionVectorTokenQuery","createBoxEntity","height","createArrowEntity","arrowEntity","ProjectionVectorSetupSystem","qColor","kColor","vColor","arrowColor","arrowThickness","qEntity","kEntity","vEntity","qArrowEntity","kArrowEntity","vArrowEntity","ProjectionVectorDriverSystem","ProjectionVectorLayoutSystem","vectorGap","offsetAbove","arrowPadding","embeddingBoxEid","embeddingHeight","embeddingY","embeddingGrowT","embeddingTopY","qGrowT","kGrowT","vGrowT","qSquishT","kSquishT","vSquishT","spacing","squishDropY","qY","kY","vY","qScaleY","kScaleY","vScaleY","arrowStartY","arrowLength","ProjectionVectorPlugin","addProjectionVectorConfig","MAX_SCORES","AttentionScoreConfig","AttentionScore","attentionScoreQuery","attentionScoreTokenQuery","createTextEntity","AttentionScoreSetupSystem","textEntity","scoresArray","rawScore","AttentionScoreLayoutSystem","offsetAboveK","kWorldY","showSoftmax","softmaxScore","displayValue","colorLow","colorHigh","scoreColor","AttentionScorePlugin","addAttentionScoreConfig","setAttentionScores","scores","AttentionSumConfig","AttentionSum","attentionSumQuery","attentionSumConfigQuery","content","VISIBLE_INDICES","AttentionSumSetupSystem","plusEid","equalsEid","vEqualsEid","STAGGER_SPREAD","STAGGER_OFFSETS","clamp","min","max","getScoreTextWorldX","tokenIndex","textEid","getScoreWorldY","getVVectorWorldX","getVVectorWorldY","AttentionSumLayoutSystem","sumT","vSumT","equalsOffsetX","vSumOffsetX","vEqualsOffsetX","isPlus","isEquals","isVEquals","vWorldY","staggerOffset","elementT","TransformShaker","thisX","nextX","lastX","worldY","plusOffsetX","AttentionSumPlugin","addAttentionSumConfig","TokenSwapDriver","tokenSwapDriverQuery","TokenSwapDriverSystem","barkingEid","emergenceT","borderColor","showBorder","joinT","networkX","networkY","layoutX","layoutY","hotEid","hotLayoutT","hotT","dogEid","baseVectorT","dogVectorT","hotVectorT","targetGrowT","combineT","dogShakerX","hotShakerX","dogBoxEid","hotBoxEid","dogWorldX","hotWorldX","midX","dogQT","dogKT","dogVT","hotQT","hotKT","hotVT","baseQT","qStaggerT","baseKT","baseVT","qT","kT","vT","staggeredQ","hotScoreT","allScoresT","softmaxT","scoreColorT","vOffsetT","vShakerX","vShakerY","yDelta","xDelta","vectorStaggerT","vectorFlickerT","shakerScale","staggeredIntensity","pulseIntensity","primes","prime","flickerOn","TokenSwapDriverPlugin","BracketVector","bracketVectorQuery","BracketVectorSetupSystem","value1","value2","value3","BracketVectorLayoutSystem","bracketHeight","bracketWidth","hookSize","lineVisible","leftTop","leftBottom","leftVertical","rightTop","rightBottom","rightVertical","text1","text2","text3","rowSpacing","BracketVectorPlugin","DotProduct","dotProductQuery","posX","posY","MULT_OFFSET_X","EQ_OFFSET_X","OFFSETS","SPREAD","DotProductSetupSystem","rowHeight","rowYs","SUM_OFFSET_X","DotProductDriverSystem","sumBounceT","sumEid","bounceScale","DotProductPlugin","DotProductLabel","dotProductLabelQuery","DotProductLabelSetupSystem","dotColor","resultColor","DotProductLabelDriverSystem","dotT","equalsT","resultT","dotEntity","equalsEntity","resultEntity","DotProductLabelPlugin","VLabel","vLabelQuery","VLabelSetupSystem","VLabelDriverSystem","VLabelPlugin","VFormulaLabel","vFormulaLabelQuery","VFormulaLabelSetupSystem","parenColor","offset","VFormulaLabelDriverSystem","entities","VFormulaLabelPlugin","step01","step12","step23","step34","step45","step56","step67","step78","step89","step910","step1011","step1112","step1213","step1314","step1415","step1516","step1617","step1718","step1819","step1920","step2021","step2122","step2223","step2324","step2425","step2526","step2627","step2728","step2829","step2930","step3031","step3132","step3233","step3334","step3435","step3536","STEP_SEQUENCES","injectSequences","worldElement","fragments","fragment","temp","demos","DARK","createPlugin","theme","graph","vectorA","vectorB","resultVector","dotProduct","qkLabel","vFormulaLabel","injectVideoEntities","neuralNetwork","vLabel","init","world","initCanvas"],"mappings":"mKAQO,MAAMA,GAAkC,CAC7C,IAAK,GACL,QAAS,IACT,MAAO,KACP,OAAQ,KACR,gBAAiB,CACnB,ECdA,IAAIC,GAAgB,CAACC,EAAKC,EAAQC,IAAQ,CACxC,GAAI,CAACD,EAAO,IAAID,CAAG,EACjB,MAAM,UAAU,UAAYE,CAAG,CACnC,EACIC,EAAe,CAACH,EAAKC,EAAQG,KAC/BL,GAAcC,EAAKC,EAAQ,yBAAyB,EAC7CG,EAASA,EAAO,KAAKJ,CAAG,EAAIC,EAAO,IAAID,CAAG,GAE/CK,EAAe,CAACL,EAAKC,EAAQK,IAAU,CACzC,GAAIL,EAAO,IAAID,CAAG,EAChB,MAAM,UAAU,mDAAmD,EACrEC,aAAkB,QAAUA,EAAO,IAAID,CAAG,EAAIC,EAAO,IAAID,EAAKM,CAAK,CACrE,EACIC,GAAe,CAACP,EAAKC,EAAQK,EAAOE,KACtCT,GAAcC,EAAKC,EAAQ,wBAAwB,EAChBA,EAAO,IAAID,EAAKM,CAAK,EACjDA,GAELG,GAAmB,CAACT,EAAKC,EAAQO,EAAQJ,KAAY,CACvD,IAAI,EAAEE,EAAO,CACXC,GAAaP,EAAKC,EAAQK,CAAa,CACzC,EACA,IAAI,GAAI,CACN,OAAOH,EAAaH,EAAKC,EAAQG,CAAM,CACzC,CACF,GACIM,EAAkB,CAACV,EAAKC,EAAQU,KAClCZ,GAAcC,EAAKC,EAAQ,uBAAuB,EAC3CU,GAILC,EAAQ,IAAI,WAAW,CAAC,EACxBC,GAAO,IAAI,SAASD,EAAM,MAAM,EAChCE,EAAMR,GACD,EAAEA,EAAQ,IAAM,KAAO,GAAG,EAE/BS,EAAOT,IACTO,GAAK,UAAU,EAAGP,EAAO,EAAK,EACvB,CAACM,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,GAExBI,GAAOV,IACTO,GAAK,SAAS,EAAGP,EAAO,EAAK,EACtB,CAACM,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,GAExBK,GAAOX,IACTO,GAAK,UAAU,EAAGP,EAAO,EAAK,EACvB,CAACM,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,GAElCM,EAAOZ,IACTO,GAAK,UAAU,EAAGP,EAAO,EAAK,EACvB,CAACM,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,GAE5CO,GAAOb,IACTO,GAAK,SAAS,EAAGP,EAAO,EAAK,EACtB,CAACM,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,GAE5CQ,GAAOd,IACTO,GAAK,UAAU,EAAG,KAAK,MAAMP,EAAQ,GAAK,EAAE,EAAG,EAAK,EACpDO,GAAK,UAAU,EAAGP,EAAO,EAAK,EACvB,CAACM,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,GAEpFS,GAAaf,IACfO,GAAK,SAAS,EAAG,GAAK,EAAIP,EAAO,EAAK,EAC/B,CAACM,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,GAExBU,GAAehB,IACjBO,GAAK,SAAS,EAAG,GAAK,GAAKP,EAAO,EAAK,EAChC,CAACM,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,GAE5CW,GAAcjB,IAChBO,GAAK,SAAS,EAAG,GAAK,GAAKP,EAAO,EAAK,EAChC,CAACM,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,GAE5CY,GAAQ,CAACC,EAAMC,EAAiB,KAAU,CAC5C,IAAIC,EAAS,MAAMF,EAAK,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAACG,EAAG,IAAMH,EAAK,WAAW,CAAC,CAAC,EAC3E,OAAIC,GACFC,EAAO,KAAK,CAAC,EACRA,CACT,EACIE,GAAQC,GACHA,GAAOA,EAAIA,EAAI,OAAS,CAAC,EAE9BC,GAAuBC,GAAY,CACrC,IAAIC,EACJ,QAASC,KAAUF,GACb,CAACC,GAAUC,EAAO,sBAAwBD,EAAO,yBACnDA,EAASC,GAGb,OAAOD,CACT,EACIE,GAAgB,CAACC,EAAeC,EAAWC,EAAQ,KAAS,CAC9D,IAAIhC,EAAQ8B,EAAgBC,EAC5B,OAAOC,EAAQ,KAAK,MAAMhC,CAAK,EAAIA,CACrC,EACIiC,GAAkBC,GAAsB,CAC1C,IAAIC,EAAQD,GAAqB,KAAK,GAAK,KACvCE,EAAW,KAAK,IAAID,CAAK,EACzBE,EAAW,KAAK,IAAIF,CAAK,EAC7B,MAAO,CACLC,EACAC,EACA,EACA,CAACA,EACDD,EACA,EACA,EACA,EACA,CACJ,CACA,EACIE,GAAkBL,GAAe,CAAC,EAClCM,GAAiBC,GACZ,CACLxB,GAAYwB,EAAO,CAAC,CAAC,EACrBxB,GAAYwB,EAAO,CAAC,CAAC,EACrBvB,GAAWuB,EAAO,CAAC,CAAC,EACpBxB,GAAYwB,EAAO,CAAC,CAAC,EACrBxB,GAAYwB,EAAO,CAAC,CAAC,EACrBvB,GAAWuB,EAAO,CAAC,CAAC,EACpBxB,GAAYwB,EAAO,CAAC,CAAC,EACrBxB,GAAYwB,EAAO,CAAC,CAAC,EACrBvB,GAAWuB,EAAO,CAAC,CAAC,CACxB,EAEIC,GAAaC,GACX,CAACA,GAED,OAAOA,GAAM,SACRA,EACL,MAAM,QAAQA,CAAC,EACVA,EAAE,IAAID,EAAS,EACjB,OAAO,YAAY,OAAO,QAAQC,CAAC,EAAE,IAAI,CAAC,CAACC,EAAK3C,CAAK,IAAM,CAAC2C,EAAKF,GAAUzC,CAAK,CAAC,CAAC,CAAC,EAExF4C,GAAS5C,GACJA,GAAS,GAAKA,EAAQ,GAAK,GAIhC6C,EAAM,CAACC,EAAMC,EAAUC,KAAc,CACvC,KAAAF,EACA,SAAUC,GAAY,IAAI,WAAWA,EAAS,KAAK,EAAE,CAAC,EACtD,SAAAC,CACF,GACIC,EAAU,CAACH,EAAMI,EAASC,EAAOJ,EAAUC,IAAaH,EAC1DC,EACA,CAACtC,EAAG0C,CAAO,EAAGvC,GAAIwC,CAAK,EAAGJ,GAAY,EAAE,EACxCC,CACF,EACII,GAAQC,GAAY,CACtB,IAAIC,EAAe,IACnB,OAAID,EAAQ,WACHR,EAAI,OAAQ,CACjB3B,GAAM,MAAM,EAEZN,EAAI0C,CAAY,EAGhBpC,GAAM,MAAM,EACZA,GAAM,MAAM,EACZA,GAAM,MAAM,CAClB,CAAK,EACI2B,EAAI,OAAQ,CACjB3B,GAAM,MAAM,EAEZN,EAAI0C,CAAY,EAGhBpC,GAAM,MAAM,EACZmC,EAAQ,SAAWnC,GAAM,MAAM,EAAI,CAAA,EACnCA,GAAM,MAAM,CAChB,CAAG,CACH,EACIqC,GAAQC,IAAsB,CAAE,KAAM,OAAQ,UAAWA,IACzDC,GAAQC,IAAU,CAAE,KAAM,OAAQ,KAAAA,CAAI,GACtCC,GAAO,CAACC,EAAQC,EAAcC,EAAa,KAAUjB,EAAI,OAAQ,KAAM,CACzEkB,GAAKF,EAAcD,CAAM,EACzB,GAAGA,EAAO,IAAKlB,GAAMsB,GAAKtB,EAAGmB,CAAY,CAAC,EAC1CC,EAAaG,GAAKL,CAAM,EAAI,IAC9B,CAAC,EACGG,GAAO,CAACF,EAAcD,IAAW,CACnC,IAAIM,EAAWrC,GAAc,KAAK,IAChC,EACA,GAAG+B,EAAO,OAAQlB,GAAMA,EAAE,QAAQ,OAAS,CAAC,EAAE,IAAKA,GAAM,CACvD,MAAMyB,EAAa1C,GAAoBiB,EAAE,OAAO,EAChD,OAAOyB,EAAW,sBAAwBA,EAAW,QACvD,CAAC,CACL,EAAKC,EAAgB,EACfC,EAAc,KAAK,IAAI,GAAGT,EAAO,IAAKlB,GAAMA,EAAE,EAAE,CAAC,EAAI,EACrD4B,EAAW,CAAC1B,GAAMiB,CAAY,GAAK,CAACjB,GAAMsB,CAAQ,EAClDK,EAAWD,EAAWxD,GAAMF,EAChC,OAAOqC,EAAQ,OAAQ,CAACqB,EAAU,EAAG,CACnCC,EAASV,CAAY,EAErBU,EAASV,CAAY,EAErBjD,EAAIwD,EAAgB,EAEpBG,EAASL,CAAQ,EAEjBlD,GAAY,CAAC,EAEbD,GAAU,CAAC,EAEX,MAAM,EAAE,EAAE,KAAK,CAAC,EAEhBwB,GAAcD,EAAe,EAE7B,MAAM,EAAE,EAAE,KAAK,CAAC,EAEhB1B,EAAIyD,CAAW,CAEnB,CAAG,CACH,EACIL,GAAO,CAACQ,EAAOX,IAAiBhB,EAAI,OAAQ,KAAM,CACpD4B,GAAKD,EAAOX,CAAY,EACxBa,GAAKF,EAAOX,CAAY,CAC1B,CAAC,EACGY,GAAO,CAACD,EAAOX,IAAiB,CAClC,IAAIM,EAAa1C,GAAoB+C,EAAM,OAAO,EAC9CG,EAA4B9C,GAC9BsC,EAAaA,EAAW,sBAAwBA,EAAW,SAAW,EACtEC,EACJ,EACME,EAAW,CAAC1B,GAAMiB,CAAY,GAAK,CAACjB,GAAM+B,CAAyB,EACnEJ,EAAWD,EAAWxD,GAAMF,EAC5B4B,EACJ,OAAIgC,EAAM,KAAK,OAAS,QACtBhC,EAAS,OAAOgC,EAAM,KAAK,UAAa,SAAWvC,GAAeuC,EAAM,KAAK,QAAQ,EAAIA,EAAM,KAAK,SAEpGhC,EAASF,GAEJW,EAAQ,OAAQ,CAACqB,EAAU,EAAG,CACnCC,EAASV,CAAY,EAErBU,EAASV,CAAY,EAErBjD,EAAI4D,EAAM,EAAE,EAEZ5D,EAAI,CAAC,EAEL2D,EAASI,CAAyB,EAElC,MAAM,CAAC,EAAE,KAAK,CAAC,EAEflE,EAAI,CAAC,EAELA,EAAI,CAAC,EAELM,GAAUyD,EAAM,KAAK,OAAS,QAAU,EAAI,CAAC,EAE7C/D,EAAI,CAAC,EAEL8B,GAAcC,CAAM,EAEpBxB,GAAYwD,EAAM,KAAK,OAAS,QAAUA,EAAM,KAAK,MAAQ,CAAC,EAE9DxD,GAAYwD,EAAM,KAAK,OAAS,QAAUA,EAAM,KAAK,OAAS,CAAC,CAEnE,CAAG,CACH,EACIE,GAAO,CAACF,EAAOX,IAAiBhB,EAAI,OAAQ,KAAM,CACpD+B,GAAKJ,EAAOX,CAAY,EACxBgB,GAAKL,EAAM,KAAK,OAAS,QAAU,OAAS,MAAM,EAClDM,GAAKN,CAAK,CACZ,CAAC,EACGI,GAAO,CAACJ,EAAOX,IAAiB,CAClC,IAAIM,EAAa1C,GAAoB+C,EAAM,OAAO,EAC9CO,EAAgBlD,GAClBsC,EAAaA,EAAW,sBAAwBA,EAAW,SAAW,EACtEK,EAAM,SACV,EACMF,EAAW,CAAC1B,GAAMiB,CAAY,GAAK,CAACjB,GAAMmC,CAAa,EACvDR,EAAWD,EAAWxD,GAAMF,EAChC,OAAOqC,EAAQ,OAAQ,CAACqB,EAAU,EAAG,CACnCC,EAASV,CAAY,EAErBU,EAASV,CAAY,EAErBjD,EAAI4D,EAAM,SAAS,EAEnBD,EAASQ,CAAa,EAEtBtE,EAAI,KAAK,EAETA,EAAI,CAAC,CAET,CAAG,CACH,EACIoE,GAAQG,GAAqB/B,EAAQ,OAAQ,EAAG,EAAG,CACrD/B,GAAM,MAAM,EAEZA,GAAM8D,CAAgB,EAEtBpE,EAAI,CAAC,EAELA,EAAI,CAAC,EAELA,EAAI,CAAC,EAELM,GAAM,iBAAkB,EAAI,CAE9B,CAAC,EACG4D,GAAQN,GAAU3B,EAAI,OAAQ,KAAM,CACtC2B,EAAM,KAAK,OAAS,QAAUS,GAAI,EAAKC,GAAI,EAC3CC,GAAI,EACJC,GAAKZ,CAAK,CACZ,CAAC,EACGS,GAAO,IAAMhC,EAAQ,OAAQ,EAAG,EAAG,CACrCxC,EAAI,CAAC,EAELA,EAAI,CAAC,EAELA,EAAI,CAAC,EAELA,EAAI,CAAC,CAEP,CAAC,EACGyE,GAAO,IAAMjC,EAAQ,OAAQ,EAAG,EAAG,CACrCxC,EAAI,CAAC,EAELA,EAAI,CAAC,CAEP,CAAC,EACG0E,GAAO,IAAMtC,EAAI,OAAQ,KAAM,CACjCwC,GAAI,CACN,CAAC,EACGA,GAAO,IAAMpC,EAAQ,OAAQ,EAAG,EAAG,CACrCrC,EAAI,CAAC,CAEP,EAAG,CACD0E,GAAG,CACL,CAAC,EACGA,GAAM,IAAMrC,EAAQ,OAAQ,EAAG,CAAC,EAChCmC,GAAQZ,GAAU,CACpB,MAAMe,EAAYf,EAAM,2BAA2B,OAAS,GAAKA,EAAM,2BAA2B,KAAM9B,GAAMA,EAAE,8BAAgC,CAAC,EACjJ,OAAOG,EAAI,OAAQ,KAAM,CACvB2C,GAAKhB,CAAK,EACViB,GAAKjB,CAAK,EACVkB,GAAKlB,CAAK,EACVmB,GAAKnB,CAAK,EACVoB,GAAKpB,CAAK,EACVqB,GAAKrB,CAAK,EACVe,EAAYO,GAAKtB,CAAK,EAAI,IAC9B,CAAG,CACH,EACIgB,GAAQhB,GAAUvB,EAAQ,OAAQ,EAAG,EAAG,CAC1CrC,EAAI,CAAC,CAEP,EAAG,CACD4D,EAAM,KAAK,OAAS,QAAUuB,GAC5BC,GAAwBxB,EAAM,KAAK,KAAK,EACxCA,CACJ,EAAMyB,GACFC,GAAwB1B,EAAM,KAAK,KAAK,EACxCA,CACJ,CACA,CAAC,EACGuB,GAAyB,CAACI,EAAiB3B,IAAU3B,EAAIsD,EAAiB,CAC5E,MAAM,CAAC,EAAE,KAAK,CAAC,EAEf1F,EAAI,CAAC,EAELA,EAAI,CAAC,EAELA,EAAI,CAAC,EAEL,MAAM,EAAE,EAAE,KAAK,CAAC,EAEhBA,EAAI+D,EAAM,KAAK,KAAK,EAEpB/D,EAAI+D,EAAM,KAAK,MAAM,EAErB5D,EAAI,OAAO,EAEXA,EAAI,OAAO,EAEXA,EAAI,CAAC,EAELH,EAAI,CAAC,EAEL,MAAM,EAAE,EAAE,KAAK,CAAC,EAEhBA,EAAI,EAAE,EAENC,GAAI,KAAK,CAEX,EAAG,CACD0F,GAAiC5B,EAAM,KAAK,KAAK,EAAEA,CAAK,EACxDA,EAAM,KAAK,cAAc,WAAa6B,GAAK7B,CAAK,EAAI,IACtD,CAAC,EACG8B,GAAsB,CACxB,MAAS,EAET,QAAW,EAEX,UAAa,CAEf,EACIC,GAA+B,CACjC,MAAS,EAET,UAAa,EAEb,eAAgB,EAElB,EACIC,GAA0B,CAC5B,IAAO,EAEP,MAAS,EAET,QAAW,EAEX,UAAa,CAEf,EACIH,GAAQ7B,GAAU3B,EAAI,OAAQ,CAChC3B,GAAM,MAAM,EAEZT,EAAI6F,GAAoB9B,EAAM,KAAK,cAAc,WAAW,SAAS,CAAC,EAEtE/D,EAAI8F,GAA6B/B,EAAM,KAAK,cAAc,WAAW,QAAQ,CAAC,EAE9E/D,EAAI+F,GAAwBhC,EAAM,KAAK,cAAc,WAAW,MAAM,CAAC,EAEvEhE,GAAIgE,EAAM,KAAK,cAAc,WAAW,UAAY,EAAI,IAAM,CAAC,CAEjE,CAAC,EACGiC,GAAQjC,GAAUA,EAAM,KAAK,eAAiB3B,EAAI,OAAQ,CAE5D,GAAG,IAAI,WAAW2B,EAAM,KAAK,cAAc,WAAW,CACxD,CAAC,EACGkC,GAAQlC,GAAUA,EAAM,KAAK,eAAiB3B,EAAI,OAAQ,CAE5D,GAAG,IAAI,WAAW2B,EAAM,KAAK,cAAc,WAAW,CACxD,CAAC,EACGmC,GAAQnC,GAAU,CACpB,GAAI,CAACA,EAAM,KAAK,cACd,OAAO,KAET,IAAIoC,EAAgBpC,EAAM,KAAK,cAC/B,GAAI,CAACoC,EAAc,WACjB,MAAM,IAAI,MAAM,yDAAyD,EAE3E,IAAIC,EAAQD,EAAc,MAAM,MAAM,GAAG,EACrCE,EAAU,OAAOD,EAAM,CAAC,CAAC,EACzBE,EAAQ,OAAOF,EAAM,CAAC,CAAC,EAGvBG,GAFW,OAAOH,EAAM,CAAC,CAAC,GAED,IADL,GACgC,GAAK,OAAOD,EAAc,WAAW,SAAS,EAItG,OAAO3D,EAAQ,OAAQ,EAAG,EAAG,CAC3BzC,EAAGsG,CAAO,EAEVtG,EAAGuG,CAAK,EAERvG,EAAGwG,CAAS,EAEZxG,EAVoB,CAUF,EAElBA,EAX4B,CAWF,EAE1BA,EAZuB,CAYF,EAErBC,EAAI,CAAC,CAET,CAAG,CACH,EACIwG,GAAO,IAAM,CAGf,IAAIC,GAFS,GAEc,GADb,EAEd,OAAOrE,EAAI,OAAQ,CACjBqE,EACA,EACA,EACA,CACJ,CAAG,CACH,EACIjB,GAAyB,CAACE,EAAiB3B,IAAU3B,EAAIsD,EAAiB,CAC5E,MAAM,CAAC,EAAE,KAAK,CAAC,EAEf1F,EAAI,CAAC,EAELA,EAAI,CAAC,EAELA,EAAI,CAAC,EAELG,EAAI,CAAC,EAELH,EAAI+D,EAAM,KAAK,gBAAgB,EAE/B/D,EAAI,EAAE,EAENA,EAAI,CAAC,EAELA,EAAI,CAAC,EAELO,GAAYwD,EAAM,KAAK,UAAU,CAEnC,EAAG,CACD2C,GAAiC3C,EAAM,KAAK,KAAK,EAAEA,CAAK,CAC1D,CAAC,EACG4C,GAAQ5C,GAAU,CACpB,IAAI6C,EAAc,IAAI,WAAW7C,EAAM,KAAK,cAAc,WAAW,EACrE,OAAOvB,EAAQ,OAAQ,EAAG,EAAG,CAE3BrC,EAAI,QAAQ,EAEZJ,EAAG,GAAK6G,EAAY,UAAU,EAE9B5G,EAAI,CAAC,EAELD,EAAG,CAAC,EAEJI,EAAI,QAAQ,EAEZJ,EAAG,GAAK6G,EAAY,UAAU,EAE9B7G,EAAG,EAAE,EAELA,EAAG,EAAE,EAELG,GAAI,CAAC,EAELC,EAAI,MAAM,EAEVA,EAAI,MAAM,EAEVA,EAAI,QAAQ,EAEZJ,EAAG6G,EAAY,UAAU,EAEzB,GAAGA,EACHzG,EAAI,SAAS,EAEbJ,EAAG,CAAC,EAEJA,EAAG,CAAC,CAER,CAAG,CACH,EACI8G,GAAQ9C,GAAU,CACpB,IAAI+C,EAAU,KACVC,EAAO,EACX,MAAMH,EAAc7C,EAAM,KAAK,eAAe,YAC9C,GAAI6C,EAAa,CACf,GAAIA,EAAY,WAAa,GAC3B,MAAM,IAAI,UAAU,gFAAgF,EAEtG,MAAMI,EAAQ,YAAY,OAAOJ,CAAW,EAAI,IAAI,SAASA,EAAY,OAAQA,EAAY,WAAYA,EAAY,UAAU,EAAI,IAAI,SAASA,CAAW,EAC3JE,EAAUE,EAAM,UAAU,GAAI,EAAI,EAClCD,EAAOC,EAAM,SAAS,GAAI,EAAI,CAChC,CACA,OAAO5E,EAAI,OAAQ,CACjBrC,EAAG,CAAC,EAEJA,EAAGgE,EAAM,KAAK,gBAAgB,EAE9B/D,EAAI8G,CAAO,EACX3G,EAAI4D,EAAM,KAAK,UAAU,EAEzBzD,GAAUyG,CAAI,EAEdhH,EAAG,CAAC,CAER,CAAG,CACH,EACIiF,GAAQjB,GACHvB,EAAQ,OAAQ,EAAG,EAAG,CAC3BrC,EAAI4D,EAAM,kBAAkB,MAAM,EAElCA,EAAM,kBAAkB,IAAK9B,GAAM,CAEjC9B,EAAI8B,EAAE,WAAW,EAEjB9B,EAAI8B,EAAE,WAAW,CAEvB,CAAK,CACL,CAAG,EAECgD,GAAQlB,GAAU,CACpB,GAAIA,EAAM,QAAQ,MAAO9B,GAAMA,EAAE,OAAS,KAAK,EAC7C,OAAO,KACT,IAAIgF,EAAa,CAAC,GAAGlD,EAAM,QAAQ,QAAO,CAAE,EAAE,OAAO,CAAC,CAAA,CAAG5C,CAAM,IAAMA,EAAO,OAAS,KAAK,EAC1F,OAAOqB,EAAQ,OAAQ,EAAG,EAAG,CAC3BrC,EAAI8G,EAAW,MAAM,EAErBA,EAAW,IAAI,CAAC,CAACC,CAAK,IAAM/G,EAAI+G,EAAQ,CAAC,CAAC,CAE9C,CAAG,CACH,EACIhC,GAAQnB,GACHvB,EAAQ,OAAQ,EAAG,EAAG,CAC3BrC,EAAI4D,EAAM,yBAAyB,MAAM,EAEzCA,EAAM,yBAAyB,IAAK9B,GAAM,CAExC9B,EAAI8B,EAAE,UAAU,EAEhB9B,EAAI8B,EAAE,eAAe,EAErB9B,EAAI,CAAC,CAEX,CAAK,CACL,CAAG,EAECgF,GAAQpB,GAAUvB,EAAQ,OAAQ,EAAG,EAAG,CAC1CrC,EAAI,CAAC,EAELA,EAAI4D,EAAM,QAAQ,MAAM,EAExBA,EAAM,QAAQ,IAAK9B,GAAM9B,EAAI8B,EAAE,IAAI,CAAC,CAEtC,CAAC,EACGmD,GAAQrB,GACNA,EAAM,gBAAgB,OAAS,GAAKjD,GAAKiD,EAAM,eAAe,EAAE,QAAU,GAAK,GAC1EvB,EAAQ,OAAQ,EAAG,EAAG,CAC3BrC,EAAI4D,EAAM,gBAAgB,MAAM,EAEhCA,EAAM,gBAAgB,IAAK9B,GAAM5B,GAAI4B,EAAE,MAAM,CAAC,CAEpD,CAAK,EAEIO,EAAQ,OAAQ,EAAG,EAAG,CAC3BrC,EAAI4D,EAAM,gBAAgB,MAAM,EAEhCA,EAAM,gBAAgB,IAAK9B,GAAM9B,EAAI8B,EAAE,MAAM,CAAC,CAElD,CAAG,EAECoD,GAAQtB,GACHvB,EAAQ,OAAQ,EAAG,EAAG,CAC3BrC,EAAI4D,EAAM,2BAA2B,MAAM,EAE3CA,EAAM,2BAA2B,IAAK9B,GAAM,CAE1C9B,EAAI8B,EAAE,WAAW,EAEjB9B,EAAI8B,EAAE,2BAA2B,CAEvC,CAAK,CACL,CAAG,EAECuB,GAAQL,GACHf,EAAI,OAAQ,KAAMe,EAAO,IAAIgE,EAAI,CAAC,EAEvCA,GAAQpD,GACHvB,EAAQ,OAAQ,EAAG,EAAG,CAC3BrC,EAAI4D,EAAM,EAAE,EAEZ5D,EAAI,CAAC,EAELA,EAAI,CAAC,EAELA,EAAI,CAAC,EAELA,EAAI,CAAC,CAET,CAAG,EAECiH,GAAO,CAACC,EAAgBlE,IACnBf,EAAI,OAAQ,KAAM,CACvBkF,GAAKD,CAAc,EACnB,GAAGlE,EAAO,IAAIoE,EAAI,CACtB,CAAG,EAECD,GAAQD,GACH7E,EAAQ,OAAQ,EAAG,EAAG,CAC3BrC,EAAIkH,CAAc,CAEtB,CAAG,EAECG,GAAuBrG,GAAW,CACpC,IAAIsG,EAAQ,EACRC,EAAQ,EACRC,EAAQ,EACRC,EAAQ,EACRC,EAA2B1G,EAAO,OAAS,QAC/C,OAAAuG,GAAS,CAACG,EACNA,EACFJ,GAAS,EAETA,GAAS,EAEJA,GAAS,GAAKC,GAAS,GAAKC,GAAS,EAAIC,CAClD,EACIL,GAAQxD,GACH3B,EAAI,OAAQ,KAAM,CACvB0F,GAAK/D,CAAK,EACVgE,GAAKhE,CAAK,EACViE,GAAKjE,CAAK,CACd,CAAG,EAEC+D,GAAQ/D,GAAU,CACpB,IAAIkE,EAAU,EACdA,GAAW,EACXA,GAAW,GACXA,GAAW,GACXA,GAAW,OACX,IAAIC,EAAkBnE,EAAM,aAAa,QAAQ,CAAC,GAAKA,EAAM,aAAa,QAAQ,CAAC,EAC/EoE,EAAsB,CACxB,SAAUD,EAAgB,2BAC1B,KAAMA,EAAgB,KACtB,MAAOV,GAAoBU,CAAe,CAC9C,EACE,OAAO1F,EAAQ,OAAQ,EAAGyF,EAAS,CACjC9H,EAAI4D,EAAM,EAAE,EAEZ5D,EAAIgI,EAAoB,QAAQ,EAEhChI,EAAIgI,EAAoB,IAAI,EAE5BhI,EAAIgI,EAAoB,KAAK,CAEjC,CAAG,CACH,EACIJ,GAAQhE,GACHvB,EAAQ,OAAQ,EAAG,EAAG,CAC3BnC,GAAIe,GAAc2C,EAAM,aAAa,eAAgBA,EAAM,SAAS,CAAC,CAEzE,CAAG,EAECiE,GAAQjE,GAAU,CACpB,IAAIqE,EAAqBrE,EAAM,aAAa,QAAQ,IAAK9B,GAAMA,EAAE,0BAA0B,EACvFoG,EAAiBtE,EAAM,aAAa,QAAQ,IAAK9B,GAAMA,EAAE,IAAI,EAC7DqG,EAAiBvE,EAAM,aAAa,QAAQ,IAAIyD,EAAmB,EACnEe,EAAkCxE,EAAM,aAAa,QAAQ,IAAK9B,GAAMb,GAAca,EAAE,sBAAwBA,EAAE,gBAAiB8B,EAAM,SAAS,CAAC,EACnJyE,EAAwB,IAAI,IAAIJ,CAAkB,EAClDK,EAAoB,IAAI,IAAIJ,CAAc,EAC1CK,EAAoB,IAAI,IAAIJ,CAAc,EAC1CK,EAAqC,IAAI,IAAIJ,CAA+B,EAC5EK,EAA0BF,EAAkB,OAAS,GAAKJ,EAAe,CAAC,IAAMA,EAAe,CAAC,EAChGO,EAAwBL,EAAsB,KAAO,EACrDM,EAAoBL,EAAkB,KAAO,EAC7CM,EAAqB,CAACH,GAA2BF,EAAkB,KAAO,EAC1EM,EAAsCL,EAAmC,KAAO,GAAK,CAAC,GAAGA,CAAkC,EAAE,KAAM1G,GAAMA,IAAM,CAAC,EAChJS,EAAQ,EACZ,OAAAA,GAAS,EACTA,GAAS,EAAI,CAACkG,EACdlG,GAAS,IAAM,CAACmG,EAChBnG,GAAS,IAAM,CAACoG,EAChBpG,GAAS,KAAO,CAACqG,EACjBrG,GAAS,KAAO,CAACsG,EACVxG,EAAQ,OAAQ,EAAGE,EAAO,CAC/BvC,EAAI4D,EAAM,aAAa,QAAQ,MAAM,EAErC5D,EAAI4D,EAAM,aAAa,OAASA,EAAM,aAAa,YAAc,CAAC,EAElE6E,EAA0BzI,EAAImI,EAAe,CAAC,CAAC,EAAI,CAAA,EACnDvE,EAAM,aAAa,QAAQ,IAAI,CAAClD,EAAGoI,IAAM,CACvCJ,EAAwB1I,EAAIiI,EAAmBa,CAAC,CAAC,EAAI,CAAA,EAErDH,EAAoB3I,EAAIkI,EAAeY,CAAC,CAAC,EAAI,CAAA,EAE7CF,EAAqB5I,EAAImI,EAAeW,CAAC,CAAC,EAAI,CAAA,EAG9CD,EAAsC5I,GAAImI,EAAgCU,CAAC,CAAC,EAAI,CAAA,CACtF,CAAK,CACL,CAAG,CACH,EACIC,GAAQ/F,GACHf,EAAI,OAAQ,KAAM,CACvB,GAAGe,EAAO,IAAIgG,EAAI,EAClBC,GAAI,CACR,CAAG,EAECD,GAAO,CAACpF,EAAOsF,IAEV7G,EAAQ,OADD,EACkB,EAAG,CACjCrC,EAAI4D,EAAM,EAAE,EAEZ5D,EAAI,EAAE,EAENA,EAAI4D,EAAM,gBAAgB,MAAM,EAEhCA,EAAM,gBAAgB,IAAKuF,GAAU,CACnCjJ,GAAIe,GAAckI,EAAM,eAAgBvF,EAAM,SAAS,CAAC,EAExD1D,GAAIiJ,EAAM,UAAU,EAEpBnJ,EAAIkJ,EAAa,CAAC,EAElBlJ,EAAI,CAAC,EAELA,EAAI,CAAC,CAEX,CAAK,CACL,CAAG,EAECiJ,GAAO,IACF5G,EAAQ,OAAQ,EAAG,EAAG,CAG3BrC,EAAI,CAAC,CAET,CAAG,EAECoF,GAA0B,CAC5B,IAAO,OACP,KAAQ,OACR,IAAO,OACP,IAAO,MACT,EACII,GAAmC,CACrC,IAAOK,GACP,KAAQC,GACR,IAAOC,GACP,IAAOM,EACT,EACIf,GAA0B,CAC5B,IAAO,OACP,KAAQ,MACV,EACIiB,GAAmC,CACrC,IAAOC,GACP,KAAQE,EACV,EAII0C,GAAS,KAAM,CACnB,EAEIC,GAAoB,cAAcD,EAAO,CAC3C,aAAc,CACZ,MAAM,GAAG,SAAS,EAClB,KAAK,OAAS,IAChB,CACF,EACIE,GAAe,cAAcF,EAAO,CACtC,YAAYG,EAAS,CAGnB,GAFA,MAAK,EACL,KAAK,QAAUA,EACX,OAAOA,GAAY,SACrB,MAAM,IAAI,UAAU,0EAA0E,EAEhG,GAAIA,EAAQ,OAAQ,CAClB,GAAI,OAAOA,EAAQ,QAAW,WAC5B,MAAM,IAAI,UAAU,oDAAoD,EAE1E,GAAIA,EAAQ,OAAO,OAAS,EAC1B,MAAM,IAAI,UACR,6OACV,CAEI,CACA,GAAIA,EAAQ,UAAY,QAAU,OAAOA,EAAQ,SAAY,UAC3D,MAAM,IAAI,UAAU,oDAAoD,EAE1E,GAAIA,EAAQ,YAAc,SAAW,CAAC,OAAO,UAAUA,EAAQ,SAAS,GAAKA,EAAQ,UAAY,MAC/F,MAAM,IAAI,UAAU,iFAAiF,CAEzG,CACF,EACIC,GAAqC,cAAcJ,EAAO,CAC5D,YAAYK,EAAQF,EAAS,CAI3B,GAHA,MAAK,EACL,KAAK,OAASE,EACd,KAAK,QAAUF,EACX,EAAEE,aAAkB,8BACtB,MAAM,IAAI,UAAU,sFAAsF,EAE5G,GAAIF,IAAY,QAAU,OAAOA,GAAY,SAC3C,MAAM,IAAI,UAAU,iFAAiF,EAEvG,GAAIA,GACEA,EAAQ,YAAc,SAAW,CAAC,OAAO,UAAUA,EAAQ,SAAS,GAAKA,EAAQ,WAAa,GAChG,MAAM,IAAI,UAAU,8DAA8D,CAGxF,CACF,EAGIG,GAASC,GACTC,GAAS,KAAM,CACjB,aAAc,CACZ,KAAK,IAAM,EACXzK,EAAa,KAAMuK,GAAS,IAAI,WAAW,CAAC,CAAC,EAC7CvK,EAAa,KAAMwK,GAAa,IAAI,SAAS1K,EAAa,KAAMyK,EAAO,EAAE,MAAM,CAAC,EAKhF,KAAK,QAA0B,IAAI,OACrC,CAEA,KAAKG,EAAQ,CACX,KAAK,IAAMA,CACb,CACA,SAASzK,EAAO,CACdH,EAAa,KAAM0K,EAAW,EAAE,UAAU,EAAGvK,EAAO,EAAK,EACzD,KAAK,MAAMH,EAAa,KAAMyK,EAAO,EAAE,SAAS,EAAG,CAAC,CAAC,CACvD,CACA,SAAStK,EAAO,CACdH,EAAa,KAAM0K,EAAW,EAAE,UAAU,EAAG,KAAK,MAAMvK,EAAQ,GAAK,EAAE,EAAG,EAAK,EAC/EH,EAAa,KAAM0K,EAAW,EAAE,UAAU,EAAGvK,EAAO,EAAK,EACzD,KAAK,MAAMH,EAAa,KAAMyK,EAAO,EAAE,SAAS,EAAG,CAAC,CAAC,CACvD,CACA,WAAWnJ,EAAM,CACf,QAASuI,EAAI,EAAGA,EAAIvI,EAAK,OAAQuI,IAC/B7J,EAAa,KAAM0K,EAAW,EAAE,SAASb,EAAI,EAAGvI,EAAK,WAAWuI,CAAC,CAAC,EAC9DA,EAAI,IAAM,GACZ,KAAK,MAAM7J,EAAa,KAAMyK,EAAO,CAAC,EAEtCnJ,EAAK,OAAS,IAAM,GACtB,KAAK,MAAMtB,EAAa,KAAMyK,EAAO,EAAE,SAAS,EAAGnJ,EAAK,OAAS,CAAC,CAAC,CAEvE,CACA,SAASuJ,EAAM,CAEb,GADA,KAAK,QAAQ,IAAIA,EAAM,KAAK,GAAG,EAC3BA,EAAK,UAAY,CAACA,EAAK,SACzB,KAAK,eAAeA,EAAMA,EAAK,MAAQA,EAAK,SAAS,WAAa,CAAC,EACnE,KAAK,MAAMA,EAAK,QAAQ,MACnB,CACL,IAAIC,EAAW,KAAK,IAIpB,GAHA,KAAK,eAAeD,EAAM,CAAC,EACvBA,EAAK,UACP,KAAK,MAAMA,EAAK,QAAQ,EACtBA,EAAK,SACP,QAASE,KAASF,EAAK,SACjBE,GACF,KAAK,SAASA,CAAK,EAEzB,IAAIC,EAAS,KAAK,IACdnH,EAAOgH,EAAK,MAAQG,EAASF,EACjC,KAAK,KAAKA,CAAQ,EAClB,KAAK,eAAeD,EAAMhH,CAAI,EAC9B,KAAK,KAAKmH,CAAM,CAClB,CACF,CACA,eAAeH,EAAMhH,EAAM,CACzB,KAAK,SAASgH,EAAK,UAAY,EAAIhH,CAAI,EACvC,KAAK,WAAWgH,EAAK,IAAI,EACrBA,EAAK,WACP,KAAK,SAAShH,CAAI,CACtB,CACA,iBAAiBgH,EAAM,CACrB,MAAO,IAAKA,EAAK,UAAY,EAAI,EACnC,CACA,SAASA,EAAM,CACb,IAAIG,EAAS,KAAK,IAClB,KAAK,KAAK,KAAK,QAAQ,IAAIH,CAAI,CAAC,EAChC,KAAK,SAASA,CAAI,EAClB,KAAK,KAAKG,CAAM,CAClB,CACA,WAAWH,EAAM,CACf,GAAIA,EAAK,UAAY,CAACA,EAAK,SAEzB,OADiB,KAAK,iBAAiBA,CAAI,EACvBA,EAAK,SAAS,WAC7B,CACL,IAAI/I,EAAS,KAAK,iBAAiB+I,CAAI,EAGvC,GAFIA,EAAK,WACP/I,GAAU+I,EAAK,SAAS,YACtBA,EAAK,SACP,QAASE,KAASF,EAAK,SACjBE,IACFjJ,GAAU,KAAK,WAAWiJ,CAAK,GAErC,OAAOjJ,CACT,CACF,CACF,EACA2I,GAAU,IAAI,QACdC,GAAc,IAAI,QAClB,IAAIO,GAASC,GAASC,GAAQC,GAASC,GAAaC,GAChDC,GAA0B,cAAcZ,EAAO,CACjD,YAAYa,EAAQ,CAClB,MAAK,EACLtL,EAAa,KAAMmL,EAAW,EAC9BnL,EAAa,KAAM+K,GAAS,MAAM,EAClC/K,EAAa,KAAMgL,GAAS,IAAI,YAAY,GAAK,EAAE,CAAC,EACpDhL,EAAa,KAAMiL,GAAQ,IAAI,WAAWnL,EAAa,KAAMkL,EAAO,CAAC,CAAC,EACtEhL,EAAa,KAAMkL,GAAS,CAAC,EAC7BhL,GAAa,KAAM6K,GAASO,CAAM,CACpC,CACA,MAAMC,EAAM,CACVlL,EAAgB,KAAM8K,GAAaC,EAAa,EAAE,KAAK,KAAM,KAAK,IAAMG,EAAK,UAAU,EACvFzL,EAAa,KAAMmL,EAAM,EAAE,IAAIM,EAAM,KAAK,GAAG,EAC7C,KAAK,KAAOA,EAAK,WACjBrL,GAAa,KAAMgL,GAAS,KAAK,IAAIpL,EAAa,KAAMoL,EAAO,EAAG,KAAK,GAAG,CAAC,CAC7E,CACA,UAAW,CACT7K,EAAgB,KAAM8K,GAAaC,EAAa,EAAE,KAAK,KAAM,KAAK,GAAG,EACrEtL,EAAa,KAAMiL,EAAO,EAAE,OAASjL,EAAa,KAAMkL,EAAO,EAAE,MAAM,EAAG,KAAK,IAAIlL,EAAa,KAAMoL,EAAO,EAAG,KAAK,GAAG,CAAC,CAC3H,CACF,EACAH,GAAU,IAAI,QACdC,GAAU,IAAI,QACdC,GAAS,IAAI,QACbC,GAAU,IAAI,QACdC,GAAc,IAAI,QAClBC,GAAgB,SAASzH,EAAM,CAC7B,IAAI6H,EAAY1L,EAAa,KAAMkL,EAAO,EAAE,WAC5C,KAAOQ,EAAY7H,GACjB6H,GAAa,EACf,GAAIA,IAAc1L,EAAa,KAAMkL,EAAO,EAAE,WAC5C,OACF,IAAIS,EAAY,IAAI,YAAYD,CAAS,EACrCE,EAAW,IAAI,WAAWD,CAAS,EACvCC,EAAS,IAAI5L,EAAa,KAAMmL,EAAM,EAAG,CAAC,EAC1C/K,GAAa,KAAM8K,GAASS,CAAS,EACrCvL,GAAa,KAAM+K,GAAQS,CAAQ,CACrC,EACA,IAAIC,GAAqB,GAAK,GAC1BC,GAAqB,EACrBC,GAAUC,GAAWC,GAAUC,GAAYC,GAASC,GAAsBC,GAAwBC,GAAyBC,GAA2BC,GAAcC,GAAgBC,GAAcC,GAClMC,GAAqB,cAAcjC,EAAO,CAC5C,YAAYa,EAAQ,CAClB,MAAK,EACLtL,EAAa,KAAMkM,EAAoB,EACvClM,EAAa,KAAMoM,EAAuB,EAC1CpM,EAAa,KAAMsM,EAAY,EAC/BtM,EAAa,KAAMwM,EAAY,EAC/BxM,EAAa,KAAM6L,GAAU,MAAM,EACnC7L,EAAa,KAAM8L,GAAW,EAAE,EAChC9L,EAAa,KAAM+L,GAAU,MAAM,EACnC/L,EAAa,KAAMgM,GAAY,MAAM,EAKrChM,EAAa,KAAMiM,GAAS,EAAE,EAC9B/L,GAAa,KAAM2L,GAAUP,CAAM,EACnCpL,GAAa,KAAM6L,GAAUT,EAAO,SAAS,SAAW,EAAK,EAC7DpL,GAAa,KAAM8L,GAAYV,EAAO,SAAS,WAAaK,EAAkB,CAChF,CACA,MAAMJ,EAAM,CACVzL,EAAa,KAAMgM,EAAS,EAAE,KAAK,CACjC,KAAMP,EAAK,MAAK,EAChB,MAAO,KAAK,GAClB,CAAK,EACD,KAAK,KAAOA,EAAK,UACnB,CACA,OAAQ,CACN,GAAIzL,EAAa,KAAMgM,EAAS,EAAE,SAAW,EAC3C,OACF,IAAIa,EAAS,CAAA,EACTC,EAAS,CAAC,GAAG9M,EAAa,KAAMgM,EAAS,CAAC,EAAE,KAAK,CAACe,EAAGC,IAAMD,EAAE,MAAQC,EAAE,KAAK,EAChFH,EAAO,KAAK,CACV,MAAOC,EAAO,CAAC,EAAE,MACjB,KAAMA,EAAO,CAAC,EAAE,KAAK,UAC3B,CAAK,EACD,QAASjD,EAAI,EAAGA,EAAIiD,EAAO,OAAQjD,IAAK,CACtC,IAAIoD,EAAYJ,EAAOA,EAAO,OAAS,CAAC,EACpCK,EAAUJ,EAAOjD,CAAC,EAClBqD,EAAQ,OAASD,EAAU,MAAQA,EAAU,KAC/CA,EAAU,KAAO,KAAK,IAAIA,EAAU,KAAMC,EAAQ,MAAQA,EAAQ,KAAK,WAAaD,EAAU,KAAK,EAEnGJ,EAAO,KAAK,CACV,MAAOK,EAAQ,MACf,KAAMA,EAAQ,KAAK,UAC7B,CAAS,CAEL,CACA,QAAShD,KAAS2C,EAAQ,CACxB3C,EAAM,KAAO,IAAI,WAAWA,EAAM,IAAI,EACtC,QAASgD,KAAWlN,EAAa,KAAMgM,EAAS,EAC1C9B,EAAM,OAASgD,EAAQ,OAASA,EAAQ,MAAQhD,EAAM,MAAQA,EAAM,MACtEA,EAAM,KAAK,IAAIgD,EAAQ,KAAMA,EAAQ,MAAQhD,EAAM,KAAK,EAGxDlK,EAAa,KAAMiM,EAAQ,GAC7B1L,EAAgB,KAAM6L,GAAsBC,EAAsB,EAAE,KAAK,KAAMnC,EAAM,KAAMA,EAAM,KAAK,EACtG3J,EAAgB,KAAMmM,GAAcC,EAAc,EAAE,KAAK,IAAI,GAE7D3M,EAAa,KAAM+L,EAAQ,EAAE,QAAQ,SAAS7B,EAAM,KAAMA,EAAM,KAAK,CAEzE,CACAlK,EAAa,KAAMgM,EAAS,EAAE,OAAS,CACzC,CACA,UAAW,CACLhM,EAAa,KAAMiM,EAAQ,GAC7B1L,EAAgB,KAAMmM,GAAcC,EAAc,EAAE,KAAK,KAAM,EAAI,CAEvE,CACF,EACAZ,GAAW,IAAI,QACfC,GAAY,IAAI,QAChBC,GAAW,IAAI,QACfC,GAAa,IAAI,QACjBC,GAAU,IAAI,QACdC,GAAuB,IAAI,QAC3BC,GAAyB,SAASZ,EAAM0B,EAAU,CAChD,IAAIC,EAAapN,EAAa,KAAMmM,EAAO,EAAE,UAAWtJ,GAAMA,EAAE,OAASsK,GAAYA,EAAWtK,EAAE,MAAQ7C,EAAa,KAAMkM,EAAU,CAAC,EACpIkB,IAAe,KACjBA,EAAa7M,EAAgB,KAAMiM,GAAcC,EAAc,EAAE,KAAK,KAAMU,CAAQ,GACtF,IAAIjD,EAAQlK,EAAa,KAAMmM,EAAO,EAAEiB,CAAU,EAC9CC,EAAmBF,EAAWjD,EAAM,MACpCoD,EAAU7B,EAAK,SAAS,EAAG,KAAK,IAAIzL,EAAa,KAAMkM,EAAU,EAAImB,EAAkB5B,EAAK,UAAU,CAAC,EAC3GvB,EAAM,KAAK,IAAIoD,EAASD,CAAgB,EACxC,IAAIH,EAAU,CACZ,MAAOG,EACP,IAAKA,EAAmBC,EAAQ,UACpC,EAKE,GAJA/M,EAAgB,KAAM+L,GAAyBC,EAAyB,EAAE,KAAK,KAAMrC,EAAOgD,CAAO,EAC/FhD,EAAM,QAAQ,CAAC,EAAE,QAAU,GAAKA,EAAM,QAAQ,CAAC,EAAE,MAAQlK,EAAa,KAAMkM,EAAU,IACxFhC,EAAM,YAAc,IAElBlK,EAAa,KAAMmM,EAAO,EAAE,OAASL,GAAoB,CAC3D,QAASjC,EAAI,EAAGA,EAAI7J,EAAa,KAAMmM,EAAO,EAAE,OAAS,EAAGtC,IAC1D7J,EAAa,KAAMmM,EAAO,EAAEtC,CAAC,EAAE,YAAc,GAE/CtJ,EAAgB,KAAMmM,GAAcC,EAAc,EAAE,KAAK,IAAI,CAC/D,CACIW,EAAQ,WAAa7B,EAAK,YAC5BlL,EAAgB,KAAM6L,GAAsBC,EAAsB,EAAE,KAAK,KAAMZ,EAAK,SAAS6B,EAAQ,UAAU,EAAGH,EAAWG,EAAQ,UAAU,CAEnJ,EACAhB,GAA0B,IAAI,QAC9BC,GAA4B,SAASrC,EAAOgD,EAAS,CACnD,IAAIK,EAAM,EACNC,EAAOtD,EAAM,QAAQ,OAAS,EAC9BpC,EAAQ,GACZ,KAAOyF,GAAOC,GAAM,CAClB,IAAIC,EAAM,KAAK,MAAMF,GAAOC,EAAOD,EAAM,GAAK,CAAC,EAC3CrD,EAAM,QAAQuD,CAAG,EAAE,OAASP,EAAQ,OACtCK,EAAME,EAAM,EACZ3F,EAAQ2F,GAERD,EAAOC,EAAM,CAEjB,CAIA,IAHAvD,EAAM,QAAQ,OAAOpC,EAAQ,EAAG,EAAGoF,CAAO,GACtCpF,IAAU,IAAMoC,EAAM,QAAQpC,CAAK,EAAE,IAAMoF,EAAQ,QACrDpF,IACKA,EAAQoC,EAAM,QAAQ,OAAS,GAAKA,EAAM,QAAQpC,CAAK,EAAE,KAAOoC,EAAM,QAAQpC,EAAQ,CAAC,EAAE,OAC9FoC,EAAM,QAAQpC,CAAK,EAAE,IAAM,KAAK,IAAIoC,EAAM,QAAQpC,CAAK,EAAE,IAAKoC,EAAM,QAAQpC,EAAQ,CAAC,EAAE,GAAG,EAC1FoC,EAAM,QAAQ,OAAOpC,EAAQ,EAAG,CAAC,CAErC,EACA0E,GAAe,IAAI,QACnBC,GAAiB,SAASiB,EAAkB,CAE1C,IAAIxD,EAAQ,CACV,MAFU,KAAK,MAAMwD,EAAmB1N,EAAa,KAAMkM,EAAU,CAAC,EAAIlM,EAAa,KAAMkM,EAAU,EAGvG,KAAM,IAAI,WAAWlM,EAAa,KAAMkM,EAAU,CAAC,EACnD,QAAS,CAAA,EACT,YAAa,EACjB,EACE,OAAAlM,EAAa,KAAMmM,EAAO,EAAE,KAAKjC,CAAK,EACtClK,EAAa,KAAMmM,EAAO,EAAE,KAAK,CAACY,EAAGC,IAAMD,EAAE,MAAQC,EAAE,KAAK,EACrDhN,EAAa,KAAMmM,EAAO,EAAE,QAAQjC,CAAK,CAClD,EACAwC,GAAe,IAAI,QACnBC,GAAiB,SAASgB,EAAQ,GAAO,CACvC,QAAS9D,EAAI,EAAGA,EAAI7J,EAAa,KAAMmM,EAAO,EAAE,OAAQtC,IAAK,CAC3D,IAAIK,EAAQlK,EAAa,KAAMmM,EAAO,EAAEtC,CAAC,EACzC,GAAI,GAACK,EAAM,aAAe,CAACyD,GAE3B,SAAST,KAAWhD,EAAM,QACxBlK,EAAa,KAAM+L,EAAQ,EAAE,QAAQ,SACnC7B,EAAM,KAAK,SAASgD,EAAQ,MAAOA,EAAQ,GAAG,EAC9ChD,EAAM,MAAQgD,EAAQ,KAC9B,EAEIlN,EAAa,KAAMmM,EAAO,EAAE,OAAOtC,IAAK,CAAC,EAC3C,CACF,EACA,IAAI+D,GAA2C,cAAchB,EAAmB,CAC9E,YAAYpB,EAAQ,CAClB,MAAM,IAAInB,GAAa,CACrB,OAAQ,CAACoB,EAAM0B,IAAa3B,EAAO,OAAO,MAAM,CAC9C,KAAM,QACN,KAAAC,EACA,SAAA0B,CACR,CAAO,EACD,QAAS,GACT,UAAW3B,EAAO,SAAS,SACjC,CAAK,CAAC,CACJ,CACF,EAGIjH,GAAmB,IACnBsJ,GAAyB,CAAC,MAAO,OAAQ,MAAO,KAAK,EACrDC,GAAyB,CAAC,MAAO,MAAM,EACvCC,GAAmB,WACnBC,GAA4B,CAAC,SAAU,SAAU,oBAAoB,EACrEC,EAAUC,EAASC,GAAWC,GAAOC,GAAaC,GAAaC,GAAeC,GAAkBC,GAAqBC,GAAmBC,GAAmBC,GAAYC,GAAkBC,GAAoBC,GAAcC,GAAgBC,GAA4BC,GAA8BC,GAAgBC,GAAkBC,GAAmCC,GAAqCC,GAAuBC,GAAyBC,GAAmBC,GAAqBC,GAAoBC,GAAsBC,GAAuBC,GAAyBC,GAAmBC,GAAqBC,GAAkCC,GAAoCC,GAAqBC,GACpsBC,GAAQ,KAAM,CAChB,YAAY/F,EAAS,CAoCnB,GAnCApK,EAAa,KAAM2O,EAAgB,EACnC3O,EAAa,KAAM6O,EAAY,EAC/B7O,EAAa,KAAM+O,EAA0B,EAC7C/O,EAAa,KAAMiP,EAAc,EAEjCjP,EAAa,KAAMmP,EAAiC,EACpDnP,EAAa,KAAMqP,EAAqB,EACxCrP,EAAa,KAAMuP,EAAiB,EACpCvP,EAAa,KAAMyP,EAAkB,EACrCzP,EAAa,KAAM2P,EAAqB,EACxC3P,EAAa,KAAM6P,EAAiB,EACpC7P,EAAa,KAAM+P,EAAgC,EACnD/P,EAAa,KAAMiQ,EAAmB,EACtCjQ,EAAa,KAAM+N,EAAU,MAAM,EACnC/N,EAAa,KAAMgO,EAAS,MAAM,EAClChO,EAAa,KAAMiO,GAAW,MAAM,EACpCjO,EAAa,KAAMkO,GAAO,MAAM,EAChClO,EAAa,KAAMmO,GAAa,IAAI,EACpCnO,EAAa,KAAMoO,GAAa,IAAI,EACpCpO,EAAa,KAAMqO,GAAe,KAAK,MAAM,KAAK,IAAG,EAAK,GAAG,EAAIR,EAAgB,EACjF7N,EAAa,KAAMsO,GAAkB,EAAE,EAEvCtO,EAAa,KAAMuO,GAAqB,CAAC,EACzCvO,EAAa,KAAMwO,GAAmB,EAAE,EACxCxO,EAAa,KAAMyO,GAAmB,EAAE,EACxCzO,EAAa,KAAM0O,GAAY,EAAK,EACpCrO,EAAgB,KAAMsO,GAAkBC,EAAkB,EAAE,KAAK,KAAMxE,CAAO,EAC9EA,EAAQ,MAAQ1H,GAAU0H,EAAQ,KAAK,EACvCA,EAAQ,MAAQ1H,GAAU0H,EAAQ,KAAK,EACvCA,EAAQ,UAAY1H,GAAU0H,EAAQ,SAAS,EAC/C,KAAK,OAASA,EAAQ,OACtBlK,GAAa,KAAM6N,EAAU,CAC3B,uBAAwB,SACxB,GAAG3D,CACT,CAAK,EACGA,EAAQ,kBAAkBF,GAC5BhK,GAAa,KAAM8N,EAAS,IAAI3C,GAAwBjB,EAAQ,MAAM,CAAC,UAC9DA,EAAQ,kBAAkBD,GACnCjK,GAAa,KAAM8N,EAAS,IAAItB,GAAmBtC,EAAQ,MAAM,CAAC,UACzDA,EAAQ,kBAAkBC,GACnCnK,GAAa,KAAM8N,EAAS,IAAIN,GAAyCtD,EAAQ,MAAM,CAAC,MAExF,OAAM,IAAI,MAAM,mBAAmBA,EAAQ,MAAM,EAAE,EAErD/J,EAAgB,KAAM4O,GAAgBC,EAAgB,EAAE,KAAK,IAAI,EACjE7O,EAAgB,KAAMwO,GAAcC,EAAc,EAAE,KAAK,IAAI,CAC/D,CACA,cAAcjN,EAAQuO,EAAMC,EAAWC,EAAuB,CAC5D,GAAI,EAAEzO,aAAkB,mBACtB,MAAM,IAAI,UAAU,4EAA4E,EAElG,GAAIuO,GAAQ,OAAOA,GAAS,SAC1B,MAAM,IAAI,UAAU,2EAA2E,EAEjG,GAAIC,IAAc,SAAW,CAAC,OAAO,SAASA,CAAS,GAAKA,EAAY,GACtE,MAAM,IAAI,UACR,gGACR,EAEI,GAAIC,IAA0B,QAAU,CAAC,OAAO,SAASA,CAAqB,EAC5E,MAAM,IAAI,UACR,gGACR,EAEI,IAAI/E,EAAO,IAAI,WAAW1J,EAAO,UAAU,EAC3CA,EAAO,OAAO0J,CAAI,EAClB,KAAK,iBACHA,EACA1J,EAAO,KACPwO,GAAaxO,EAAO,UACpBA,EAAO,SACPuO,EACAE,CACN,CACE,CACA,iBAAiB/E,EAAMxI,EAAMsN,EAAWlM,EAAUiM,EAAME,EAAuB,CAC7E,GAAI,EAAE/E,aAAgB,YACpB,MAAM,IAAI,UAAU,6EAA6E,EAEnG,GAAIxI,IAAS,OAASA,IAAS,QAC7B,MAAM,IAAI,UAAU,4EAA4E,EAElG,GAAI,CAAC,OAAO,SAASsN,CAAS,GAAKA,EAAY,EAC7C,MAAM,IAAI,UAAU,mFAAmF,EAEzG,GAAI,CAAC,OAAO,SAASlM,CAAQ,GAAKA,EAAW,EAC3C,MAAM,IAAI,UAAU,mFAAmF,EAEzG,GAAIiM,GAAQ,OAAOA,GAAS,SAC1B,MAAM,IAAI,UAAU,6EAA6E,EAEnG,GAAIE,IAA0B,QAAU,CAAC,OAAO,SAASA,CAAqB,EAC5E,MAAM,IAAI,UACR,kGACR,EAGI,GADAjQ,EAAgB,KAAM4P,GAAqBC,EAAqB,EAAE,KAAK,IAAI,EACvE,CAACpQ,EAAa,KAAMiO,CAAQ,EAAE,MAChC,MAAM,IAAI,MAAM,0BAA0B,EAC5C,GAAI,OAAOjO,EAAa,KAAMiO,CAAQ,EAAE,WAAc,UAAYjO,EAAa,KAAMqO,EAAW,EAAE,QAAQ,SAAWrO,EAAa,KAAMiO,CAAQ,EAAE,UAAU,oBAC1J,MAAM,IAAI,MAAM,+DAA+DjO,EAAa,KAAMiO,CAAQ,EAAE,UAAU,mBAAmB,IAAI,EAE/I,IAAIwC,EAAclQ,EAAgB,KAAMgP,GAAuBC,EAAuB,EAAE,KAAK,KAAMxP,EAAa,KAAMqO,EAAW,EAAG5C,EAAMxI,EAAMsN,EAAWlM,EAAUiM,EAAME,CAAqB,EAChM,GAAIxQ,EAAa,KAAMiO,CAAQ,EAAE,YAAc,cAAgBjO,EAAa,KAAMsO,EAAW,EAAG,CAC9F,KAAOtO,EAAa,KAAM2O,EAAiB,EAAE,OAAS,GAAK3O,EAAa,KAAM2O,EAAiB,EAAE,CAAC,EAAE,iBAAmB8B,EAAY,iBAAiB,CAClJ,IAAIC,EAAc1Q,EAAa,KAAM2O,EAAiB,EAAE,MAAK,EAC7DpO,EAAgB,KAAMkP,GAAmBC,EAAmB,EAAE,KAAK,KAAM1P,EAAa,KAAMsO,EAAW,EAAGoC,CAAW,CACvH,CACID,EAAY,iBAAmBzQ,EAAa,KAAMsO,EAAW,EAAE,oBACjE/N,EAAgB,KAAMkP,GAAmBC,EAAmB,EAAE,KAAK,KAAM1P,EAAa,KAAMqO,EAAW,EAAGoC,CAAW,EAErHzQ,EAAa,KAAM0O,EAAiB,EAAE,KAAK+B,CAAW,CAE1D,MACElQ,EAAgB,KAAMkP,GAAmBC,EAAmB,EAAE,KAAK,KAAM1P,EAAa,KAAMqO,EAAW,EAAGoC,CAAW,CAEzH,CACA,cAAc1O,EAAQuO,EAAMC,EAAW,CACrC,GAAI,EAAExO,aAAkB,mBACtB,MAAM,IAAI,UAAU,4EAA4E,EAElG,GAAIuO,GAAQ,OAAOA,GAAS,SAC1B,MAAM,IAAI,UAAU,2EAA2E,EAEjG,GAAIC,IAAc,SAAW,CAAC,OAAO,SAASA,CAAS,GAAKA,EAAY,GACtE,MAAM,IAAI,UACR,gGACR,EAEI,IAAI9E,EAAO,IAAI,WAAW1J,EAAO,UAAU,EAC3CA,EAAO,OAAO0J,CAAI,EAClB,KAAK,iBAAiBA,EAAM1J,EAAO,KAAMwO,GAAaxO,EAAO,UAAWA,EAAO,SAAUuO,CAAI,CAC/F,CACA,iBAAiB7E,EAAMxI,EAAMsN,EAAWlM,EAAUiM,EAAM,CACtD,GAAI,EAAE7E,aAAgB,YACpB,MAAM,IAAI,UAAU,6EAA6E,EAEnG,GAAIxI,IAAS,OAASA,IAAS,QAC7B,MAAM,IAAI,UAAU,4EAA4E,EAElG,GAAI,CAAC,OAAO,SAASsN,CAAS,GAAKA,EAAY,EAC7C,MAAM,IAAI,UAAU,mFAAmF,EAEzG,GAAI,CAAC,OAAO,SAASlM,CAAQ,GAAKA,EAAW,EAC3C,MAAM,IAAI,UAAU,mFAAmF,EAEzG,GAAIiM,GAAQ,OAAOA,GAAS,SAC1B,MAAM,IAAI,UAAU,6EAA6E,EAGnG,GADA/P,EAAgB,KAAM4P,GAAqBC,EAAqB,EAAE,KAAK,IAAI,EACvE,CAACpQ,EAAa,KAAMiO,CAAQ,EAAE,MAChC,MAAM,IAAI,MAAM,0BAA0B,EAC5C,GAAI,OAAOjO,EAAa,KAAMiO,CAAQ,EAAE,WAAc,UAAYjO,EAAa,KAAMsO,EAAW,EAAE,QAAQ,SAAWtO,EAAa,KAAMiO,CAAQ,EAAE,UAAU,oBAC1J,MAAM,IAAI,MAAM,+DAA+DjO,EAAa,KAAMiO,CAAQ,EAAE,UAAU,mBAAmB,IAAI,EAE/I,IAAIyC,EAAcnQ,EAAgB,KAAMgP,GAAuBC,EAAuB,EAAE,KAAK,KAAMxP,EAAa,KAAMsO,EAAW,EAAG7C,EAAMxI,EAAMsN,EAAWlM,EAAUiM,CAAI,EACzK,GAAItQ,EAAa,KAAMiO,CAAQ,EAAE,YAAc,cAAgBjO,EAAa,KAAMqO,EAAW,EAAG,CAC9F,KAAOrO,EAAa,KAAM0O,EAAiB,EAAE,OAAS,GAAK1O,EAAa,KAAM0O,EAAiB,EAAE,CAAC,EAAE,iBAAmBgC,EAAY,iBAAiB,CAClJ,IAAID,EAAczQ,EAAa,KAAM0O,EAAiB,EAAE,MAAK,EAC7DnO,EAAgB,KAAMkP,GAAmBC,EAAmB,EAAE,KAAK,KAAM1P,EAAa,KAAMqO,EAAW,EAAGoC,CAAW,CACvH,CACIC,EAAY,iBAAmB1Q,EAAa,KAAMqO,EAAW,EAAE,oBACjE9N,EAAgB,KAAMkP,GAAmBC,EAAmB,EAAE,KAAK,KAAM1P,EAAa,KAAMsO,EAAW,EAAGoC,CAAW,EAErH1Q,EAAa,KAAM2O,EAAiB,EAAE,KAAK+B,CAAW,CAE1D,MACEnQ,EAAgB,KAAMkP,GAAmBC,EAAmB,EAAE,KAAK,KAAM1P,EAAa,KAAMsO,EAAW,EAAGoC,CAAW,CAEzH,CAEA,UAAW,CACT,GAAI1Q,EAAa,KAAM4O,EAAU,EAC/B,MAAM,IAAI,MAAM,yCAAyC,EAE3D,GAAI5O,EAAa,KAAMiO,CAAQ,EAAE,YAAc,aAAc,CAC3D,QAASwC,KAAezQ,EAAa,KAAM0O,EAAiB,EAC1DnO,EAAgB,KAAMkP,GAAmBC,EAAmB,EAAE,KAAK,KAAM1P,EAAa,KAAMqO,EAAW,EAAGoC,CAAW,EACvH,QAASC,KAAe1Q,EAAa,KAAM2O,EAAiB,EAC1DpO,EAAgB,KAAMkP,GAAmBC,EAAmB,EAAE,KAAK,KAAM1P,EAAa,KAAMsO,EAAW,EAAGoC,CAAW,EACvHnQ,EAAgB,KAAMwP,GAAmBC,EAAmB,EAAE,KAAK,KAAM,EAAK,CAChF,MACMhQ,EAAa,KAAMqO,EAAW,GAChC9N,EAAgB,KAAMsP,GAAuBC,EAAuB,EAAE,KAAK,KAAM9P,EAAa,KAAMqO,EAAW,CAAC,EAC9GrO,EAAa,KAAMsO,EAAW,GAChC/N,EAAgB,KAAMsP,GAAuBC,EAAuB,EAAE,KAAK,KAAM9P,EAAa,KAAMsO,EAAW,CAAC,EAEpH,IAAIvK,EAAS,CAAC/D,EAAa,KAAMqO,EAAW,EAAGrO,EAAa,KAAMsO,EAAW,CAAC,EAAE,OAAO,OAAO,EAC9F,GAAItO,EAAa,KAAMiO,CAAQ,EAAE,YAAc,YAAa,CAC1D,IAAI0C,EACJ,QAAS9G,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAI+G,EAAY9M,GAAKC,EAAQ/D,EAAa,KAAMuO,EAAa,CAAC,EAC1DsC,EAAe7Q,EAAa,KAAMkO,CAAO,EAAE,WAAW0C,CAAS,EACnED,EAAW3Q,EAAa,KAAMkO,CAAO,EAAE,WAAWlO,EAAa,KAAMoO,EAAK,CAAC,EAC3E,IAAI0C,EAAkB9Q,EAAa,KAAMkO,CAAO,EAAE,IAAM2C,EAAeF,EACvE,QAASzG,KAASlK,EAAa,KAAMwO,EAAgB,EAAG,CACtDtE,EAAM,OAAS4G,EACf,OAAS,CAAE,KAAArF,KAAUvB,EAAM,QACzB4G,GAAmBrF,EAAK,WACxBkF,GAAYlF,EAAK,UAErB,CACA,GAAIqF,EAAkB,GAAK,GACzB,MACEH,GAAY,GAAK,KACnB3Q,EAAa,KAAMoO,EAAK,EAAE,UAAY,GAC1C,CACA,IAAI2C,EAAWjN,GAAKC,EAAQ/D,EAAa,KAAMuO,EAAa,CAAC,EAC7DvO,EAAa,KAAMkO,CAAO,EAAE,SAAS6C,CAAQ,EAC7C/Q,EAAa,KAAMoO,EAAK,EAAE,KAAOuC,EACjC3Q,EAAa,KAAMkO,CAAO,EAAE,SAASlO,EAAa,KAAMoO,EAAK,CAAC,EAC9D,QAASlE,KAASlK,EAAa,KAAMwO,EAAgB,EACnD,QAASzM,KAAUmI,EAAM,QACvBlK,EAAa,KAAMkO,CAAO,EAAE,MAAMnM,EAAO,IAAI,EAC7CA,EAAO,KAAO,IAGpB,SAAW/B,EAAa,KAAMiO,CAAQ,EAAE,YAAc,aAAc,CAClE,IAAInD,EAAW9K,EAAa,KAAMkO,CAAO,EAAE,IACvC8C,EAAUlH,GAAK/F,CAAM,EACzB/D,EAAa,KAAMkO,CAAO,EAAE,SAAS8C,CAAO,EAC5C,IAAIC,EAAcjR,EAAa,KAAMkO,CAAO,EAAE,IAAMpD,EACpD9K,EAAa,KAAMkO,CAAO,EAAE,KAAKlO,EAAa,KAAMkO,CAAO,EAAE,IAAM,CAAC,EACpElO,EAAa,KAAMkO,CAAO,EAAE,SAAS+C,CAAW,CAClD,KAAO,CACL,IAAIC,EAAUlR,EAAa,KAAMkO,CAAO,EAAE,QAAQ,IAAIlO,EAAa,KAAMoO,EAAK,CAAC,EAC3EuC,EAAW3Q,EAAa,KAAMkO,CAAO,EAAE,IAAMgD,EACjDlR,EAAa,KAAMoO,EAAK,EAAE,KAAOuC,EACjC3Q,EAAa,KAAMoO,EAAK,EAAE,UAAYuC,GAAY,GAAK,GACvD3Q,EAAa,KAAMkO,CAAO,EAAE,SAASlO,EAAa,KAAMoO,EAAK,CAAC,EAC9D,IAAI2C,EAAWjN,GAAKC,EAAQ/D,EAAa,KAAMuO,EAAa,CAAC,EAC7D,GAAI,OAAOvO,EAAa,KAAMiO,CAAQ,EAAE,WAAc,SAAU,CAC9DjO,EAAa,KAAMkO,CAAO,EAAE,KAAKlO,EAAa,KAAMmO,EAAS,CAAC,EAC9DnO,EAAa,KAAMkO,CAAO,EAAE,SAAS6C,CAAQ,EAC7C,IAAII,EAAiBD,EAAUlR,EAAa,KAAMkO,CAAO,EAAE,IAC3DlO,EAAa,KAAMkO,CAAO,EAAE,SAAStK,GAAKuN,CAAc,CAAC,CAC3D,MACEnR,EAAa,KAAMkO,CAAO,EAAE,SAAS6C,CAAQ,CAEjD,CACAxQ,EAAgB,KAAM0P,GAAkCC,EAAkC,EAAE,KAAK,IAAI,EACrGlQ,EAAa,KAAMkO,CAAO,EAAE,SAAQ,EACpC9N,GAAa,KAAMwO,GAAY,EAAI,CACrC,CACF,EACAX,EAAW,IAAI,QACfC,EAAU,IAAI,QACdC,GAAY,IAAI,QAChBC,GAAQ,IAAI,QACZC,GAAc,IAAI,QAClBC,GAAc,IAAI,QAClBC,GAAgB,IAAI,QACpBC,GAAmB,IAAI,QACvBC,GAAsB,IAAI,QAC1BC,GAAoB,IAAI,QACxBC,GAAoB,IAAI,QACxBC,GAAa,IAAI,QACjBC,GAAmB,IAAI,QACvBC,GAAqB,SAASxE,EAAS,CACrC,GAAI,OAAOA,GAAY,SACrB,MAAM,IAAI,UAAU,uEAAuE,EAE7F,GAAI,EAAEA,EAAQ,kBAAkBH,IAC9B,MAAM,IAAI,UAAU,wDAAwD,EAE9E,GAAIG,EAAQ,MAAO,CACjB,GAAI,CAACuD,GAAuB,SAASvD,EAAQ,MAAM,KAAK,EACtD,MAAM,IAAI,UAAU,4BAA4BA,EAAQ,MAAM,KAAK,EAAE,EAEvE,GAAI,CAAC,OAAO,UAAUA,EAAQ,MAAM,KAAK,GAAKA,EAAQ,MAAM,OAAS,EACnE,MAAM,IAAI,UAAU,wBAAwBA,EAAQ,MAAM,KAAK,+BAA+B,EAEhG,GAAI,CAAC,OAAO,UAAUA,EAAQ,MAAM,MAAM,GAAKA,EAAQ,MAAM,QAAU,EACrE,MAAM,IAAI,UAAU,yBAAyBA,EAAQ,MAAM,MAAM,+BAA+B,EAElG,MAAM8G,EAAgB9G,EAAQ,MAAM,SACpC,GAAI,OAAO8G,GAAkB,UAAY,CAAC,CAAC,EAAG,GAAI,IAAK,GAAG,EAAE,SAASA,CAAa,EAChF,MAAM,IAAI,UAAU,2BAA2BA,CAAa,gCAAgC,EACvF,GAAI,MAAM,QAAQA,CAAa,IAAMA,EAAc,SAAW,GAAKA,EAAc,KAAMjR,GAAU,OAAOA,GAAU,QAAQ,GAC/H,MAAM,IAAI,UAAU,wCAAwCiR,EAAc,KAAI,CAAE,EAAE,EAEpF,GAAI9G,EAAQ,MAAM,YAAc,SAAW,CAAC,OAAO,UAAUA,EAAQ,MAAM,SAAS,GAAKA,EAAQ,MAAM,WAAa,GAClH,MAAM,IAAI,UACR,6BAA6BA,EAAQ,MAAM,SAAS,+BAC5D,CAEE,CACA,GAAIA,EAAQ,MAAO,CACjB,GAAI,CAACwD,GAAuB,SAASxD,EAAQ,MAAM,KAAK,EACtD,MAAM,IAAI,UAAU,4BAA4BA,EAAQ,MAAM,KAAK,EAAE,EAEvE,GAAI,CAAC,OAAO,UAAUA,EAAQ,MAAM,gBAAgB,GAAKA,EAAQ,MAAM,kBAAoB,EACzF,MAAM,IAAI,UACR,qCAAqCA,EAAQ,MAAM,gBAAgB,+BAC3E,EAEI,GAAI,CAAC,OAAO,UAAUA,EAAQ,MAAM,UAAU,GAAKA,EAAQ,MAAM,YAAc,EAC7E,MAAM,IAAI,UACR,8BAA8BA,EAAQ,MAAM,UAAU,+BAC9D,CAEE,CACA,GAAIA,EAAQ,wBAA0B,CAAC0D,GAA0B,SAAS1D,EAAQ,sBAAsB,EACtG,MAAM,IAAI,UAAU,qCAAqCA,EAAQ,sBAAsB,EAAE,EAE3F,GAAI,OAAOA,EAAQ,WAAc,SAAU,CACzC,GAAIA,EAAQ,MAAO,CACjB,GAAIA,EAAQ,UAAU,sBAAwB,OAC5C,MAAM,IAAI,UAAU,yEAAyE,EACxF,GAAI,CAAC,OAAO,UAAUA,EAAQ,UAAU,mBAAmB,GAAKA,EAAQ,UAAU,oBAAsB,EAC7G,MAAM,IAAI,UAAU,uDAAuD,CAE/E,CACA,GAAIA,EAAQ,MAAO,CACjB,GAAIA,EAAQ,UAAU,sBAAwB,OAC5C,MAAM,IAAI,UAAU,yEAAyE,EACxF,GAAI,CAAC,OAAO,UAAUA,EAAQ,UAAU,mBAAmB,GAAKA,EAAQ,UAAU,oBAAsB,EAC7G,MAAM,IAAI,UAAU,uDAAuD,CAE/E,CACF,SAAW,CAAC,CAAC,GAAO,YAAa,YAAY,EAAE,SAASA,EAAQ,SAAS,EACvE,MAAM,IAAI,UAAU,2EAA2E,EAEjG,GAAIA,EAAQ,sBAAwB,SAAW,CAAC,OAAO,SAASA,EAAQ,mBAAmB,GAAKA,EAAQ,oBAAsB,GAC5H,MAAM,IAAI,UAAU,sDAAsD,CAE9E,EACAyE,GAAe,IAAI,QACnBC,GAAiB,UAAW,CAM1B,GALAhP,EAAa,KAAMkO,CAAO,EAAE,SAAS3K,GAAK,CACxC,SAAUvD,EAAa,KAAMiO,CAAQ,EAAE,OAAO,QAAU,MACxD,WAAYjO,EAAa,KAAMiO,CAAQ,EAAE,YAAc,YAC3D,CAAG,CAAC,EACF7N,GAAa,KAAM+N,GAAWnO,EAAa,KAAMkO,CAAO,EAAE,GAAG,EACzDlO,EAAa,KAAMiO,CAAQ,EAAE,YAAc,YAC7C7N,GAAa,KAAMgO,GAAO1K,GAAK,EAAK,CAAC,UAC5B1D,EAAa,KAAMiO,CAAQ,EAAE,YAAc,aAC/C,CACL,GAAI,OAAOjO,EAAa,KAAMiO,CAAQ,EAAE,WAAc,SAAU,CAC9D,IAAIoD,EAAqB9Q,EAAgB,KAAM0O,GAA4BC,EAA4B,EAAE,KAAK,IAAI,EAClHlP,EAAa,KAAMkO,CAAO,EAAE,KAAKlO,EAAa,KAAMkO,CAAO,EAAE,IAAMmD,CAAkB,CACvF,CACAjR,GAAa,KAAMgO,GAAO1K,GAAK,EAAI,CAAC,EACpC1D,EAAa,KAAMkO,CAAO,EAAE,SAASlO,EAAa,KAAMoO,EAAK,CAAC,CAChE,CACA7N,EAAgB,KAAM0P,GAAkCC,EAAkC,EAAE,KAAK,IAAI,CACvG,EACAjB,GAA6B,IAAI,QACjCC,GAA+B,UAAW,CACxC,GAAI,OAAOlP,EAAa,KAAMiO,CAAQ,EAAE,WAAc,SACpD,OACF,IAAIqD,EAAa,EACbC,EAAe,CACjBvR,EAAa,KAAMiO,CAAQ,EAAE,UAAU,oBACvCjO,EAAa,KAAMiO,CAAQ,EAAE,UAAU,mBAC3C,EACE,QAAS,KAAKsD,EACP,IAELD,GAAe,EAAS,KAAK,KAAK,EAAI,EAAI,CAAC,EAC3CA,GAAc,EAAI,EAClBA,GAAe,GAAa,KAAK,KAAK,EAAI,EAAI,CAAC,EAC/CA,GAAc,EAAI,EAClBA,GAAc,EAAI,GAEpB,OAAAA,GAAc,KACPA,CACT,EACAnC,GAAiB,IAAI,QACrBC,GAAmB,UAAW,CA0B5B,GAzBIpP,EAAa,KAAMiO,CAAQ,EAAE,OAC/B7N,GAAa,KAAMiO,GAAa,CAC9B,GAAI,EACJ,KAAM,CACJ,KAAM,QACN,MAAOrO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,MAC1C,MAAOjO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,MAC1C,OAAQjO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,OAC3C,SAAUjO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,UAAY,EACzD,cAAe,IACvB,EAEM,UAAWjO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,WAAa,MAC3D,QAAS,CAAA,EACT,gBAAiB,CAAA,EACjB,aAAc,KACd,qBAAsB,OACtB,oBAAqB,GACrB,kBAAmB,CAAA,EACnB,2BAA4B,CAAA,EAC5B,mBAAoB,KACpB,WAAY,KACZ,yBAA0B,CAAA,CAChC,CAAK,EAECjO,EAAa,KAAMiO,CAAQ,EAAE,QAC/B7N,GAAa,KAAMkO,GAAa,CAC9B,GAAItO,EAAa,KAAMiO,CAAQ,EAAE,MAAQ,EAAI,EAC7C,KAAM,CACJ,KAAM,QACN,MAAOjO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,MAC1C,iBAAkBjO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,iBACrD,WAAYjO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,WAC/C,cAAe,IACvB,EACM,UAAWjO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,WAC9C,QAAS,CAAA,EACT,gBAAiB,CAAA,EACjB,aAAc,KACd,qBAAsB,OACtB,oBAAqB,GACrB,kBAAmB,CAAA,EACnB,2BAA4B,CAAA,EAC5B,mBAAoB,KACpB,WAAY,KACZ,yBAA0B,CAAA,CAChC,CAAK,EACGjO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,QAAU,OAAO,CACtD,IAAIuD,EAAsBjR,EAAgB,KAAM8O,GAAmCC,EAAmC,EAAE,KACtH,KACA,EAEAtP,EAAa,KAAMiO,CAAQ,EAAE,MAAM,WACnCjO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,gBAC3C,EACMjO,EAAa,KAAMsO,EAAW,EAAE,KAAK,cAAgB,CACnD,MAAOtO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,MAC1C,YAAauD,EACb,iBAAkBxR,EAAa,KAAMiO,CAAQ,EAAE,MAAM,iBACrD,WAAYjO,EAAa,KAAMiO,CAAQ,EAAE,MAAM,UACvD,CACI,CAEJ,EACAoB,GAAoC,IAAI,QACxCC,GAAsC,SAASmC,EAAYC,EAAYC,EAAkB,CAEvF,IAAIC,EADmB,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,KAAM,KAAM,MAAO,KAAM,KAAM,MAAO,IAAK,IAAI,EACjE,QAAQF,CAAU,EACpDG,EAAgBF,EAChBG,EAAa,GACjBA,GAAcL,EAAW,SAAS,CAAC,EAAE,SAAS,EAAG,GAAG,EACpDK,GAAcF,EAAe,SAAS,CAAC,EAAE,SAAS,EAAG,GAAG,EACpDA,IAAmB,KACrBE,GAAcJ,EAAW,SAAS,CAAC,EAAE,SAAS,GAAI,GAAG,GACvDI,GAAcD,EAAc,SAAS,CAAC,EAAE,SAAS,EAAG,GAAG,EACvD,IAAIE,EAAgB,KAAK,KAAKD,EAAW,OAAS,CAAC,EAAI,EACvDA,EAAaA,EAAW,OAAOC,EAAe,GAAG,EACjD,IAAIC,EAAc,IAAI,WAAWF,EAAW,OAAS,CAAC,EACtD,QAASjI,EAAI,EAAGA,EAAIiI,EAAW,OAAQjI,GAAK,EAC1CmI,EAAYnI,EAAI,CAAC,EAAI,SAASiI,EAAW,MAAMjI,EAAGA,EAAI,CAAC,EAAG,CAAC,EAE7D,OAAOmI,CACT,EACAzC,GAAwB,IAAI,QAC5BC,GAA0B,SAAS7K,EAAO8G,EAAMxI,EAAMsN,EAAWlM,EAAUiM,EAAME,EAAuB,CACtG,IAAIyB,EAAiC1B,EAAY,IAC7C2B,GAA4B3B,GAAaC,GAAyB,IAAM,IACxE2B,EAAoB9N,EAAW,IAC/B+N,EAAW7R,EAAgB,KAAMoP,GAAoBC,EAAoB,EAAE,KAAK,KAAMqC,EAAgCC,EAA0BvN,CAAK,EACzJ,OAAAsN,EAAiCG,EAAS,sBAC1CF,EAA2BE,EAAS,gBAChC9B,GAAM,gBACJ3L,EAAM,KAAK,gBAAkB,KAC/BA,EAAM,KAAK,cAAgB2L,EAAK,cAEhC,OAAO,OAAO3L,EAAM,KAAK,cAAe2L,EAAK,aAAa,GAGjD,CACX,sBAAuB2B,EACvB,gBAAiBC,EACjB,SAAUC,EACV,KAAA1G,EACA,KAAMA,EAAK,WACX,KAAAxI,EAEA,2BAA4BjB,GAAcmQ,EAAmBxN,EAAM,SAAS,CAChF,CAEA,EACA8K,GAAoB,IAAI,QACxBC,GAAsB,SAAS/K,EAAO5C,EAAQ,CACxC/B,EAAa,KAAMiO,CAAQ,EAAE,YAAc,cAC7CtJ,EAAM,QAAQ,KAAK5C,CAAM,EAE3B,MAAMsQ,EAA8BrQ,GAAcD,EAAO,sBAAwBA,EAAO,gBAAiB4C,EAAM,SAAS,EACxH,GAAIA,EAAM,qBAAuB,KAAM,CACrC,IAAI2N,EAAiBtQ,GAAcD,EAAO,gBAAiB4C,EAAM,UAAW,EAAK,EAC7E4N,EAAQ,KAAK,MAAMD,EAAiB3N,EAAM,kBAAkB,EAGhE,GAFAA,EAAM,oBAAsB4N,EAC5B5N,EAAM,WAAW,2BAA6B4N,EAC1CvS,EAAa,KAAMiO,CAAQ,EAAE,YAAc,aAAc,CAC3D,IAAIuE,EAAiB9Q,GAAKiD,EAAM,iBAAiB,EAC7C6N,EAAe,cAAgB,GACjCA,EAAe,YAAcD,EAC7BC,EAAe,eACNA,EAAe,cAAgBD,EACxCC,EAAe,eAEfA,EAAe,cACf7N,EAAM,kBAAkB,KAAK,CAC3B,YAAa,EACb,YAAa4N,CACvB,CAAS,GAEH,MAAME,EAAsC/Q,GAAKiD,EAAM,0BAA0B,EAC7E8N,EAAoC,8BAAgCJ,EACtEI,EAAoC,cAEpC9N,EAAM,2BAA2B,KAAK,CACpC,YAAa,EACb,4BAAA0N,CACV,CAAS,CAEL,CACF,MACE1N,EAAM,mBAAqB,EACvB3E,EAAa,KAAMiO,CAAQ,EAAE,YAAc,eAC7CtJ,EAAM,kBAAkB,KAAK,CAC3B,YAAa,EACb,YAAa3C,GAAcD,EAAO,SAAU4C,EAAM,SAAS,CACnE,CAAO,EACDA,EAAM,2BAA2B,KAAK,CACpC,YAAa,EACb,4BAAA0N,CACR,CAAO,GAGL1N,EAAM,WAAa5C,EACnB,IAAI2Q,EAAgB,GACpB,GAAI,CAAC/N,EAAM,aACT+N,EAAgB,OACX,CACL,IAAIC,EAAuB5Q,EAAO,sBAAwB4C,EAAM,aAAa,eAC7E,GAAI3E,EAAa,KAAMiO,CAAQ,EAAE,YAAc,aAAc,CAC3D,IAAI2E,EAAqB5S,EAAa,KAAMqO,EAAW,GAAKrO,EAAa,KAAMsO,EAAW,EAC1F,MAAMuE,EAAgB7S,EAAa,KAAMiO,CAAQ,EAAE,qBAAuB,EACtEtJ,IAAUiO,GAAsB7Q,EAAO,OAAS,OAAS4Q,GAAwBE,IACnFH,EAAgB,GAChBnS,EAAgB,KAAMwP,GAAmBC,EAAmB,EAAE,KAAK,IAAI,EAE3E,MACE0C,EAAgBC,GAAwB,EAE5C,CACID,IACE/N,EAAM,cACRpE,EAAgB,KAAMsP,GAAuBC,EAAuB,EAAE,KAAK,KAAMnL,CAAK,EAExFA,EAAM,aAAe,CACnB,eAAgB5C,EAAO,sBACvB,QAAS,CAAA,CACf,GAEE4C,EAAM,aAAa,QAAQ,KAAK5C,CAAM,CACxC,EACA4N,GAAqB,IAAI,QACzBC,GAAuB,SAASkD,EAAuBC,EAAiBpO,EAAO,CAC7E,MAAMqO,EAA0BhT,EAAa,KAAMiO,CAAQ,EAAE,yBAA2B,SAClFgF,EAAwBtO,EAAM,sBAAwB,GAE5D,GAAIqO,GAA2BC,GADNF,IAAoB,EAE3C,MAAM,IAAI,MACR,iFAAiFA,CAAe;AAAA;AAAA;AAAA,CAItG,EACS,GAAI/S,EAAa,KAAMiO,CAAQ,EAAE,yBAA2B,UAAYjO,EAAa,KAAMiO,CAAQ,EAAE,yBAA2B,qBAAsB,CACvJtJ,EAAM,uBAAyB,SACjCA,EAAM,qBAAuBoO,GAE/B,IAAIG,EACAlT,EAAa,KAAMiO,CAAQ,EAAE,yBAA2B,SAC1DiF,EAAsBvO,EAAM,qBAE5BuO,EAAsB,KAAK,IACzBlT,EAAa,KAAMqO,EAAW,GAAG,sBAAwB,IACzDrO,EAAa,KAAMsO,EAAW,GAAG,sBAAwB,GACjE,EAEIyE,GAAmBG,EACnBJ,GAAyBI,CAC3B,CACA,GAAIH,EAAkBpO,EAAM,oBAC1B,MAAM,IAAI,MACR,8DAA8DA,EAAM,oBAAsB,GAAG,OAAOoO,EAAkB,GAAG,IAC/H,EAEE,OAAApO,EAAM,oBAAsBoO,EACrB,CAAE,sBAAAD,EAAuB,gBAAAC,CAAe,CACjD,EACAlD,GAAwB,IAAI,QAC5BC,GAA0B,SAASnL,EAAO,CACxC,GAAI3E,EAAa,KAAMiO,CAAQ,EAAE,YAAc,aAC7C,MAAM,IAAI,MAAM,yEAAyE,EAE3F,GAAKtJ,EAAM,aAWX,IATAA,EAAM,gBAAgB,KAAKA,EAAM,YAAY,EAC7C3E,EAAa,KAAMwO,EAAgB,EAAE,KAAK7J,EAAM,YAAY,GACxDA,EAAM,yBAAyB,SAAW,GAAKjD,GAAKiD,EAAM,wBAAwB,EAAE,kBAAoBA,EAAM,aAAa,QAAQ,SACrIA,EAAM,yBAAyB,KAAK,CAClC,WAAYA,EAAM,gBAAgB,OAElC,gBAAiBA,EAAM,aAAa,QAAQ,MAClD,CAAK,EAEC3E,EAAa,KAAMiO,CAAQ,EAAE,YAAc,YAAa,CAC1DtJ,EAAM,aAAa,OAAS,EAC5B,MACF,CACAA,EAAM,aAAa,OAAS3E,EAAa,KAAMkO,CAAO,EAAE,IACxD,QAASnM,KAAU4C,EAAM,aAAa,QACpC3E,EAAa,KAAMkO,CAAO,EAAE,MAAMnM,EAAO,IAAI,EAC7CA,EAAO,KAAO,KAEhBxB,EAAgB,KAAM0P,GAAkCC,EAAkC,EAAE,KAAK,IAAI,EACvG,EACAH,GAAoB,IAAI,QACxBC,GAAsB,SAASmD,EAAuB,GAAM,CAC1D,GAAInT,EAAa,KAAMiO,CAAQ,EAAE,YAAc,aAC7C,MAAM,IAAI,MAAM,sEAAsE,EAExF,IAAIlK,EAAS,CAAC/D,EAAa,KAAMqO,EAAW,EAAGrO,EAAa,KAAMsO,EAAW,CAAC,EAAE,OAAQ3J,GAAUA,GAASA,EAAM,YAAY,EAC7H,GAAIZ,EAAO,SAAW,EACpB,OACF,IAAIqP,EAAiB9S,GAAiB,KAAMmO,EAAmB,EAAE,IACjE,GAAI2E,IAAmB,EAAG,CACxB,IAAIrC,EAAWjN,GAAKC,EAAQ/D,EAAa,KAAMuO,EAAa,EAAG,EAAI,EACnEvO,EAAa,KAAMkO,CAAO,EAAE,SAAS6C,CAAQ,CAC/C,CACA,IAAIsC,EAAarT,EAAa,KAAMkO,CAAO,EAAE,IACzCoF,EAAUtL,GAAKoL,EAAgBrP,CAAM,EACzC/D,EAAa,KAAMkO,CAAO,EAAE,SAASoF,CAAO,EAC5C,CACE,IAAIC,EAAU7P,GAAK,EAAK,EACpB8P,EAAuB,EAC3B,QAAS7O,KAASZ,EAChB,QAAShC,KAAU4C,EAAM,aAAa,QACpC6O,GAAwBzR,EAAO,KAGnC,IAAI4O,EAAW3Q,EAAa,KAAMkO,CAAO,EAAE,WAAWqF,CAAO,EAAIC,EAC7D7C,GAAY,GAAK,KACnB4C,EAAQ,UAAY,GACpB5C,EAAW3Q,EAAa,KAAMkO,CAAO,EAAE,WAAWqF,CAAO,EAAIC,GAE/DD,EAAQ,KAAO5C,EACf3Q,EAAa,KAAMkO,CAAO,EAAE,SAASqF,CAAO,CAC9C,CACA,QAAS5O,KAASZ,EAAQ,CACxBY,EAAM,aAAa,OAAS3E,EAAa,KAAMkO,CAAO,EAAE,IACxDvJ,EAAM,aAAa,WAAa0O,EAChC,QAAStR,KAAU4C,EAAM,aAAa,QACpC3E,EAAa,KAAMkO,CAAO,EAAE,MAAMnM,EAAO,IAAI,EAC7CA,EAAO,KAAO,IAElB,CACA,IAAIiJ,EAAShL,EAAa,KAAMkO,CAAO,EAAE,IACzClO,EAAa,KAAMkO,CAAO,EAAE,KAAKlO,EAAa,KAAMkO,CAAO,EAAE,QAAQ,IAAIoF,CAAO,CAAC,EACjF,IAAIG,EAAazL,GAAKoL,EAAgBrP,CAAM,EAC5C/D,EAAa,KAAMkO,CAAO,EAAE,SAASuF,CAAU,EAC/CzT,EAAa,KAAMkO,CAAO,EAAE,KAAKlD,CAAM,EACvC,QAASrG,KAASZ,EAChBY,EAAM,gBAAgB,KAAKA,EAAM,YAAY,EAC7C3E,EAAa,KAAMwO,EAAgB,EAAE,KAAK7J,EAAM,YAAY,EAC5DA,EAAM,aAAe,KAEnBwO,GACF5S,EAAgB,KAAM0P,GAAkCC,EAAkC,EAAE,KAAK,IAAI,CAEzG,EACAD,GAAmC,IAAI,QACvCC,GAAqC,UAAW,CAC1ClQ,EAAa,KAAMkO,CAAO,YAAatB,IACzC5M,EAAa,KAAMkO,CAAO,EAAE,MAAK,CAErC,EACAiC,GAAsB,IAAI,QAC1BC,GAAwB,UAAW,CACjC,GAAIpQ,EAAa,KAAM4O,EAAU,EAC/B,MAAM,IAAI,MAAM,yEAAyE,CAE7F,EC30DA,eAAsB8E,GACpBC,EACAC,EACAC,EACAC,EACe,CACf,MAAMC,EAAc,KAAK,KAAKF,EAAO,gBAAkBA,EAAO,GAAG,EAE3DG,EAAQ,IAAI3D,GAAM,CACtB,OAAQ,IAAIjG,GACZ,MAAO,CAAE,MAAO,MAAO,MAAOyJ,EAAO,MAAO,OAAQA,EAAO,MAAA,EAC3D,UAAW,WAAA,CACZ,EAEKI,EAAU,IAAI,aAAa,CAC/B,OAAQ,CAAC/J,EAAOoG,IAAS0D,EAAM,cAAc9J,EAAOoG,CAAI,EACxD,MAAQ4D,GAAM,QAAQ,MAAM,iBAAkBA,CAAC,CAAA,CAChD,EAEDD,EAAQ,UAAU,CAChB,MAAO,cACP,MAAOJ,EAAO,MACd,OAAQA,EAAO,OACf,QAASA,EAAO,QAChB,UAAWA,EAAO,GAAA,CACnB,EAED,MAAMM,EAAW,EAAIN,EAAO,IAE5B,QAAShK,EAAI,EAAGA,EAAIkK,EAAalK,IAAK,CACpC+J,EAAM,KAAKO,CAAQ,EAEnB,MAAMC,EAAa,IAAI,WAAWT,EAAQ,CACxC,UAAY9J,EAAI,IAAagK,EAAO,GAAA,CACrC,EACDI,EAAQ,OAAOG,CAAU,EACzBA,EAAW,MAAA,EAEPvK,EAAI,KAAO,IACbiK,IAAajK,EAAGkK,CAAW,EAC3B,MAAM,IAAI,QAASM,GAAM,WAAWA,EAAG,CAAC,CAAC,EAE7C,CAEA,aAAMJ,EAAQ,MAAA,EACdD,EAAM,SAAA,EAEC,IAAI,KAAK,CAACA,EAAM,OAAO,MAAM,EAAG,CAAE,KAAM,YAAa,CAC9D,CAEO,SAASM,GAAaC,EAAYC,EAAwB,CAC/D,MAAM/O,EAAM,IAAI,gBAAgB8O,CAAI,EAC9BxH,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOtH,EACTsH,EAAE,SAAWyH,EACbzH,EAAE,MAAA,EACF,IAAI,gBAAgBtH,CAAG,CACzB,CChDO,SAASgP,GACdb,EACAc,EAAiB,aACY,CAC7B,MAAMC,EAAMf,EAAM,gBAAgBc,CAAc,EAChD,OAAIC,IAAQ,KAAa,KAElB,CACL,IAAAA,EACA,IAAI,MAAO,CACT,OAAOC,GAAe,KAAKD,CAAG,CAChC,EACA,IAAI,KAAKE,EAAW,CAClBD,GAAe,KAAKD,CAAG,EAAIE,CAC7B,EACA,IAAI,QAAS,CACX,OAAOD,GAAe,OAAOD,CAAG,CAClC,EACA,IAAI,OAAOE,EAAW,CACpBD,GAAe,OAAOD,CAAG,EAAIE,CAC/B,EACA,IAAI,KAAM,CACR,OAAOD,GAAe,IAAID,CAAG,CAC/B,CAAA,CAEJ,CAEA,IAAIG,GAAkC,KAE/B,SAASC,GAAahV,EAAmB,CAC9C,MAAMiV,EAAS,SAAS,eAAe,kBAAkB,EACrDA,MAAe,YAAcjV,EACnC,CAEO,SAASkV,GACdC,EACAC,EACAC,EACAC,EACAC,EACM,CACN,GAAIR,GAAa,OAEjBA,GAAc,SAAS,cAAc,KAAK,EAC1CA,GAAY,GAAK,eACjBA,GAAY,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAmDxB,SAAS,KAAK,YAAYA,EAAW,EAErC,MAAMS,EAAgB,IAAM,CAC1B,MAAMC,EAAY,SAAS,eAAe,cAAc,EAClDC,EAAQ,SAAS,eAAe,UAAU,EAC1CC,EAAU,SAAS,eAAe,UAAU,EAC5CC,EAAU,SAAS,eAAe,UAAU,EAC5CC,EAAY,SAAS,eAAe,iBAAiB,EAEvDJ,IAAWA,EAAU,YAAc,OAAON,EAAW,MAAM,GAC3DO,IAAOA,EAAM,YAAc,OAAOP,EAAW,GAAG,GAChDQ,IAASA,EAAQ,SAAWR,EAAW,QAAU,GACjDS,IAASA,EAAQ,SAAWT,EAAW,QAAUA,EAAW,KAC5DU,IAAWA,EAAU,SAAWV,EAAW,QAAUA,EAAW,KAAOI,EAAA,EAC7E,EAEA,SAAS,eAAe,UAAU,GAAG,iBAAiB,QAAS,IAAM,CACnEH,EAAA,EACAI,EAAA,CACF,CAAC,EAED,SAAS,eAAe,UAAU,GAAG,iBAAiB,QAAS,IAAM,CACnEH,EAAA,EACAG,EAAA,CACF,CAAC,EAED,SAAS,eAAe,iBAAiB,GAAG,iBAAiB,QAAS,SAAY,CAChF,MAAMF,EAAA,EACNE,EAAA,CACF,CAAC,EAED,SAAS,iBAAiB,UAAYrB,GAAM,CACtCA,EAAE,IAAI,YAAA,IAAkB,KAAO,CAACoB,KAClCD,EAAA,EAAW,KAAKE,CAAa,EAE3BrB,EAAE,MAAQ,aAAegB,EAAW,OAAS,GAAK,CAACI,MACrDH,EAAA,EACAI,EAAA,GAEErB,EAAE,MAAQ,cAAgBgB,EAAW,OAASA,EAAW,KAAO,CAACI,MACnEF,EAAA,EACAG,EAAA,EAEJ,CAAC,EAED,YAAYA,EAAe,GAAG,EAC9BA,EAAA,CACF,CCvJA,IAAID,GAAc,GAElB,SAASO,GAAgBC,EAAkBC,EAAgBC,EAA0B,CACnF,MAAMlT,EAAM,GAAGgT,CAAQ,IAAIC,CAAM,GAC3BE,EAAUD,EAAYlT,CAAG,EAC/B,OAAKmT,EACE,CAAE,KAAMA,EAAS,SAAAH,EAAU,OAAAC,CAAA,EADb,IAEvB,CAEA,eAAeG,GACbvC,EACAC,EACAkC,EACAC,EACAC,EACAnC,EACe,CACf,GAAIyB,GAAa,OACjBA,GAAc,GAEd,MAAMa,EAAWN,GAAgBC,EAAUC,EAAQC,CAAW,EAC9D,GAAI,CAACG,EAAU,CACb,QAAQ,MAAM,yBAAyBL,CAAQ,IAAIC,CAAM,EAAE,EAC3DT,GAAc,GACd,MACF,CAEA,MAAMJ,EAAaT,GAAkBb,CAAK,EAC1C,GAAI,CAACsB,EAAY,CACf,QAAQ,MAAM,0BAA0B,EACxCI,GAAc,GACd,MACF,CAEA,MAAMc,EAAYzC,EAAO,MACnB0C,EAAa1C,EAAO,OACpB2C,EAAY3C,EAAO,MAAM,QAE/B,SAAS,KAAK,UAAU,IAAI,gBAAgB,EAC5CA,EAAO,UAAU,IAAI,kBAAkB,EACvCA,EAAO,MAAQE,EAAO,MACtBF,EAAO,OAASE,EAAO,OACvBF,EAAO,MAAM,QAAU,SAASE,EAAO,KAAK,aAAaA,EAAO,MAAM,mBACtE,OAAO,cAAc,IAAI,MAAM,QAAQ,CAAC,EAExC,MAAM,IAAI,QAASQ,GAAM,sBAAsBA,CAAC,CAAC,EAEjDU,GAAa,aAAaoB,EAAS,IAAI,KAAK,EAE5CjB,EAAW,OAASa,EAEpB,MAAMQ,EAAY,YAAY,IAAA,EAExBhC,EAAO,MAAMb,GAAeC,EAAQC,EAAOC,EAAQ,CAAC2C,EAAOC,IAAU,CACzE1B,GAAa,aAAaoB,EAAS,IAAI,KAAKK,CAAK,IAAIC,CAAK,EAAE,CAC9D,CAAC,EAEKC,EAAU,YAAY,IAAA,EAAQH,EAC9BI,EAAS9C,EAAO,gBAAkB,IAAQ6C,EAEhD,SAAS,KAAK,UAAU,OAAO,gBAAgB,EAC/C/C,EAAO,UAAU,OAAO,kBAAkB,EAC1CA,EAAO,MAAQyC,EACfzC,EAAO,OAAS0C,EAChB1C,EAAO,MAAM,QAAU2C,EACvB,OAAO,cAAc,IAAI,MAAM,QAAQ,CAAC,EAExChC,GAAaC,EAAM,QAAQuB,CAAQ,IAAIC,CAAM,MAAM,EAEnDhB,GAAa,UAAUR,EAAK,KAAO,KAAO,MAAM,QAAQ,CAAC,CAAC,QAAQoC,EAAM,QAAQ,CAAC,CAAC,YAAY,EAC9FrB,GAAc,EAChB,CAEO,SAASsB,GACdC,EACAb,EACAnC,EAAmC,CAAA,EAC7B,CACN,MAAMiD,EAAa,CAAE,GAAGnX,GAAgB,GAAGkU,CAAA,EAErCkD,EAAa,YAAY,IAAM,CACnC,MAAMpD,EAAS,SAAS,cAAckD,CAAc,EACpD,GAAIlD,GAAQ,UAAW,CACrB,cAAcoD,CAAU,EAExB,MAAMnD,EAAQD,EAAO,UACfuB,EAAaT,GAAkBb,CAAK,EAC1C,GAAI,CAACsB,EAAY,OAEjBD,GACEC,EACA,IAAM,CACAA,EAAW,OAAS,IAAGA,EAAW,OAASA,EAAW,OAAS,EACrE,EACA,IAAM,CACAA,EAAW,OAASA,EAAW,MAAKA,EAAW,OAASA,EAAW,OAAS,EAClF,EACA,IAAM,CACJ,GAAII,IAAeJ,EAAW,QAAUA,EAAW,IAAK,OAAO,QAAQ,QAAA,EACvE,MAAM8B,EAAO9B,EAAW,OAClB+B,EAAKD,EAAO,EAClB,OAAOd,GAAevC,EAAQC,EAAOoD,EAAMC,EAAIjB,EAAac,CAAU,CACxE,EACA,IAAMxB,EAAA,CAEV,CACF,EAAG,GAAG,CACR,CC/GO,MAAM4B,EAAcC,EAAqB,CAC9C,YAAaC,EAAW,IACxB,QAASA,EAAW,IACpB,IAAKA,EAAW,IAChB,MAAOA,EAAW,IAClB,WAAYA,EAAW,IACvB,SAAUA,EAAW,IACrB,MAAOA,EAAW,KAClB,YAAaA,EAAW,IACxB,cAAeA,EAAW,IAC1B,WAAYA,EAAW,IACvB,YAAaA,EAAW,GAC1B,CAAC,EAEYC,EAAQF,EAAqB,CACxC,OAAQC,EAAW,IACnB,MAAOA,EAAW,IAClB,MAAOA,EAAW,IAClB,WAAYA,EAAW,IACvB,MAAOA,EAAW,IAClB,YAAaA,EAAW,IACxB,UAAWA,EAAW,IACtB,WAAYA,EAAW,GACzB,CAAC,EAEYE,GAAiBH,EAAqB,CACjD,MAAOC,EAAW,KAClB,QAASA,EAAW,IACpB,cAAeA,EAAW,IAC1B,QAASA,EAAW,GACtB,CAAC,EAEYG,EAAWJ,EAAqB,CAC3C,QAASC,EAAW,IACpB,UAAWA,EAAW,IACtB,WAAYA,EAAW,IACvB,SAAUA,EAAW,IACrB,MAAOA,EAAW,KAClB,QAASA,EAAW,IACpB,YAAaA,EAAW,IACxB,QAASA,EAAW,IACpB,UAAWA,EAAW,IACtB,WAAYA,EAAW,IACvB,SAAUA,EAAW,GACvB,CAAC,EAEYI,GAAmBC,EAAiB,CAACP,CAAW,CAAC,EACjDQ,GAAaD,EAAiB,CAACJ,CAAK,CAAC,EACfI,EAAiB,CAACH,EAAc,CAAC,EAC7D,MAAMK,GAAgBF,EAAiB,CAACF,CAAQ,CAAC,ECjDlDK,OAAiB,QACjBC,OAA0B,QAEhC,SAASC,GAAalE,EAAwC,CAC5D,IAAImE,EAAQH,GAAW,IAAIhE,CAAK,EAChC,OAAKmE,IACHA,MAAY,IACZH,GAAW,IAAIhE,EAAOmE,CAAK,GAEtBA,CACT,CAEA,SAASC,GAAcpE,EAAgC,CACrD,IAAIqE,EAAUJ,GAAoB,IAAIjE,CAAK,EAC3C,OAAKqE,IACHA,MAAc,IACdJ,GAAoB,IAAIjE,EAAOqE,CAAO,GAEjCA,CACT,CAEO,SAASC,GAAmBtE,EAAmBuE,EAAgB7W,EAAoB,CACxFwW,GAAalE,CAAK,EAAE,IAAIuE,EAAQ7W,CAAI,CACtC,CAEO,SAAS8W,GAAmBxE,EAAmBuE,EAAwB,CAC5E,OAAOL,GAAalE,CAAK,EAAE,IAAIuE,CAAM,GAAK,EAC5C,CAEO,SAASE,GAAsBzE,EAAmBuE,EAAsB,CAC7EH,GAAcpE,CAAK,EAAE,IAAIuE,CAAM,CACjC,CAEO,SAASG,GAAyB1E,EAAmBuE,EAAsB,CAChFH,GAAcpE,CAAK,EAAE,OAAOuE,CAAM,CACpC,CAEO,SAASI,GAAuB3E,EAAgC,CACrE,OAAOoE,GAAcpE,CAAK,CAC5B,CCnCO,MAAM4E,GAAgC,CAC3C,MAAO,aACP,MAAM5E,EAAO,CACX,UAAW6E,KAAajB,GAAiB5D,EAAM,KAAK,EAAG,CACrD,GAAIsD,EAAY,YAAYuB,CAAS,EAAG,SAExC,MAAMnX,EAAO8W,GAAmBxE,EAAO6E,CAAS,EAChD,GAAI,CAACnX,EAAM,SAEX,MAAMoX,EAAQpX,EAAK,MAAM,GAAG,EAAE,OAAQqX,GAAMA,EAAE,OAAS,CAAC,EACxD,GAAID,EAAM,SAAW,EAAG,SAExBxB,EAAY,WAAWuB,CAAS,EAAIC,EAAM,OAC1CxB,EAAY,YAAYuB,CAAS,EAAI,EAErC,MAAMG,EAAW1B,EAAY,SAASuB,CAAS,EACzCI,EAAQ3B,EAAY,MAAMuB,CAAS,EAEzC,QAAS5O,EAAI,EAAGA,EAAI6O,EAAM,OAAQ7O,IAAK,CACrC,MAAMiP,EAAWlF,EAAM,aAAA,EAEvBA,EAAM,aAAakF,EAAUC,EAAW,CACtC,KAAM,EACN,KAAM,EACN,KAAM,EACN,KAAM,EACN,OAAQ,EACR,OAAQ,EACR,OAAQ,CAAA,CACT,EACDnF,EAAM,aAAakF,EAAUE,GAAQ,CAAE,OAAQP,EAAW,EAC1D7E,EAAM,aAAakF,EAAUG,GAAM,CACjC,SAAAL,EACA,MAAAC,CAAA,CACD,EACDjF,EAAM,aAAakF,EAAUzB,EAAO,CAClC,OAAQoB,EACR,MAAO5O,EACP,MAAO,EACP,WAAY,EACZ,MAAO,EACP,YAAa,CAAA,CACd,EAEDqP,GAAetF,EAAOkF,EAAUJ,EAAM7O,CAAC,CAAC,EACxCwO,GAAsBzE,EAAOkF,CAAQ,CACvC,CACF,CACF,CACF,EClDaK,GAAkC,CAC7C,MAAO,OACP,OAAOvF,EAAO,CACZ,MAAMqE,EAAUM,GAAuB3E,CAAK,EAC5C,UAAWkF,KAAYb,EACrBmB,GAAYxF,EAAOkF,EAAWO,GAAuB,CACnDhC,EAAM,MAAMyB,CAAQ,EAAIO,EAAO,MAC/B,MAAMZ,EAAYpB,EAAM,OAAOyB,CAAQ,EACvC5B,EAAY,cAAcuB,CAAS,IACnCH,GAAyB1E,EAAOkF,CAAQ,CAC1C,CAAC,CAEL,CACF,ECdaQ,GAAiC,CAC5C,MAAO,aACP,OAAO1F,EAAO,CACZ,UAAW6E,KAAajB,GAAiB5D,EAAM,KAAK,EAAG,CACrD,MAAM2F,EAAarC,EAAY,WAAWuB,CAAS,EAC7Ce,EAAgBtC,EAAY,cAAcuB,CAAS,EAEzD,GAAIc,IAAe,GAAKC,EAAgBD,EAAY,SAEpD,MAAME,EAAmB,CAAA,EACzB,UAAWX,KAAYpB,GAAW9D,EAAM,KAAK,EACvCyD,EAAM,OAAOyB,CAAQ,IAAML,GAC7BgB,EAAO,KAAKX,CAAQ,EAGxBW,EAAO,KAAK,CAAC1M,EAAGC,IAAMqK,EAAM,MAAMtK,CAAC,EAAIsK,EAAM,MAAMrK,CAAC,CAAC,EAErD,IAAI0M,EAAkB,GACtB,UAAW/E,KAAO8E,EAChB,GAAIpC,EAAM,YAAY1C,CAAG,EAAI,EAAG,CAC9B+E,EAAkB,GAClB,KACF,CAGF,GAAI,CAACxC,EAAY,YAAYuB,CAAS,GAAKiB,EAAiB,CAC1D,MAAMC,EAAUzC,EAAY,QAAQuB,CAAS,EACvCmB,EAAM1C,EAAY,IAAIuB,CAAS,EAE/BoB,EAASJ,EAAO,IAAK9E,GAAQ0C,EAAM,MAAM1C,CAAG,EAAI0C,EAAM,YAAY1C,CAAG,CAAC,EACtEmF,EAAcD,EAAO,OAAQlB,GAAMA,EAAI,CAAC,EAAE,OAC1CoB,EAAaF,EAAO,OAAO,CAACG,EAAKrB,IAAMqB,EAAMrB,EAAG,CAAC,EACjDsB,EAAO,KAAK,IAAI,EAAGH,EAAc,CAAC,EAClCI,EAAiBH,EAAaJ,EAAUM,EACxCE,EAAsBJ,EAAaH,EAAMK,EAE/C,IAAIG,EAAa,CAACF,EAAiB,EAC/BG,EAAkB,CAACF,EAAsB,EAE7C,QAAStQ,EAAI,EAAGA,EAAI4P,EAAO,OAAQ5P,IAAK,CACtC,MAAM8K,EAAM8E,EAAO5P,CAAC,EACdyQ,EAAQT,EAAOhQ,CAAC,EAElByQ,EAAQ,IACVjD,EAAM,MAAM1C,CAAG,EAAIyF,EAAaE,EAAQ,EACxCjD,EAAM,WAAW1C,CAAG,EAAI0F,EAAkBC,EAAQ,EAClDF,GAAcE,EAAQX,EACtBU,GAAmBC,EAAQV,EAE/B,CAEA1C,EAAY,YAAYuB,CAAS,EAAI,CACvC,CACF,CAEA,MAAM8B,EAAa,EAAI,KAAK,IAAI,IAAM3G,EAAM,KAAK,SAAS,EAE1D,UAAWkF,KAAYpB,GAAW9D,EAAM,KAAK,EAAG,CAC9C,MAAM6E,EAAYpB,EAAM,OAAOyB,CAAQ,EAIvC,GAHI,CAAC5B,EAAY,YAAYuB,CAAS,GAElBpB,EAAM,YAAYyB,CAAQ,IAC1B,EAAG,SAEvB,MAAM0B,EAAItD,EAAY,YAAYuB,CAAS,EACrCgC,EACJpD,EAAM,MAAMyB,CAAQ,GAAKzB,EAAM,WAAWyB,CAAQ,EAAIzB,EAAM,MAAMyB,CAAQ,GAAK0B,EAC3EE,EACJxD,EAAY,MAAMuB,CAAS,GAC1BvB,EAAY,WAAWuB,CAAS,EAAIvB,EAAY,MAAMuB,CAAS,GAAK+B,EACvEzB,EAAU,KAAKD,CAAQ,IAAM2B,EAAU1B,EAAU,KAAKD,CAAQ,GAAKyB,EACnExB,EAAU,KAAKD,CAAQ,IAAM4B,EAAU3B,EAAU,KAAKD,CAAQ,GAAKyB,CACrE,CACF,CACF,ECzEA,SAASI,GAAiB/G,EAAmBiF,EAAuB,CAClE,MAAMlE,EAAMf,EAAM,aAAA,EAClB,OAAAA,EAAM,aAAae,EAAKoE,EAAW,CAAE,KAAM,EAAG,KAAM,EAAG,KAAM,CAAA,CAAG,EAChEnF,EAAM,aAAae,EAAKiG,EAAM,CAC5B,QAAS,EACT,QAAS,EACT,QAAS,EACT,MAAA/B,EACA,QAAS,EACT,UAAW,GAAA,CACZ,EACMlE,CACT,CAEA,MAAMkG,GAAqBpD,EAAiB,CAACF,EAAUF,EAAO0B,CAAS,CAAC,EAE3D+B,GAAmC,CAC9C,MAAO,aACP,OAAOlH,EAAO,CACZ,UAAWkF,KAAYpB,GAAW9D,EAAM,KAAK,EAAG,CAC9C,GAAIA,EAAM,aAAakF,EAAUvB,CAAQ,EAAG,SAE5C,MAAMkB,EAAYpB,EAAM,OAAOyB,CAAQ,EAEvC,GADI,CAAClF,EAAM,aAAa6E,EAAWnB,EAAc,GAC7C,CAACJ,EAAY,YAAYuB,CAAS,EAAG,SAEzC,MAAM5E,EAASyD,GACTyD,EAAgBlH,EAAO,cAAc4E,CAAS,IAAM,EAE1D7E,EAAM,aAAakF,EAAUvB,EAAU,CACrC,QAASwD,EAAgB,EAAI,EAC7B,UAAWA,EAAgB,EAAI,EAC/B,WAAY,EACZ,SAAUA,EAAgB,EAAI,EAC9B,MAAOlH,EAAO,MAAM4E,CAAS,EAC7B,QAAS5E,EAAO,QAAQ4E,CAAS,CAAA,CAClC,CACH,CAEA,UAAW9D,KAAOkG,GAAmBjH,EAAM,KAAK,EAAG,CACjD,GAAI2D,EAAS,YAAY5C,CAAG,EAAG,SAE/B,MAAM8D,EAAYpB,EAAM,OAAO1C,CAAG,EAClC,GAAI,CAACuC,EAAY,YAAYuB,CAAS,EAAG,SAEzC,MAAMI,EAAQtB,EAAS,MAAM5C,CAAG,GAAKuC,EAAY,MAAMuB,CAAS,EAE1DuC,EAAUL,GAAiB/G,EAAOiF,CAAK,EACvCoC,EAAYN,GAAiB/G,EAAOiF,CAAK,EACzCqC,EAAaP,GAAiB/G,EAAOiF,CAAK,EAC1CsC,EAAWR,GAAiB/G,EAAOiF,CAAK,EAE9CtB,EAAS,QAAQ5C,CAAG,EAAIqG,EACxBzD,EAAS,UAAU5C,CAAG,EAAIsG,EAC1B1D,EAAS,WAAW5C,CAAG,EAAIuG,EAC3B3D,EAAS,SAAS5C,CAAG,EAAIwG,EAEzBP,EAAK,QAAQI,CAAO,EAAIzD,EAAS,QAAQ5C,CAAG,EAC5CiG,EAAK,QAAQK,CAAS,EAAI1D,EAAS,UAAU5C,CAAG,EAChDiG,EAAK,QAAQM,CAAU,EAAI3D,EAAS,WAAW5C,CAAG,EAClDiG,EAAK,QAAQO,CAAQ,EAAI5D,EAAS,SAAS5C,CAAG,EAE9C4C,EAAS,YAAY5C,CAAG,EAAI,CAC9B,CACF,CACF,ECjEayG,GAAoC,CAC/C,MAAO,aACP,OAAOxH,EAAO,CACZ,UAAWe,KAAOgD,GAAc/D,EAAM,KAAK,EAAG,CAC5C,GAAI,CAAC2D,EAAS,YAAY5C,CAAG,EAAG,SAEhC,MAAM8D,EAAYpB,EAAM,OAAO1C,CAAG,EAC5B0G,EAAStC,EAAU,KAAKpE,CAAG,EAC3B2G,EAASvC,EAAU,KAAKpE,CAAG,EAC3B4G,EAASxC,EAAU,KAAKpE,CAAG,EAC3B2F,EAAQjD,EAAM,MAAM1C,CAAG,EACvBiE,EAAW1B,EAAY,SAASuB,CAAS,EACzC+C,EAAUjE,EAAS,QAAQ5C,CAAG,EAE9B8G,EAAYnB,EAAQ,EAAIkB,EACxBE,EAAa9C,EAAW,EAAI4C,EAE5BG,EAAON,EAASI,EAChBG,EAAQP,EAASI,EACjBI,EAAMP,EAASI,EACfI,EAASR,EAASI,EAClBK,EAAWH,EAAQD,EACnBK,EAAYH,EAAMC,EAElBd,EAAUzD,EAAS,QAAQ5C,CAAG,EAC9BsG,EAAY1D,EAAS,UAAU5C,CAAG,EAClCuG,EAAa3D,EAAS,WAAW5C,CAAG,EACpCwG,GAAW5D,EAAS,SAAS5C,CAAG,EAEtCiG,EAAK,QAAQI,CAAO,EAAIzD,EAAS,QAAQ5C,CAAG,EAC5CiG,EAAK,QAAQK,CAAS,EAAI1D,EAAS,UAAU5C,CAAG,EAChDiG,EAAK,QAAQM,CAAU,EAAI3D,EAAS,WAAW5C,CAAG,EAClDiG,EAAK,QAAQO,EAAQ,EAAI5D,EAAS,SAAS5C,CAAG,EAE9C,MAAMsH,EAAU,KAAK,IAAI,EAAG,KAAK,IAAI,EAAG3E,GAAe,QAAQmB,CAAS,CAAC,CAAC,EAE1EM,EAAU,KAAKiC,CAAO,EAAIW,EAC1B5C,EAAU,KAAKiC,CAAO,EAAIa,EAC1B9C,EAAU,KAAKiC,CAAO,EAAIO,EAC1BX,EAAK,QAAQI,CAAO,EAAIe,EAAWE,EAEnClD,EAAU,KAAKkC,CAAS,EAAIW,EAC5B7C,EAAU,KAAKkC,CAAS,EAAIY,EAC5B9C,EAAU,KAAKkC,CAAS,EAAIM,EAC5BX,EAAK,QAAQK,CAAS,EAAI,CAACe,EAAYC,EAEvClD,EAAU,KAAKmC,CAAU,EAAIS,EAC7B5C,EAAU,KAAKmC,CAAU,EAAIY,EAC7B/C,EAAU,KAAKmC,CAAU,EAAIK,EAC7BX,EAAK,QAAQM,CAAU,EAAIa,EAAWE,EAEtClD,EAAU,KAAKoC,EAAQ,EAAIQ,EAC3B5C,EAAU,KAAKoC,EAAQ,EAAIW,EAC3B/C,EAAU,KAAKoC,EAAQ,EAAII,EAC3BX,EAAK,QAAQO,EAAQ,EAAIa,EAAYC,CACvC,CACF,CACF,ECpDaC,GAAiC,CAC5C,KAAM,eACN,WAAY,CAAC,eAAgB,WAAW,CAC1C,EAEaC,GAAkC,CAC7C,WAAY,CAAE,YAAAjF,EAAa,MAAAG,EAAO,eAAAC,GAAgB,SAAAC,CAAA,EAClD,QAAS,CACPiB,GACAW,GACAG,GACAwB,GACAM,EAAA,EAEF,QAAS,CAACc,EAAiB,EAC3B,OAAQ,CACN,SAAU,CACR,eAAgB,CACd,YAAa,EACb,QAAS,GACT,IAAK,IACL,MAAO,EACP,WAAY,EACZ,SAAU,IACV,MAAO,SACP,YAAa,EACb,cAAe,EACf,WAAY,EACZ,YAAa,CAAA,EAEf,mBAAoB,CAClB,MAAO,SACP,QAAS,GACT,cAAe,EACf,QAAS,CAAA,EAEX,YAAa,CACX,QAAS,EACT,UAAW,EACX,WAAY,EACZ,SAAU,EACV,MAAO,EACP,QAAS,GACT,YAAa,EACb,QAAS,EACT,UAAW,EACX,WAAY,EACZ,SAAU,CAAA,CACZ,CACF,CAEJ,ECrCO,SAASE,GACdxI,EACA6E,EACAnO,EACM,CACNsJ,EAAM,aAAa6E,EAAWnB,GAAgB,CAC5C,MAAOhN,GAAS,OAAS,SACzB,QAASA,GAAS,QAClB,cAAeA,GAAS,cAAgB,EAAI,EAC5C,QAASA,GAAS,OAAW,CAC9B,CACH,CC9BO,MAAM+R,GAAmBlF,EAAqB,CACnD,MAAOC,EAAW,KAClB,YAAaA,EAAW,IACxB,UAAWA,EAAW,IACtB,UAAWA,EAAW,IACtB,YAAaA,EAAW,GAC1B,CAAC,EAEYkF,GAAmBnF,EAAqB,CACnD,MAAOC,EAAW,GACpB,CAAC,EAEYmF,GAAapF,EAAqB,CAC7C,OAAQC,EAAW,IACnB,WAAYA,EAAW,IACvB,MAAOA,EAAW,IAClB,YAAaA,EAAW,GAC1B,CAAC,EAEYoF,GAAkB/E,EAAiB,CAAC8E,EAAU,CAAC,EAEtDE,GAAuBhF,EAAiB,CAAC8E,GAAYlF,EAAO0B,CAAS,CAAC,EAEtE2D,GAAqC,CACzC,MAAO,aACP,OAAO9I,EAAO,CACZ,UAAWkF,KAAYpB,GAAW9D,EAAM,KAAK,EAAG,CAE9C,GADIA,EAAM,aAAakF,EAAUyD,EAAU,GACvClF,EAAM,UAAUyB,CAAQ,EAAG,SAE/B,MAAML,EAAYpB,EAAM,OAAOyB,CAAQ,EAClClF,EAAM,aAAa6E,EAAW4D,EAAgB,GAC9CnF,EAAY,YAAYuB,CAAS,GAEtC7E,EAAM,aAAakF,EAAUyD,GAAY,CACvC,OAAQ9D,EACR,WAAY,EACZ,MAAO,EACP,YAAa,CAAA,CACd,CACH,CAEA,UAAW9D,KAAO8H,GAAqB7I,EAAM,KAAK,EAAG,CACnD,GAAI2I,GAAW,YAAY5H,CAAG,EAAG,SAEjC,MAAM8D,EAAY8D,GAAW,OAAO5H,CAAG,EACvC,GAAI,CAACuC,EAAY,YAAYuB,CAAS,EAAG,SAEzC,MAAM5E,EAASwI,GACTxD,EAAQhF,EAAO,MAAM4E,CAAS,EAC9BkE,EAAY9I,EAAO,UAAU4E,CAAS,EACtCmE,EAAY/I,EAAO,UAAU4E,CAAS,EAEtCoE,EAAajJ,EAAM,aAAA,EACzBA,EAAM,aAAaiJ,EAAY9D,EAAW,CAAE,KAAM,EAAG,KAAM,EAAG,KAAM,CAAA,CAAG,EACvEnF,EAAM,aAAaiJ,EAAYC,EAAgB,CAAA,CAAE,EACjDlJ,EAAM,aAAaiJ,EAAYjC,EAAM,CACnC,QAAS,EACT,QAAS,EACT,QAAS,EACT,MAAA/B,EACA,UAAA+D,EACA,SAAU,EACV,UAAAD,EACA,QAAS,CAAA,CACV,EAEDJ,GAAW,WAAW5H,CAAG,EAAIkI,EAC7BN,GAAW,YAAY5H,CAAG,EAAI,CAChC,CACF,CACF,EAEaoI,GAAsC,CACjD,MAAO,aACP,OAAOnJ,EAAO,CACZ,UAAWe,KAAO8H,GAAqB7I,EAAM,KAAK,EAAG,CACnD,MAAM6E,EAAY8D,GAAW,OAAO5H,CAAG,EACnCf,EAAM,aAAa6E,EAAW6D,EAAgB,IAChDC,GAAW,MAAM5H,CAAG,EAAI2H,GAAiB,MAAM7D,CAAS,EAE5D,CACF,CACF,EAEMuE,GAAsC,CAC1C,MAAO,OACP,OAAOpJ,EAAO,CACZ,UAAWe,KAAO8H,GAAqB7I,EAAM,KAAK,EAAG,CACnD,GAAI,CAAC2I,GAAW,YAAY5H,CAAG,EAAG,SAElC,MAAM8D,EAAY8D,GAAW,OAAO5H,CAAG,EACjCkI,EAAaN,GAAW,WAAW5H,CAAG,EACtCsI,EAAQV,GAAW,MAAM5H,CAAG,EAC5BiE,EAAW1B,EAAY,SAASuB,CAAS,EACzCyE,EAAcb,GAAiB,YAAY5D,CAAS,EAEpD0E,EAAcd,GAAiB,YAAY5D,CAAS,EACpDkE,EAAYN,GAAiB,UAAU5D,CAAS,EAChD4C,EAAStC,EAAU,KAAKpE,CAAG,EAC3B2G,EAASvC,EAAU,KAAKpE,CAAG,EAC3B4G,EAASxC,EAAU,KAAKpE,CAAG,EAEjCoE,EAAU,KAAK8D,CAAU,EAAIxB,EAC7BtC,EAAU,KAAK8D,CAAU,EAAIvB,EAAS1C,EAAW,EAAIuE,EACrDpE,EAAU,KAAK8D,CAAU,EAAItB,EAE7BX,EAAK,QAAQiC,CAAU,EAAIK,EAAcD,EACzCrC,EAAK,UAAUiC,CAAU,EAAIF,EAAYM,EACzCrC,EAAK,QAAQiC,CAAU,EAAII,EAAQ,IAAO,EAAI,CAChD,CACF,CACF,EAEaG,GAAgC,CAC3C,WAAY,CAAE,iBAAAf,GAAkB,iBAAAC,GAAkB,WAAAC,EAAA,EAClD,QAAS,CAACG,GAAuBK,GAAwBC,EAAsB,EAC/E,OAAQ,CACN,SAAU,CACR,qBAAsB,CACpB,MAAO,SACP,YAAa,GACb,UAAW,IACX,UAAW,IACX,YAAa,GAAA,EAEf,qBAAsB,CACpB,MAAO,CAAA,EAET,cAAe,CACb,OAAQ,EACR,WAAY,EACZ,MAAO,EACP,YAAa,CAAA,CACf,CACF,CAEJ,EAUO,SAASK,GACdzJ,EACA6E,EACAnO,EACM,CACNsJ,EAAM,aAAa6E,EAAW4D,GAAkB,CAC9C,MAAO/R,GAAS,OAAS,SACzB,YAAaA,GAAS,YACtB,UAAWA,GAAS,WAAa,IACjC,UAAWA,GAAS,WAAa,IACjC,YAAaA,GAAS,WAAe,CACtC,EACDsJ,EAAM,aAAa6E,EAAW6D,GAAkB,CAAE,MAAO,EAAG,CAC9D,CCjKO,MAAMgB,EAAYnG,EAAqB,CAC5C,WAAYC,EAAW,IACvB,UAAWA,EAAW,KACtB,cAAeA,EAAW,IAC1B,oBAAqBA,EAAW,IAChC,QAASA,EAAW,IACpB,QAASA,EAAW,IACpB,QAASA,EAAW,IACpB,YAAaA,EAAW,KACxB,gBAAiBA,EAAW,IAC5B,gBAAiBA,EAAW,IAC5B,YAAaA,EAAW,IACxB,eAAgBA,EAAW,IAC3B,eAAgBA,EAAW,IAC3B,eAAgBA,EAAW,IAC3B,eAAgBA,EAAW,IAC3B,eAAgBA,EAAW,IAC3B,eAAgBA,EAAW,IAC3B,aAAcA,EAAW,IACzB,YAAaA,EAAW,GAC1B,CAAC,EAEYmG,GAAiB9F,EAAiB,CAAC6F,EAAWvE,CAAS,CAAC,EAErE,SAAS4B,GACP/G,EACA4J,EACA3E,EACA+D,EACAa,EACAC,EACAf,EACQ,CACR,MAAMhI,EAAMf,EAAM,aAAA,EAClB,OAAAA,EAAM,aAAae,EAAKoE,EAAW,CAAE,KAAM,EAAG,KAAM,EAAG,KAAM,CAAA,CAAG,EAChEnF,EAAM,aAAae,EAAKmI,EAAgB,CAAA,CAAE,EAC1ClJ,EAAM,aAAae,EAAKqE,GAAQ,CAAE,OAAQwE,EAAW,EACrD5J,EAAM,aAAae,EAAKiG,EAAM,CAC5B,QAAS,EACT,QAAS,EACT,QAAS,EACT,MAAA/B,EACA,UAAA+D,EACA,QAAAa,EACA,SAAAC,EACA,UAAAf,EACA,QAAS,CAAA,CACV,EACMhI,CACT,CAEA,MAAMgJ,GAAoC,CACxC,MAAO,aACP,OAAO/J,EAAO,CACZ,UAAWe,KAAO4I,GAAe3J,EAAM,KAAK,EAAG,CAC7C,GAAI0J,EAAU,YAAY3I,CAAG,EAAG,SAEhC,MAAMiJ,EAAYN,EAAU,UAAU3I,CAAG,EACnCkJ,EAAgBP,EAAU,cAAc3I,CAAG,EAC3CmJ,EAAaR,EAAU,oBAAoB3I,CAAG,EAC9CoJ,EAAcT,EAAU,YAAY3I,CAAG,EACvCqJ,EAAkBV,EAAU,gBAAgB3I,CAAG,EAC/CsJ,EAAkBX,EAAU,gBAAgB3I,CAAG,EAErD2I,EAAU,eAAe3I,CAAG,EAAIgG,GAC9B/G,EACAe,EACAiJ,EACAC,EACA,EACA,EACA,CAAA,EAEFP,EAAU,eAAe3I,CAAG,EAAIgG,GAC9B/G,EACAe,EACAiJ,EACAC,EACAC,EACA,EACA,CAAA,EAEFR,EAAU,eAAe3I,CAAG,EAAIgG,GAC9B/G,EACAe,EACAiJ,EACAC,EACA,EACA,EACA,CAAA,EAEFP,EAAU,eAAe3I,CAAG,EAAIgG,GAC9B/G,EACAe,EACAiJ,EACAC,EACAC,EACA,EACA,CAAA,EAEFR,EAAU,eAAe3I,CAAG,EAAIgG,GAC9B/G,EACAe,EACAiJ,EACAC,EACA,EACA,EACA,CAAA,EAEFP,EAAU,eAAe3I,CAAG,EAAIgG,GAC9B/G,EACAe,EACAiJ,EACAC,EACAC,EACA,EACA,CAAA,EAEFR,EAAU,aAAa3I,CAAG,EAAIgG,GAC5B/G,EACAe,EACAoJ,EACAC,EACA,EACA,EACAC,CAAA,EAGFX,EAAU,YAAY3I,CAAG,EAAI,CAC/B,CACF,CACF,EAEMuJ,GAAqC,CACzC,MAAO,aACP,OAAOtK,EAAO,CACZ,UAAWe,KAAO4I,GAAe3J,EAAM,KAAK,EAAG,CAC7C,GAAI,CAAC0J,EAAU,YAAY3I,CAAG,EAAG,SAEjC,MAAMwJ,EAAab,EAAU,WAAW3I,CAAG,EACrCyJ,EAAUd,EAAU,QAAQ3I,CAAG,EAC/B0J,EAAUf,EAAU,QAAQ3I,CAAG,EAC/B2J,EAAUhB,EAAU,QAAQ3I,CAAG,EAC/BsI,EAAQK,EAAU,YAAY3I,CAAG,EAEjC4J,EAAWjB,EAAU,eAAe3I,CAAG,EACvC6J,EAAWlB,EAAU,eAAe3I,CAAG,EACvC8J,EAAWnB,EAAU,eAAe3I,CAAG,EACvC+J,EAAWpB,EAAU,eAAe3I,CAAG,EACvCgK,EAAWrB,EAAU,eAAe3I,CAAG,EACvCiK,EAAWtB,EAAU,eAAe3I,CAAG,EACvCkK,EAASvB,EAAU,aAAa3I,CAAG,EAEzCiG,EAAK,QAAQ2D,CAAQ,EAAIJ,EACzBvD,EAAK,QAAQ4D,CAAQ,EAAI,CAACL,EAC1BvD,EAAK,QAAQ6D,CAAQ,EAAIN,EACzBvD,EAAK,QAAQ8D,CAAQ,EAAI,CAACP,EAC1BvD,EAAK,QAAQ+D,CAAQ,EAAIR,EACzBvD,EAAK,QAAQgE,CAAQ,EAAI,CAACT,EAE1BvD,EAAK,QAAQiE,CAAM,EAAIT,EAAUnB,EACjCrC,EAAK,QAAQiE,CAAM,EAAIR,EAAUpB,EACjCrC,EAAK,QAAQiE,CAAM,EAAIP,EAAUrB,EACjCrC,EAAK,QAAQiE,CAAM,EAAI5B,EAAQ,EAAI,EAAI,CACzC,CACF,CACF,EAEa6B,GAA+B,CAC1C,WAAY,CAAE,UAAAxB,CAAA,EACd,QAAS,CAACK,GAAsBO,EAAqB,EACrD,OAAQ,CACN,SAAU,CACR,aAAc,CACZ,WAAY,EACZ,UAAW,QACX,cAAe,EACf,oBAAqB,GACrB,QAAS,GACT,QAAS,IACT,QAAS,GACT,YAAa,SACb,gBAAiB,EACjB,gBAAiB,GACjB,YAAa,EACb,eAAgB,EAChB,eAAgB,EAChB,eAAgB,EAChB,eAAgB,EAChB,eAAgB,EAChB,eAAgB,EAChB,aAAc,EACd,YAAa,CAAA,CACf,CACF,CAEJ,ECnMaa,GAAgB5H,EAAqB,CAChD,aAAcC,EAAW,IACzB,YAAaA,EAAW,IACxB,UAAWA,EAAW,IACtB,SAAUA,EAAW,IACrB,YAAaA,EAAW,IACxB,YAAaA,EAAW,GAC1B,CAAC,EAEY4H,GAAqB7H,EAAqB,CACrD,QAASC,EAAW,IACpB,MAAOA,EAAW,IAClB,UAAWA,EAAW,IACtB,SAAUA,EAAW,GACvB,CAAC,EAEY6H,GAAoB9H,EAAqB,CACpD,MAAOC,EAAW,IAClB,MAAOA,EAAW,IAClB,QAASA,EAAW,IACpB,QAASA,EAAW,IACpB,QAASA,EAAW,GACtB,CAAC,EAEY8H,GAA0B/H,EAAqB,CAC1D,QAASC,EAAW,IACpB,WAAYA,EAAW,IACvB,UAAWA,EAAW,IACtB,QAASA,EAAW,GACtB,CAAC,EAEK+H,GAAc,CAAC,EAAG,EAAG,EAAG,CAAC,EAEzBC,GAAqB3H,EAAiB,CAACsH,GAAehG,CAAS,CAAC,EAEhEsG,GAAwC,CAC5C,MAAO,QACP,OAAOzL,EAAO,CACZ,UAAWe,KAAOyK,GAAmBxL,EAAM,KAAK,EAAG,CACjD,GAAImL,GAAc,YAAYpK,CAAG,EAAG,SACpCoK,GAAc,YAAYpK,CAAG,EAAI,EAEjC,MAAM2K,EAAeP,GAAc,aAAapK,CAAG,GAAK,EAClD4K,EAAcR,GAAc,YAAYpK,CAAG,GAAK,EAChD6K,EAAYT,GAAc,UAAUpK,CAAG,GAAK,EAC5C8K,EAAWV,GAAc,SAASpK,CAAG,GAAK,GAE1C+K,EAAYP,GAAY,OAExBQ,EAAS,GADKD,EAAY,GAAKJ,GACR,EAGvBM,EAA2B,CAAA,EAEjC,QAASC,EAAW,EAAGA,EAAWH,EAAWG,IAAY,CACvD,MAAMC,EAAcX,GAAYU,CAAQ,EAElCE,EADWF,EAAW,GAAKA,EAAWH,EAAY,EAChCF,EAAY,EAC9BQ,EAAaF,EAAcC,EAE3BE,EAASN,EAASE,EAAWP,EAE7BY,EAActM,EAAM,aAAA,EAC1BA,EAAM,aAAasM,EAAanH,EAAW,CAAE,KAAMkH,EAAQ,EAC3DrM,EAAM,aAAasM,EAAalB,GAAoB,CAClD,QAASrK,EACT,MAAOkL,EACP,UAAWG,EACX,SAAU,CAAA,CACX,EACDpM,EAAM,aAAasM,EAAalH,GAAQ,CAAE,OAAQrE,EAAK,EAGvD,MAAMwL,GAAeL,EAAc,GAAKP,EAClCa,GAAcL,EAAO,GAAKR,EAC1Bc,EAAS,CAACF,EAAc,EACxBG,GAAS,CAACF,EAAa,EAE7BR,EAAaC,CAAQ,EAAI,CAAA,EAEzB,QAASU,EAAM,EAAGA,EAAMR,EAAMQ,IAC5B,QAASC,GAAM,EAAGA,GAAMV,EAAaU,KAAO,CAC1C,MAAMC,GAAIJ,EAASG,GAAMjB,EACnBmB,GAAIJ,GAASC,EAAMhB,EAEnBoB,GAAa/M,EAAM,aAAA,EAEzBA,EAAM,aAAa+M,GAAY5H,EAAW,CACxC,KAAM,EACN,KAAM0H,GACN,KAAMC,GACN,OAAQ,EACR,OAAQ,EACR,OAAQ,CAAA,CACT,EAED,MAAME,GAAUf,IAAa,EACvBgB,GAAWhB,IAAaH,EAAY,EACpC7G,GAAQ+H,GAAU,QAAWC,GAAW,SAAW,QAEzDjN,EAAM,aAAa+M,GAAYG,GAAU,CACvC,MAAO,EACP,MAAOrB,EACP,MAAOA,EACP,MAAOA,EACP,MAAA5G,GACA,QAAS,CAAA,CACV,EAEDjF,EAAM,aAAa+M,GAAY1B,GAAmB,CAChD,MAAOiB,EACP,MAAOK,EAAMT,EAAcU,GAC3B,QAAS,EACT,QAASC,GACT,QAASC,EAAA,CACV,EAED9M,EAAM,aAAa+M,GAAY3H,GAAQ,CAAE,OAAQkH,EAAa,EAE9DN,EAAaC,CAAQ,EAAE,KAAKc,EAAU,CACxC,CAEJ,CAEA,QAASd,EAAW,EAAGA,EAAWH,EAAY,EAAGG,IAAY,CAC3D,MAAMkB,EAAYnB,EAAaC,CAAQ,EACjCmB,EAAUpB,EAAaC,EAAW,CAAC,EAEzC,UAAWoB,KAAYF,EACrB,UAAWG,KAAUF,EAAS,CAC5B,MAAMG,EAAmBvN,EAAM,aAAA,EAE/BA,EAAM,aAAauN,EAAkBpI,EAAW,CAAA,CAAE,EAElDnF,EAAM,aAAauN,EAAkBvG,EAAM,CACzC,QAAS,EACT,QAAS,EACT,QAAS,EACT,MAAO,QACP,UAAW,EACX,QAAS,EACT,QAAS,CAAA,CACV,EAEDhH,EAAM,aAAauN,EAAkBjC,GAAyB,CAC5D,QAASvK,EACT,WAAYkL,EACZ,UAAWoB,EACX,QAASC,CAAA,CACV,EAEDtN,EAAM,aAAauN,EAAkBnI,GAAQ,CAAE,OAAQiI,EAAU,CACnE,CAEJ,CACF,CACF,CACF,EAEMG,GAAY3J,EAAiB,CAACwH,GAAmBlG,CAAS,CAAC,EAE3DsI,GAAkC,CACtC,MAAO,aACP,OAAOzN,EAAO,CACZ,UAAWe,KAAOyM,GAAUxN,EAAM,KAAK,EAAG,CACxC,MAAM0N,EAAWrC,GAAkB,MAAMtK,CAAG,EACtC4M,EAAWvC,GAAmB,SAASsC,CAAQ,EAE/CE,EAAUvC,GAAkB,QAAQtK,CAAG,EACvC8M,EAAUxC,GAAkB,QAAQtK,CAAG,EAE7CoE,EAAU,KAAKpE,CAAG,EAAI6M,GAAW,EAAID,GACrCxI,EAAU,KAAKpE,CAAG,EAAI8M,GAAW,EAAIF,EACvC,CACF,CACF,EAEMG,GAAkBjK,EAAiB,CAACyH,GAAyBtE,CAAI,CAAC,EAElE+G,GAAyC,CAC7C,MAAO,aACP,MAAO,CAACN,EAAkB,EAC1B,OAAOzN,EAAO,CACZ,MAAMgO,EAAsBzC,GAAY,OAAS,EAEjD,UAAWxK,KAAO+M,GAAgB9N,EAAM,KAAK,EAAG,CAC9C,MAAMiO,EAAU3C,GAAwB,QAAQvK,CAAG,EAC7CkL,EAAWX,GAAwB,WAAWvK,CAAG,EACjDmN,EAAY5C,GAAwB,UAAUvK,CAAG,EACjDoN,EAAU7C,GAAwB,QAAQvK,CAAG,EAE7C6F,EAAIuE,GAAc,YAAY8C,CAAO,EACrCG,EAAanC,EAAW+B,EACxBK,GAAYpC,EAAW,GAAK+B,EAC5BM,EAAS,KAAK,IAAI,EAAG,KAAK,IAAI,GAAI1H,EAAIwH,IAAeC,EAAWD,EAAW,CAAC,EAE5ErC,EAAS7C,EAAe,KAAKgF,CAAS,EACtCzB,EAASvD,EAAe,KAAKgF,CAAS,EACtCxB,EAASxD,EAAe,KAAKgF,CAAS,EACtCK,EAAOrF,EAAe,KAAKiF,CAAO,EAClCK,EAAOtF,EAAe,KAAKiF,CAAO,EAClCM,EAAOvF,EAAe,KAAKiF,CAAO,EAElCO,EAAQxF,EAAe,OAAOgF,CAAS,EACzCQ,EAAQ,GACV1H,EAAK,QAAQjG,CAAG,GAAMwN,EAAOxC,GAAUuC,EAAUI,EACjD1H,EAAK,QAAQjG,CAAG,GAAMyN,EAAO/B,GAAU6B,EAAUI,EACjD1H,EAAK,QAAQjG,CAAG,GAAM0N,EAAO/B,GAAU4B,EAAUI,IAEjD1H,EAAK,QAAQjG,CAAG,EAAI,EACpBiG,EAAK,QAAQjG,CAAG,EAAI,EACpBiG,EAAK,QAAQjG,CAAG,EAAI,EAExB,CACF,CACF,EAEa4N,GAAmC,CAC9C,KAAM,iBACN,WAAY,CAAC,iBAAkB,WAAW,CAC5C,EAEaC,GAAmC,CAC9C,WAAY,CAAE,cAAAzD,GAAe,mBAAAC,GAAoB,kBAAAC,GAAmB,wBAAAC,EAAA,EACpE,QAAS,CAACG,GAA0BgC,GAAoBM,EAAyB,EACjF,QAAS,CAACY,EAAmB,EAC7B,OAAQ,CACN,SAAU,CACR,iBAAkB,CAChB,aAAc,EACd,YAAa,EACb,UAAW,EACX,SAAU,GACV,YAAa,EACb,YAAa,CAAA,EAEf,uBAAwB,CACtB,SAAU,CAAA,CACZ,CACF,CAEJ,EChPA,SAASE,GAAUC,EAAgBC,EAAgBnI,EAAmB,CACpE,MAAMoI,EAAMF,GAAU,GAAM,IACtBG,EAAMH,GAAU,EAAK,IACrBI,EAAKJ,EAAS,IACdK,EAAMJ,GAAU,GAAM,IACtBK,EAAML,GAAU,EAAK,IACrBM,EAAKN,EAAS,IACdtO,EAAI,KAAK,MAAMuO,GAAMG,EAAKH,GAAMpI,CAAC,EACjC0I,EAAI,KAAK,MAAML,GAAMG,EAAKH,GAAMrI,CAAC,EACjCxN,EAAI,KAAK,MAAM8V,GAAMG,EAAKH,GAAMtI,CAAC,EACvC,OAAQnG,GAAK,GAAO6O,GAAK,EAAKlW,CAChC,CAEO,MAAMmW,GAAoBhM,EAAqB,CACpD,MAAOC,EAAW,KAClB,aAAcA,EAAW,KACzB,aAAcA,EAAW,IACzB,YAAaA,EAAW,IACxB,YAAaA,EAAW,IACxB,iBAAkBA,EAAW,GAC/B,CAAC,EAEYgM,GAAoBjM,EAAqB,CACpD,MAAOC,EAAW,GACpB,CAAC,EAEYiM,EAAclM,EAAqB,CAC9C,OAAQC,EAAW,IACnB,UAAWA,EAAW,IACtB,MAAOA,EAAW,IAClB,OAAQA,EAAW,IACnB,QAASA,EAAW,IACpB,QAASA,EAAW,IACpB,QAASA,EAAW,IACpB,YAAaA,EAAW,IACxB,YAAaA,EAAW,GAC1B,CAAC,EAEYkM,GAAmB7L,EAAiB,CAAC4L,CAAW,CAAC,EAExDE,GAAwB9L,EAAiB,CAAC4L,EAAahM,EAAO0B,CAAS,CAAC,EAExEyK,GAAsC,CAC1C,MAAO,aACP,OAAO5P,EAAO,CACZ,UAAWkF,KAAYpB,GAAW9D,EAAM,KAAK,EAAG,CAE9C,GADIA,EAAM,aAAakF,EAAUuK,CAAW,GACxChM,EAAM,WAAWyB,CAAQ,EAAG,SAEhC,MAAML,EAAYpB,EAAM,OAAOyB,CAAQ,EAClClF,EAAM,aAAa6E,EAAW0K,EAAiB,GAC/CjM,EAAY,YAAYuB,CAAS,GAEtC7E,EAAM,aAAakF,EAAUuK,EAAa,CACxC,OAAQ5K,EACR,UAAW,EACX,MAAO,EACP,OAAQ,EACR,QAAS,EACT,QAAS,EACT,QAAS,EACT,YAAa,EACb,YAAa,CAAA,CACd,CACH,CAEA,UAAW9D,KAAO4O,GAAsB3P,EAAM,KAAK,EAAG,CACpD,GAAIyP,EAAY,YAAY1O,CAAG,EAAG,SAElC,MAAM8D,EAAY4K,EAAY,OAAO1O,CAAG,EACxC,GAAI,CAACuC,EAAY,YAAYuB,CAAS,EAAG,SAEzC,MAAM5E,EAASsP,GACTtK,EAAQhF,EAAO,MAAM4E,CAAS,EAC9BgL,EAAe5P,EAAO,aAAa4E,CAAS,EAC5CiL,EAAc7P,EAAO,YAAY4E,CAAS,EAE1CkL,EAAY/P,EAAM,aAAA,EACxBA,EAAM,aAAa+P,EAAW5K,EAAW,CACvC,KAAM,EACN,KAAM,EACN,KAAM,EACN,OAAQ,EACR,OAAQ,EACR,OAAQ,CAAA,CACT,EACDnF,EAAM,aAAa+P,EAAW7G,EAAgB,CAAA,CAAE,EAChDlJ,EAAM,aAAa+P,EAAW3K,GAAQ,CAAE,OAAQrE,EAAK,EACrDf,EAAM,aAAa+P,EAAW7C,GAAU,CACtC,MAAO,EACP,MAAO4C,EACP,MAAOD,EACP,MAAOC,EACP,MAAA7K,EACA,QAAS,CAAA,CACV,EAEDwK,EAAY,UAAU1O,CAAG,EAAIgP,EAE7BN,EAAY,QAAQ1O,CAAG,EACrBiP,GAAahQ,EAAO+P,EAAW,kBAAmB,CAChD,MAAO,EACP,UAAW,EACX,KAAM,UAAA,CACP,GAAK,EACRN,EAAY,QAAQ1O,CAAG,EACrBiP,GAAahQ,EAAO+P,EAAW,kBAAmB,CAChD,MAAO,EACP,UAAW,EACX,KAAM,UAAA,CACP,GAAK,EACRN,EAAY,QAAQ1O,CAAG,EACrBiP,GAAahQ,EAAO+P,EAAW,kBAAmB,CAChD,MAAO,EACP,UAAW,EACX,KAAM,UAAA,CACP,GAAK,EACRN,EAAY,YAAY1O,CAAG,EACzBiP,GAAahQ,EAAO+P,EAAW,QAAS,CACtC,MAAO,IACP,UAAW,EACX,KAAM,gBAAA,CACP,GAAK,EAERN,EAAY,YAAY1O,CAAG,EAAI,CACjC,CACF,CACF,EAEakP,GAAuC,CAClD,MAAO,aACP,OAAOjQ,EAAO,CACZ,UAAWe,KAAO4O,GAAsB3P,EAAM,KAAK,EAAG,CACpD,MAAM6E,EAAY4K,EAAY,OAAO1O,CAAG,EACpCf,EAAM,aAAa6E,EAAW2K,EAAiB,IACjDC,EAAY,MAAM1O,CAAG,EAAIyO,GAAkB,MAAM3K,CAAS,EAE9D,CACF,CACF,EAEMqL,GAAuC,CAC3C,MAAO,OACP,OAAOlQ,EAAO,CACZ,UAAWe,KAAO4O,GAAsB3P,EAAM,KAAK,EAAG,CACpD,GAAI,CAACyP,EAAY,YAAY1O,CAAG,EAAG,SAEnC,MAAM8D,EAAY4K,EAAY,OAAO1O,CAAG,EAClCgP,EAAYN,EAAY,UAAU1O,CAAG,EACrCsI,EAAQoG,EAAY,MAAM1O,CAAG,EAC7BoP,EAASV,EAAY,OAAO1O,CAAG,EAC/BiE,EAAW1B,EAAY,SAASuB,CAAS,EACzCgL,EAAeN,GAAkB,aAAa1K,CAAS,EACvDyE,EAAciG,GAAkB,YAAY1K,CAAS,EACrDuL,EAAmBb,GAAkB,iBAAiB1K,CAAS,EAG/DwL,EACJrL,EAAW,EAAIoL,EAAmB9G,EAFd,GAE6CuG,EAAe,EAAKxG,EAOvF,GANAlE,EAAU,KAAK4K,CAAS,EAAIM,EAE5BlL,EAAU,OAAO4K,CAAS,EAAI1G,EAC9BlE,EAAU,OAAO4K,CAAS,EAAI1G,EAC9BlE,EAAU,OAAO4K,CAAS,EAAI1G,EAE1B8G,EAAS,EAAG,CACd,MAAMG,EAAYf,GAAkB,MAAM1K,CAAS,EAC7C0L,EAAehB,GAAkB,aAAa1K,CAAS,EAC7DqI,GAAS,MAAM6C,CAAS,EAAIlB,GAAUyB,EAAWC,EAAcJ,CAAM,CACvE,MACEjD,GAAS,MAAM6C,CAAS,EAAIR,GAAkB,MAAM1K,CAAS,CAEjE,CACF,CACF,EAEa2L,GAAiC,CAC5C,WAAY,CAAE,kBAAAjB,GAAmB,kBAAAC,GAAmB,YAAAC,CAAA,EACpD,QAAS,CAACG,GAAwBK,GAAyBC,EAAuB,EAClF,OAAQ,CACN,SAAU,CACR,sBAAuB,CACrB,MAAO,SACP,aAAc,SACd,aAAc,EACd,YAAa,GACb,YAAa,GACb,iBAAkB,GAAA,EAEpB,sBAAuB,CACrB,MAAO,CAAA,EAET,eAAgB,CACd,OAAQ,EACR,UAAW,EACX,MAAO,EACP,OAAQ,EACR,QAAS,EACT,QAAS,EACT,QAAS,EACT,YAAa,EACb,YAAa,CAAA,CACf,CACF,CAEJ,EAWO,SAASO,GACdzQ,EACA6E,EACAnO,EACM,CACNsJ,EAAM,aAAa6E,EAAW0K,GAAmB,CAC/C,MAAO7Y,GAAS,OAAS,SACzB,aAAcA,GAAS,cAAgB,SACvC,aAAcA,GAAS,cAAgB,EACvC,YAAaA,GAAS,aAAe,GACrC,YAAaA,GAAS,YACtB,iBAAkBA,GAAS,gBAAoB,CAChD,EACDsJ,EAAM,aAAa6E,EAAW2K,GAAmB,CAAE,MAAO,EAAG,CAC/D,CCpOO,MAAMkB,GAAyBnN,EAAqB,CACzD,aAAcC,EAAW,IACzB,YAAaA,EAAW,IACxB,UAAWA,EAAW,IACtB,qBAAsBA,EAAW,IACjC,OAAQA,EAAW,KACnB,OAAQA,EAAW,KACnB,OAAQA,EAAW,KACnB,WAAYA,EAAW,KACvB,eAAgBA,EAAW,IAC3B,UAAWA,EAAW,IACtB,aAAcA,EAAW,GAC3B,CAAC,EAEYmN,GAAyBpN,EAAqB,CACzD,OAAQC,EAAW,IACnB,OAAQA,EAAW,IACnB,OAAQA,EAAW,IACnB,SAAUA,EAAW,IACrB,SAAUA,EAAW,IACrB,SAAUA,EAAW,GACvB,CAAC,EAEYoN,EAAmBrN,EAAqB,CACnD,OAAQC,EAAW,IACnB,QAASA,EAAW,IACpB,QAASA,EAAW,IACpB,QAASA,EAAW,IACpB,aAAcA,EAAW,IACzB,aAAcA,EAAW,IACzB,aAAcA,EAAW,IACzB,SAAUA,EAAW,IACrB,SAAUA,EAAW,IACrB,OAAQA,EAAW,IACnB,OAAQA,EAAW,IACnB,OAAQA,EAAW,IACnB,SAAUA,EAAW,IACrB,SAAUA,EAAW,IACrB,SAAUA,EAAW,IACrB,YAAaA,EAAW,GAC1B,CAAC,EAEYqN,GAAwBhN,EAAiB,CAAC+M,CAAgB,CAAC,EAElEE,GAA6BjN,EAAiB,CAClD+M,EACAnN,EACA0B,EACAsK,CACF,CAAC,EAED,SAASsB,GACP/Q,EACA4J,EACAlD,EACAsK,EACA/L,EACQ,CACR,MAAM8K,EAAY/P,EAAM,aAAA,EACxB,OAAAA,EAAM,aAAa+P,EAAW5K,EAAW,CACvC,KAAM,EACN,KAAM,EACN,KAAM,EACN,OAAQ,EACR,OAAQ,EACR,OAAQ,CAAA,CACT,EACDnF,EAAM,aAAa+P,EAAW7G,EAAgB,CAAA,CAAE,EAChDlJ,EAAM,aAAa+P,EAAW3K,GAAQ,CAAE,OAAQwE,EAAW,EAC3D5J,EAAM,aAAa+P,EAAW7C,GAAU,CACtC,MAAO,EACP,MAAOxG,EACP,MAAOsK,EACP,MAAOtK,EACP,MAAAzB,EACA,QAAS,CAAA,CACV,EACM8K,CACT,CAEA,SAASkB,GACPjR,EACA4J,EACA3E,EACA+D,EACAD,EACQ,CACR,MAAMmI,EAAclR,EAAM,aAAA,EAC1B,OAAAA,EAAM,aAAakR,EAAa/L,EAAW,CAAE,KAAM,EAAG,KAAM,EAAG,KAAM,CAAA,CAAG,EACxEnF,EAAM,aAAakR,EAAahI,EAAgB,CAAA,CAAE,EAClDlJ,EAAM,aAAakR,EAAa9L,GAAQ,CAAE,OAAQwE,EAAW,EAC7D5J,EAAM,aAAakR,EAAalK,EAAM,CACpC,QAAS,EACT,QAAS,EACT,QAAS,EACT,MAAA/B,EACA,UAAA+D,EACA,SAAU,EACV,UAAAD,EACA,QAAS,CAAA,CACV,EACMmI,CACT,CAEA,MAAMC,GAA2C,CAC/C,MAAO,aACP,OAAOnR,EAAO,CACZ,UAAWkF,KAAYwK,GAAiB1P,EAAM,KAAK,EAAG,CAEpD,GADIA,EAAM,aAAakF,EAAU0L,CAAgB,GAC7CnN,EAAM,WAAWyB,CAAQ,EAAG,SAEhC,MAAML,EAAYpB,EAAM,OAAOyB,CAAQ,EAClClF,EAAM,aAAa6E,EAAW6L,EAAsB,GACpDpN,EAAY,YAAYuB,CAAS,GAEtC7E,EAAM,aAAakF,EAAU0L,EAAkB,CAC7C,OAAQ/L,EACR,QAAS,EACT,QAAS,EACT,QAAS,EACT,aAAc,EACd,aAAc,EACd,aAAc,EACd,SAAU,EACV,SAAU,EACV,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,YAAa,CAAA,CACd,CACH,CAEA,UAAW9D,KAAO+P,GAA2B9Q,EAAM,KAAK,EAAG,CAEzD,GADI4Q,EAAiB,YAAY7P,CAAG,GAChC,CAAC0O,EAAY,YAAY1O,CAAG,EAAG,SAEnC,MAAM8D,EAAY+L,EAAiB,OAAO7P,CAAG,EAC7C,GAAI,CAACuC,EAAY,YAAYuB,CAAS,EAAG,SAEzC,MAAM5E,EAASyQ,GACTZ,EAAc7P,EAAO,YAAY4E,CAAS,EAC1CgL,EAAe5P,EAAO,aAAa4E,CAAS,EAC5CuM,EAASnR,EAAO,OAAO4E,CAAS,EAChCwM,EAASpR,EAAO,OAAO4E,CAAS,EAChCyM,EAASrR,EAAO,OAAO4E,CAAS,EAChC0M,EAAatR,EAAO,WAAW4E,CAAS,EACxC2M,EAAiBvR,EAAO,eAAe4E,CAAS,EAChDkE,EAAY9I,EAAO,UAAU4E,CAAS,EAEtC4M,EAAUV,GAAgB/Q,EAAOe,EAAK+O,EAAaD,EAAcuB,CAAM,EACvEM,EAAUX,GAAgB/Q,EAAOe,EAAK+O,EAAaD,EAAcwB,CAAM,EACvEM,EAAUZ,GAAgB/Q,EAAOe,EAAK+O,EAAaD,EAAcyB,CAAM,EAEvEM,EAAeX,GAAkBjR,EAAOe,EAAKwQ,EAAYC,EAAgBzI,CAAS,EAClF8I,EAAeZ,GAAkBjR,EAAOe,EAAKwQ,EAAYC,EAAgBzI,CAAS,EAClF+I,EAAeb,GAAkBjR,EAAOe,EAAKwQ,EAAYC,EAAgBzI,CAAS,EAExF6H,EAAiB,QAAQ7P,CAAG,EAAI0Q,EAChCb,EAAiB,QAAQ7P,CAAG,EAAI2Q,EAChCd,EAAiB,QAAQ7P,CAAG,EAAI4Q,EAChCf,EAAiB,aAAa7P,CAAG,EAAI6Q,EACrChB,EAAiB,aAAa7P,CAAG,EAAI8Q,EACrCjB,EAAiB,aAAa7P,CAAG,EAAI+Q,EAErClB,EAAiB,SAAS7P,CAAG,EAC3BiP,GAAahQ,EAAO2R,EAAS,kBAAmB,CAC9C,MAAO,EACP,UAAW,EACX,KAAM,UAAA,CACP,GAAK,EACRf,EAAiB,SAAS7P,CAAG,EAC3BiP,GAAahQ,EAAO2R,EAAS,kBAAmB,CAC9C,MAAO,EACP,UAAW,EACX,KAAM,UAAA,CACP,GAAK,EAERf,EAAiB,YAAY7P,CAAG,EAAI,CACtC,CACF,CACF,EAEagR,GAA4C,CACvD,MAAO,aACP,OAAO/R,EAAO,CACZ,UAAWe,KAAO+P,GAA2B9Q,EAAM,KAAK,EAAG,CACzD,MAAM6E,EAAY+L,EAAiB,OAAO7P,CAAG,EACzCf,EAAM,aAAa6E,EAAW8L,EAAsB,IACtDC,EAAiB,OAAO7P,CAAG,EAAI4P,GAAuB,OAAO9L,CAAS,EACtE+L,EAAiB,OAAO7P,CAAG,EAAI4P,GAAuB,OAAO9L,CAAS,EACtE+L,EAAiB,OAAO7P,CAAG,EAAI4P,GAAuB,OAAO9L,CAAS,EACtE+L,EAAiB,SAAS7P,CAAG,EAAI4P,GAAuB,SAAS9L,CAAS,EAC1E+L,EAAiB,SAAS7P,CAAG,EAAI4P,GAAuB,SAAS9L,CAAS,EAC1E+L,EAAiB,SAAS7P,CAAG,EAAI4P,GAAuB,SAAS9L,CAAS,EAE9E,CACF,CACF,EAEMmN,GAA4C,CAChD,MAAO,OACP,OAAOhS,EAAO,CACZ,UAAWe,KAAO+P,GAA2B9Q,EAAM,KAAK,EAAG,CACzD,GAAI,CAAC4Q,EAAiB,YAAY7P,CAAG,EAAG,SAExC,MAAM8D,EAAY+L,EAAiB,OAAO7P,CAAG,EACvCd,EAASyQ,GACTZ,EAAc7P,EAAO,YAAY4E,CAAS,EAC1CgL,EAAe5P,EAAO,aAAa4E,CAAS,EAC5CoN,EAAYhS,EAAO,UAAU4E,CAAS,EACtCqN,EAAcjS,EAAO,qBAAqB4E,CAAS,EACnDkE,EAAY9I,EAAO,UAAU4E,CAAS,EACtCsN,EAAelS,EAAO,aAAa4E,CAAS,EAE5CuN,EAAkB3C,EAAY,UAAU1O,CAAG,EAC3CsR,EAAkB9C,GAAkB,aAAa1K,CAAS,EAC1DyN,EAAanN,EAAU,KAAKiN,CAAe,EAC3CG,EAAiB9C,EAAY,MAAM1O,CAAG,EACtCyR,EAAgBF,EAAcD,EAAkB,EAAKE,EAErDd,EAAUb,EAAiB,QAAQ7P,CAAG,EACtC2Q,EAAUd,EAAiB,QAAQ7P,CAAG,EACtC4Q,EAAUf,EAAiB,QAAQ7P,CAAG,EACtC6Q,EAAehB,EAAiB,aAAa7P,CAAG,EAChD8Q,EAAejB,EAAiB,aAAa7P,CAAG,EAChD+Q,GAAelB,EAAiB,aAAa7P,CAAG,EAEhD0R,EAAS7B,EAAiB,OAAO7P,CAAG,EACpC2R,GAAS9B,EAAiB,OAAO7P,CAAG,EACpC4R,GAAS/B,EAAiB,OAAO7P,CAAG,EACpC6R,GAAWhC,EAAiB,SAAS7P,CAAG,EACxC8R,GAAWjC,EAAiB,SAAS7P,CAAG,EACxC+R,GAAWlC,EAAiB,SAAS7P,CAAG,EAExCgS,GAAUjD,EAAcmC,EAExBe,GAAcnD,EAAe,IAC7BoD,GAAKT,EAAgBN,EAAerC,EAAe,EAAK4C,EAASG,GAAWI,GAC5EE,GAAKV,EAAgBN,EAAerC,EAAe,EAAK6C,GAASG,GAAWG,GAC5EG,GAAKX,EAAgBN,EAAerC,EAAe,EAAK8C,GAASG,GAAWE,GAE5EI,GAAUX,GAAU,EAAIG,GAAW,IACzCzN,EAAU,KAAKsM,CAAO,EAAI,CAACsB,GAC3B5N,EAAU,KAAKsM,CAAO,EAAIwB,GAC1B9N,EAAU,OAAOsM,CAAO,EAAIgB,EAC5BtN,EAAU,OAAOsM,CAAO,EAAI2B,GAC5BjO,EAAU,OAAOsM,CAAO,EAAIgB,EAE5B,MAAMY,GAAUX,IAAU,EAAIG,GAAW,IACzC1N,EAAU,KAAKuM,CAAO,EAAI,EAC1BvM,EAAU,KAAKuM,CAAO,EAAIwB,GAC1B/N,EAAU,OAAOuM,CAAO,EAAIgB,GAC5BvN,EAAU,OAAOuM,CAAO,EAAI2B,GAC5BlO,EAAU,OAAOuM,CAAO,EAAIgB,GAE5B,MAAMY,GAAUX,IAAU,EAAIG,GAAW,IACzC3N,EAAU,KAAKwM,CAAO,EAAIoB,GAC1B5N,EAAU,KAAKwM,CAAO,EAAIwB,GAC1BhO,EAAU,OAAOwM,CAAO,EAAIgB,GAC5BxN,EAAU,OAAOwM,CAAO,EAAI2B,GAC5BnO,EAAU,OAAOwM,CAAO,EAAIgB,GAE5B,MAAMY,GAAcf,EAAgBL,EAC9BqB,EAActB,EAAcC,EAAe,EAEjDhN,EAAU,KAAKyM,CAAY,EAAI,EAC/BzM,EAAU,KAAKyM,CAAY,EAAI2B,GAC/BvM,EAAK,QAAQ4K,CAAY,EAAI,CAACmB,GAAUN,EACxCzL,EAAK,QAAQ4K,CAAY,EAAI4B,EAAcf,EAC3CzL,EAAK,UAAU4K,CAAY,EAAI7I,EAAY0J,EAC3CzL,EAAK,QAAQ4K,CAAY,EAAIa,EAAS,IAAO,EAAI,EAEjDtN,EAAU,KAAK0M,CAAY,EAAI,EAC/B1M,EAAU,KAAK0M,CAAY,EAAI0B,GAC/BvM,EAAK,QAAQ6K,CAAY,EAAI,EAC7B7K,EAAK,QAAQ6K,CAAY,EAAI2B,EAAcd,GAC3C1L,EAAK,UAAU6K,CAAY,EAAI9I,EAAY2J,GAC3C1L,EAAK,QAAQ6K,CAAY,EAAIa,GAAS,IAAO,EAAI,EAEjDvN,EAAU,KAAK2M,EAAY,EAAI,EAC/B3M,EAAU,KAAK2M,EAAY,EAAIyB,GAC/BvM,EAAK,QAAQ8K,EAAY,EAAIiB,GAAUJ,GACvC3L,EAAK,QAAQ8K,EAAY,EAAI0B,EAAcb,GAC3C3L,EAAK,UAAU8K,EAAY,EAAI/I,EAAY4J,GAC3C3L,EAAK,QAAQ8K,EAAY,EAAIa,GAAS,IAAO,EAAI,CACnD,CACF,CACF,EAEac,GAAsC,CACjD,WAAY,CAAE,uBAAA/C,GAAwB,uBAAAC,GAAwB,iBAAAC,CAAA,EAC9D,QAAS,CACPO,GACAY,GACAC,EAAA,EAEF,OAAQ,CACN,SAAU,CACR,2BAA4B,CAC1B,aAAc,GACd,YAAa,GACb,UAAW,IACX,qBAAsB,GACtB,OAAQ,QACR,OAAQ,QACR,OAAQ,SACR,WAAY,QACZ,eAAgB,IAChB,UAAW,GACX,aAAc,GAAA,EAEhB,2BAA4B,CAC1B,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,SAAU,EACV,SAAU,EACV,SAAU,CAAA,EAEZ,oBAAqB,CACnB,OAAQ,EACR,QAAS,EACT,QAAS,EACT,QAAS,EACT,aAAc,EACd,aAAc,EACd,aAAc,EACd,SAAU,EACV,SAAU,EACV,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,SAAU,EACV,SAAU,EACV,SAAU,EACV,YAAa,CAAA,CACf,CACF,CAEJ,EAgBO,SAAS0B,GACd1T,EACA6E,EACAnO,EACM,CACNsJ,EAAM,aAAa6E,EAAW6L,GAAwB,CACpD,aAAcha,GAAS,aACvB,YAAaA,GAAS,YACtB,UAAWA,GAAS,UACpB,qBAAsBA,GAAS,sBAAwB,GACvD,OAAQA,GAAS,QAAU,QAC3B,OAAQA,GAAS,QAAU,QAC3B,OAAQA,GAAS,QAAU,SAC3B,WAAYA,GAAS,YAAc,QACnC,eAAgBA,GAAS,gBAAkB,IAC3C,UAAWA,GAAS,WAAa,GACjC,aAAcA,GAAS,cAAgB,GAAA,CACxC,EACDsJ,EAAM,aAAa6E,EAAW8L,GAAwB,CACpD,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,SAAU,EACV,SAAU,EACV,SAAU,CAAA,CACX,CACH,CC/XA,MAAMgD,GAAa,EAEnB,SAAS9E,GAAUC,EAAgBC,EAAgBnI,EAAmB,CACpE,MAAMoI,EAAMF,GAAU,GAAM,IACtBG,EAAMH,GAAU,EAAK,IACrBI,EAAKJ,EAAS,IACdK,EAAMJ,GAAU,GAAM,IACtBK,EAAML,GAAU,EAAK,IACrBM,EAAKN,EAAS,IACdtO,EAAI,KAAK,MAAMuO,GAAMG,EAAKH,GAAMpI,CAAC,EACjC0I,EAAI,KAAK,MAAML,GAAMG,EAAKH,GAAMrI,CAAC,EACjCxN,EAAI,KAAK,MAAM8V,GAAMG,EAAKH,GAAMtI,CAAC,EACvC,OAAQnG,GAAK,GAAO6O,GAAK,EAAKlW,CAChC,CAEO,MAAMwa,GAAuBrQ,EAAqB,CACvD,SAAUC,EAAW,IACrB,MAAOA,EAAW,KAClB,SAAUA,EAAW,KACrB,UAAWA,EAAW,KACtB,aAAcA,EAAW,IACzB,OAAQ,CAACA,EAAW,IAAKmQ,EAAU,EACnC,UAAWnQ,EAAW,GACxB,CAAC,EAEYqQ,EAAiBtQ,EAAqB,CACjD,OAAQC,EAAW,IACnB,WAAYA,EAAW,IACvB,SAAUA,EAAW,IACrB,aAAcA,EAAW,IACzB,MAAOA,EAAW,IAClB,OAAQA,EAAW,IACnB,YAAaA,EAAW,IACxB,YAAaA,EAAW,GAC1B,CAAC,EAEYsQ,GAAsBjQ,EAAiB,CAACgQ,CAAc,CAAC,EAE9DE,GAA2BlQ,EAAiB,CAChDgQ,EACApQ,EACA0B,EACAyL,CACF,CAAC,EAED,SAASoD,GACPhU,EACA4J,EACA3E,EACAD,EACQ,CACR,MAAMjE,EAAMf,EAAM,aAAA,EAClB,OAAAA,EAAM,aAAae,EAAKoE,EAAW,CACjC,KAAM,EACN,KAAM,EACN,KAAM,EACN,OAAQ,EACR,OAAQ,EACR,OAAQ,CAAA,CACT,EACDnF,EAAM,aAAae,EAAKmI,EAAgB,CAAA,CAAE,EAC1ClJ,EAAM,aAAae,EAAKqE,GAAQ,CAAE,OAAQwE,EAAW,EACrD5J,EAAM,aAAae,EAAKsE,GAAM,CAC5B,SAAAL,EACA,MAAAC,EACA,MAAO,CAAA,CACR,EACDK,GAAetF,EAAOe,EAAK,GAAG,EACvBA,CACT,CAEA,MAAMkT,GAAyC,CAC7C,MAAO,aACP,OAAOjU,EAAO,CACZ,UAAWkF,KAAY2L,GAAsB7Q,EAAM,KAAK,EAAG,CAGzD,GAFIA,EAAM,aAAakF,EAAU2O,CAAc,GAC3C,CAAC7T,EAAM,aAAakF,EAAUzB,CAAK,GACnCA,EAAM,WAAWyB,CAAQ,EAAG,SAEhC,MAAML,EAAYpB,EAAM,OAAOyB,CAAQ,EAClClF,EAAM,aAAa6E,EAAW+O,EAAoB,GAClDtQ,EAAY,YAAYuB,CAAS,GAEtC7E,EAAM,aAAakF,EAAU2O,EAAgB,CAC3C,OAAQhP,EACR,WAAY,EACZ,SAAU,EACV,aAAc,EACd,MAAO,EACP,OAAQ,EACR,YAAa,EACb,YAAa,CAAA,CACd,CACH,CAEA,UAAW9D,KAAOgT,GAAyB/T,EAAM,KAAK,EAAG,CAEvD,GADI6T,EAAe,YAAY9S,CAAG,GAC9B,CAAC6P,EAAiB,YAAY7P,CAAG,EAAG,SAExC,MAAM8D,EAAYgP,EAAe,OAAO9S,CAAG,EACrCd,EAAS2T,GACT5O,EAAW/E,EAAO,SAAS4E,CAAS,EACpCI,EAAQhF,EAAO,MAAM4E,CAAS,EAE9BqP,EAAaF,GAAiBhU,EAAOe,EAAKkE,EAAOD,CAAQ,EAG/D,GAFA6O,EAAe,WAAW9S,CAAG,EAAImT,EAE7BjU,EAAO,UAAU4E,CAAS,EAAG,CAC/B,MAAM3Q,EAAQuP,EAAM,MAAM1C,CAAG,EAC7B,GAAI7M,EAAQyf,GAAY,CACtB,MAAMQ,EAAclU,EAAO,OAAO4E,CAAS,EACrCuP,EAAWD,EAAYjgB,CAAK,EAClC2f,EAAe,SAAS9S,CAAG,EAAIqT,EAE/B,IAAIvR,EAAQ,EACZ,QAAS5M,EAAI,EAAGA,EAAI0d,GAAY1d,IAC9B4M,GAASsR,EAAYle,CAAC,EAExB4d,EAAe,aAAa9S,CAAG,EAAI8B,EAAQ,EAAIuR,EAAWvR,EAAQ,CACpE,CACF,CAEAgR,EAAe,YAAY9S,CAAG,EAAI,CACpC,CACF,CACF,EAEMsT,GAA0C,CAC9C,MAAO,OACP,OAAOrU,EAAO,CACZ,UAAWe,KAAOgT,GAAyB/T,EAAM,KAAK,EAAG,CACvD,GAAI,CAAC6T,EAAe,YAAY9S,CAAG,EAAG,SAEtC,MAAM8D,EAAYgP,EAAe,OAAO9S,CAAG,EACrCuT,EAAeV,GAAqB,aAAa/O,CAAS,EAE1D6M,EAAUd,EAAiB,QAAQ7P,CAAG,EACtC2R,EAAS9B,EAAiB,OAAO7P,CAAG,EACpCwT,EAAUrL,EAAe,KAAKwI,CAAO,EACrC2B,EAAUlO,EAAU,OAAOuM,CAAO,EAElCwC,EAAaL,EAAe,WAAW9S,CAAG,EAC1CsI,EAAQwK,EAAe,MAAM9S,CAAG,EAChCoP,EAAS0D,EAAe,OAAO9S,CAAG,EAExCoE,EAAU,KAAK+O,CAAU,EAAI,EAC7B/O,EAAU,KAAK+O,CAAU,EAAIK,EAAUlB,EAAUiB,EACjDnP,EAAU,OAAO+O,CAAU,EAAI7K,EAAQqJ,EACvCvN,EAAU,OAAO+O,CAAU,EAAI7K,EAAQqJ,EACvCvN,EAAU,OAAO+O,CAAU,EAAI7K,EAAQqJ,EAEvC,MAAM8B,EAAcX,EAAe,YAAY9S,CAAG,EAC5CqT,EAAWP,EAAe,SAAS9S,CAAG,EACtC0T,EAAeZ,EAAe,aAAa9S,CAAG,EAE9C2T,EAAeF,EAAcC,EAAa,QAAQ,CAAC,EAAI,OAAO,KAAK,MAAML,CAAQ,CAAC,EAGxF,GAFA9O,GAAetF,EAAOkU,EAAYQ,CAAY,EAE1CvE,EAAS,EAAG,CACd,MAAMwE,EAAWf,GAAqB,SAAS/O,CAAS,EAClD+P,EAAYhB,GAAqB,UAAU/O,CAAS,EACpDgQ,EAAahG,GAAU8F,EAAUC,EAAWH,CAAY,EACxDnE,EAAYsD,GAAqB,MAAM/O,CAAS,EACtDQ,GAAK,MAAM6O,CAAU,EAAIrF,GAAUyB,EAAWuE,EAAY1E,CAAM,CAClE,CACF,CACF,CACF,EAEa2E,GAAoC,CAC/C,WAAY,CAAE,qBAAAlB,GAAsB,eAAAC,CAAA,EACpC,QAAS,CAACI,GAA2BI,EAA0B,EAC/D,OAAQ,CACN,SAAU,CACR,yBAA0B,CACxB,SAAU,GACV,MAAO,SACP,SAAU,QACV,UAAW,SACX,aAAc,EAAA,EAEhB,kBAAmB,CACjB,OAAQ,EACR,WAAY,EACZ,SAAU,EACV,aAAc,EACd,MAAO,EACP,OAAQ,EACR,YAAa,EACb,YAAa,CAAA,CACf,CACF,CAEJ,EAEO,SAASU,GACd/U,EACA6E,EACAnO,EAOM,CACNsJ,EAAM,aAAa6E,EAAW+O,GAAsB,CAClD,SAAUld,GAAS,SACnB,MAAOA,GAAS,OAAS,SACzB,SAAUA,GAAS,UAAY,QAC/B,UAAWA,GAAS,WAAa,SACjC,aAAcA,GAAS,YAAgB,CACxC,CACH,CAEO,SAASse,GAAmBhV,EAAmB6E,EAAmBoQ,EAAwB,CAC/F,GAAI,CAACjV,EAAM,aAAa6E,EAAW+O,EAAoB,EAAG,OAE1D,MAAM/Q,EAAQoS,EAAO,OAAO,CAAC,EAAG7b,IAAM,EAAIA,EAAG,CAAC,EAExC+a,EAAcP,GAAqB,OAAO/O,CAAS,EACzD,QAAS5O,EAAI,EAAGA,EAAI,KAAK,IAAIgf,EAAO,OAAQtB,EAAU,EAAG1d,IACvDke,EAAYle,CAAC,EAAIgf,EAAOhf,CAAC,EAE3B2d,GAAqB,UAAU/O,CAAS,EAAI,EAE5C,UAAWK,KAAYpB,GAAW9D,EAAM,KAAK,EAAG,CAE9C,GADIyD,EAAM,OAAOyB,CAAQ,IAAML,GAC3B,CAAC7E,EAAM,aAAakF,EAAU2O,CAAc,EAAG,SAEnD,MAAM3f,EAAQuP,EAAM,MAAMyB,CAAQ,EAC9BhR,EAAQ+gB,EAAO,SACjBpB,EAAe,SAAS3O,CAAQ,EAAI+P,EAAO/gB,CAAK,EAChD2f,EAAe,aAAa3O,CAAQ,EAAIrC,EAAQ,EAAIoS,EAAO/gB,CAAK,EAAI2O,EAAQ,EAEhF,CACF,CC1OO,MAAMqS,GAAqB3R,EAAqB,CACrD,SAAUC,EAAW,IACrB,MAAOA,EAAW,KAClB,YAAaA,EAAW,IACxB,cAAeA,EAAW,IAC1B,KAAMA,EAAW,IACjB,MAAOA,EAAW,IAClB,YAAaA,EAAW,IACxB,eAAgBA,EAAW,IAC3B,YAAaA,EAAW,GAC1B,CAAC,EAEY2R,GAAe5R,EAAqB,CAC/C,OAAQC,EAAW,IACnB,WAAYA,EAAW,IACvB,WAAYA,EAAW,IACvB,WAAYA,EAAW,IACvB,OAAQA,EAAW,IACnB,SAAUA,EAAW,IACrB,UAAWA,EAAW,IACtB,YAAaA,EAAW,GAC1B,CAAC,EAEY4R,GAAoBvR,EAAiB,CAACsR,EAAY,CAAC,EAE1DE,GAA0BxR,EAAiB,CAACqR,GAAoB5R,CAAW,CAAC,EAElF,SAAS0Q,GACPhU,EACAiF,EACAD,EACAsQ,EACQ,CACR,MAAMvU,EAAMf,EAAM,aAAA,EAClB,OAAAA,EAAM,aAAae,EAAKoE,EAAW,CACjC,KAAM,EACN,KAAM,EACN,KAAM,EACN,OAAQ,EACR,OAAQ,EACR,OAAQ,CAAA,CACT,EACDnF,EAAM,aAAae,EAAKmI,EAAgB,CAAA,CAAE,EAC1ClJ,EAAM,aAAae,EAAKsE,GAAM,CAC5B,SAAAL,EACA,MAAAC,EACA,MAAO,CAAA,CACR,EACDK,GAAetF,EAAOe,EAAKuU,CAAO,EAC3BvU,CACT,CAEA,MAAMwU,GAAkB,CAAC,EAAG,EAAG,EAAG,CAAC,EAE7BC,GAAuC,CAC3C,MAAO,aACP,OAAOxV,EAAO,CACZ,UAAW6E,KAAawQ,GAAwBrV,EAAM,KAAK,EAAG,CAE5D,GADIkV,GAAmB,YAAYrQ,CAAS,GACxC,CAACvB,EAAY,YAAYuB,CAAS,EAAG,SAEzC,MAAMG,EAAWkQ,GAAmB,SAASrQ,CAAS,EAChDI,EAAQiQ,GAAmB,MAAMrQ,CAAS,EAEhD,QAAS5O,EAAI,EAAGA,EAAIsf,GAAgB,OAAS,EAAGtf,IAAK,CACnD,MAAMwf,EAAUzB,GAAiBhU,EAAOiF,EAAOD,EAAU,GAAG,EAC5DhF,EAAM,aAAayV,EAASN,GAAc,CACxC,OAAQtQ,EACR,WAAY4Q,EACZ,WAAYzF,GAAahQ,EAAOyV,EAAS,QAAS,CAChD,MAAO,EACP,UAAW,EACX,KAAM,gBAAA,CACP,EACD,WAAYxf,EACZ,OAAQ,EACR,SAAU,EACV,YAAa,CAAA,CACd,CACH,CAEA,MAAMyf,EAAY1B,GAAiBhU,EAAOiF,EAAOD,EAAU,KAAK,EAChEhF,EAAM,aAAa0V,EAAWP,GAAc,CAC1C,OAAQtQ,EACR,WAAY6Q,EACZ,WAAY1F,GAAahQ,EAAO0V,EAAW,QAAS,CAClD,MAAO,EACP,UAAW,EACX,KAAM,gBAAA,CACP,EACD,WAAYH,GAAgB,OAAS,EACrC,OAAQ,EACR,SAAU,EACV,UAAW,EACX,YAAa,CAAA,CACd,EAED,MAAMI,EAAa3B,GAAiBhU,EAAOiF,EAAOD,EAAU,GAAG,EAC/DhF,EAAM,aAAa2V,EAAYR,GAAc,CAC3C,OAAQtQ,EACR,WAAY8Q,EACZ,WAAY3F,GAAahQ,EAAO2V,EAAY,QAAS,CACnD,MAAO,EACP,UAAW,EACX,KAAM,gBAAA,CACP,EACD,WAAYJ,GAAgB,OAAS,EACrC,OAAQ,EACR,SAAU,EACV,UAAW,EACX,YAAa,CAAA,CACd,EAEDL,GAAmB,YAAYrQ,CAAS,EAAI,CAC9C,CACF,CACF,EAEM+Q,GAAiB,GACjBC,GAAkB,CAAC,EAAG,GAAK,GAAK,EAAG,EAEzC,SAASC,GAAMvpB,EAAewpB,EAAaC,EAAqB,CAC9D,OAAO,KAAK,IAAID,EAAK,KAAK,IAAIC,EAAKzpB,CAAK,CAAC,CAC3C,CAEA,SAAS0pB,GACPjW,EACA6E,EACAqR,EACe,CACf,UAAWhR,KAAYpB,GAAW9D,EAAM,KAAK,EAAG,CAG9C,GAFIyD,EAAM,OAAOyB,CAAQ,IAAML,GAC3BpB,EAAM,MAAMyB,CAAQ,IAAMgR,GAC1B,CAAClW,EAAM,aAAakF,EAAU2O,CAAc,EAAG,SAEnD,MAAMsC,EAAUtC,EAAe,WAAW3O,CAAQ,EAClD,OAAOgE,EAAe,KAAKiN,CAAO,CACpC,CACA,OAAO,IACT,CAEA,SAASC,GAAepW,EAAmB6E,EAAkC,CAC3E,UAAWK,KAAY4O,GAAoB9T,EAAM,KAAK,EAAG,CAEvD,GADI,CAACA,EAAM,aAAakF,EAAUzB,CAAK,GACnCA,EAAM,OAAOyB,CAAQ,IAAML,EAAW,SAE1C,MAAMsR,EAAUtC,EAAe,WAAW3O,CAAQ,EAClD,OAAOgE,EAAe,KAAKiN,CAAO,CACpC,CACA,OAAO,IACT,CAEA,SAASE,GAAiBrW,EAAmB6E,EAAmBqR,EAAmC,CACjG,UAAWhR,KAAY2L,GAAsB7Q,EAAM,KAAK,EAAG,CAGzD,GAFI,CAACA,EAAM,aAAakF,EAAUzB,CAAK,GACnCA,EAAM,OAAOyB,CAAQ,IAAML,GAC3BpB,EAAM,MAAMyB,CAAQ,IAAMgR,EAAY,SAE1C,MAAMvE,EAAUf,EAAiB,QAAQ1L,CAAQ,EACjD,OAAOgE,EAAe,KAAKyI,CAAO,CACpC,CACA,OAAO,IACT,CAEA,SAAS2E,GAAiBtW,EAAmB6E,EAAkC,CAC7E,UAAWK,KAAY2L,GAAsB7Q,EAAM,KAAK,EAAG,CAEzD,GADI,CAACA,EAAM,aAAakF,EAAUzB,CAAK,GACnCA,EAAM,OAAOyB,CAAQ,IAAML,EAAW,SAE1C,MAAM8M,EAAUf,EAAiB,QAAQ1L,CAAQ,EACjD,OAAOgE,EAAe,KAAKyI,CAAO,CACpC,CACA,OAAO,IACT,CAEA,MAAM4E,GAAwC,CAC5C,MAAO,OACP,OAAOvW,EAAO,CACZ,UAAWe,KAAOqU,GAAkBpV,EAAM,KAAK,EAAG,CAChD,GAAI,CAACmV,GAAa,YAAYpU,CAAG,EAAG,SAEpC,MAAM8D,EAAYsQ,GAAa,OAAOpU,CAAG,EACnCyV,EAAOtB,GAAmB,KAAKrQ,CAAS,EACxC4R,EAAQvB,GAAmB,MAAMrQ,CAAS,EAC1C6R,EAAgBxB,GAAmB,cAAcrQ,CAAS,EAC1D8R,EAAczB,GAAmB,YAAYrQ,CAAS,EACtD+R,EAAiB1B,GAAmB,eAAerQ,CAAS,EAE5DqR,EAAaf,GAAa,WAAWpU,CAAG,EACxC8V,EAAS1B,GAAa,OAAOpU,CAAG,EAChC+V,EAAW3B,GAAa,SAASpU,CAAG,EACpCgW,EAAY5B,GAAa,UAAUpU,CAAG,EACtCoV,EAAUhB,GAAa,WAAWpU,CAAG,EAE3C,GAAI0V,EAAQD,EAAM,CAChB,MAAMQ,EAAUV,GAAiBtW,EAAO6E,CAAS,EACjD,GAAImS,IAAY,KAAM,SAEtB,GAAIH,GAAUE,EAAW,CACvB,MAAME,EAAgBpB,GAAgBK,CAAU,GAAK,EAC/CgB,EAAWpB,IAAOW,EAAQQ,GAAiBrB,GAAgB,EAAG,CAAC,EAGrE,GAFAuB,EAAgB,UAAUhC,GAAa,WAAWpU,CAAG,CAAC,EAAI,EAAImW,EAE1DL,EAAQ,CACV,MAAMO,EAAQf,GAAiBrW,EAAO6E,EAAW0Q,GAAgBW,CAAU,CAAC,EACtEmB,EAAQhB,GAAiBrW,EAAO6E,EAAW0Q,GAAgBW,EAAa,CAAC,CAAC,EAC5EkB,IAAU,MAAQC,IAAU,OAC9BlS,EAAU,KAAKgR,CAAO,GAAKiB,EAAQC,GAAS,EAAIV,EAChDxR,EAAU,KAAKgR,CAAO,EAAIa,EAE9B,SAAWD,EAAW,CACpB,MAAMO,EAAQjB,GACZrW,EACA6E,EACA0Q,GAAgBA,GAAgB,OAAS,CAAC,CAAA,EAExC+B,IAAU,OACZnS,EAAU,KAAKgR,CAAO,EAAImB,EAAQV,EAClCzR,EAAU,KAAKgR,CAAO,EAAIa,EAE9B,CACF,MAAWF,IACTK,EAAgB,UAAUhC,GAAa,WAAWpU,CAAG,CAAC,EAAI,EAE9D,SACM8V,GAAUC,EAAU,CACtB,MAAMG,EAAgBpB,GAAgBK,CAAU,GAAK,EAC/CgB,EAAWpB,IAAOU,EAAOS,GAAiBrB,GAAgB,EAAG,CAAC,EACpEuB,EAAgB,UAAUhC,GAAa,WAAWpU,CAAG,CAAC,EAAI,EAAImW,EAE9D,MAAMK,EAASnB,GAAepW,EAAO6E,CAAS,EAC9C,GAAI0S,IAAW,KAAM,SAErB,GAAIV,EAAQ,CACV,MAAMO,EAAQnB,GAAmBjW,EAAO6E,EAAW0Q,GAAgBW,CAAU,CAAC,EACxEmB,EAAQpB,GAAmBjW,EAAO6E,EAAW0Q,GAAgBW,EAAa,CAAC,CAAC,EAC5EsB,EAActC,GAAmB,YAAYrQ,CAAS,EACxDuS,IAAU,MAAQC,IAAU,OAC9BlS,EAAU,KAAKgR,CAAO,GAAKiB,EAAQC,GAAS,EAAIG,EAChDrS,EAAU,KAAKgR,CAAO,EAAIoB,EAE9B,SAAWT,EAAU,CACnB,MAAMQ,EAAQrB,GACZjW,EACA6E,EACA0Q,GAAgBA,GAAgB,OAAS,CAAC,CAAA,EAExC+B,IAAU,OACZnS,EAAU,KAAKgR,CAAO,EAAImB,EAAQZ,EAClCvR,EAAU,KAAKgR,CAAO,EAAIoB,EAE9B,CACF,MAAWR,IACTI,EAAgB,UAAUhC,GAAa,WAAWpU,CAAG,CAAC,EAAI,EAGhE,CACF,CACF,EAEa0W,GAAkC,CAC7C,WAAY,CAAE,mBAAAvC,GAAoB,aAAAC,EAAA,EAClC,QAAS,CAACK,GAAyBe,EAAwB,EAC3D,OAAQ,CACN,SAAU,CACR,uBAAwB,CACtB,SAAU,GACV,MAAO,SACP,YAAa,EACb,cAAe,GACf,KAAM,EACN,MAAO,EACP,YAAa,EACb,eAAgB,GAChB,YAAa,CAAA,EAEf,gBAAiB,CACf,OAAQ,EACR,WAAY,EACZ,WAAY,EACZ,WAAY,EACZ,OAAQ,EACR,SAAU,EACV,UAAW,EACX,YAAa,CAAA,CACf,CACF,CAEJ,EAEO,SAASmB,GACd1X,EACA6E,EACAnO,EAQM,CACNsJ,EAAM,aAAa6E,EAAWqQ,GAAoB,CAChD,SAAUxe,GAAS,SACnB,MAAOA,GAAS,OAAS,SACzB,YAAaA,GAAS,YACtB,cAAeA,GAAS,cACxB,KAAM,EACN,MAAO,EACP,YAAaA,GAAS,YACtB,eAAgBA,GAAS,eACzB,YAAa,CAAA,CACd,CACH,CCjTO,MAAMihB,EAAkBpU,EAAqB,CAClD,WAAYC,EAAW,IACvB,MAAOA,EAAW,IAClB,WAAYA,EAAW,IACvB,KAAMA,EAAW,IACjB,SAAUA,EAAW,IACrB,SAAUA,EAAW,IACrB,YAAaA,EAAW,KACxB,aAAcA,EAAW,IACzB,SAAUA,EAAW,IACrB,SAAUA,EAAW,IACrB,YAAaA,EAAW,IACxB,WAAYA,EAAW,IACvB,WAAYA,EAAW,IACvB,SAAUA,EAAW,IACrB,MAAOA,EAAW,IAClB,MAAOA,EAAW,IAClB,MAAOA,EAAW,IAClB,MAAOA,EAAW,IAClB,MAAOA,EAAW,IAClB,MAAOA,EAAW,IAClB,OAAQA,EAAW,IACnB,UAAWA,EAAW,IACtB,OAAQA,EAAW,IACnB,OAAQA,EAAW,IACnB,SAAUA,EAAW,IACrB,SAAUA,EAAW,IACrB,SAAUA,EAAW,IACrB,UAAWA,EAAW,IACtB,WAAYA,EAAW,IACvB,SAAUA,EAAW,IACrB,KAAMA,EAAW,IACjB,MAAOA,EAAW,IAClB,YAAaA,EAAW,IACxB,SAAUA,EAAW,IACrB,eAAgBA,EAAW,IAC3B,eAAgBA,EAAW,IAC3B,YAAaA,EAAW,IACxB,mBAAoBA,EAAW,GACjC,CAAC,EAEKoU,GAAuB/T,EAAiB,CAAC8T,CAAe,CAAC,EAEzDE,GAAqC,CACzC,MAAO,aACP,MAAO,CACLrQ,GACA2B,GACA8G,GACA8B,EAAA,EAEF,OAAO/R,EAAO,CACZ,UAAW6E,KAAa+S,GAAqB5X,EAAM,KAAK,EAAG,CACzD,GAAI,CAAC2X,EAAgB,YAAY9S,CAAS,EAAG,CAC3C,UAAWK,KAAYpB,GAAW9D,EAAM,KAAK,EAAG,CAC9C,GAAIyD,EAAM,OAAOyB,CAAQ,IAAML,EAAW,SAC1C,MAAM3Q,EAAQuP,EAAM,MAAMyB,CAAQ,EAE9BhR,IAAU,GACZyjB,EAAgB,aAAa9S,CAAS,EAAIK,EAC1CzB,EAAM,YAAYyB,CAAQ,EAAI,EAC9BzB,EAAM,UAAUyB,CAAQ,EAAI,EAC5BzB,EAAM,WAAWyB,CAAQ,EAAI,EAC7BC,EAAU,OAAOD,CAAQ,EAAI,EAC7BC,EAAU,OAAOD,CAAQ,EAAI,EAC7BC,EAAU,OAAOD,CAAQ,EAAI,EAC7BC,EAAU,KAAKD,CAAQ,EAAIyS,EAAgB,SAAS9S,CAAS,EAC7DM,EAAU,KAAKD,CAAQ,EAAIyS,EAAgB,SAAS9S,CAAS,GACpD3Q,IAAU,GACnByjB,EAAgB,SAAS9S,CAAS,EAAIK,EACtCzB,EAAM,YAAYyB,CAAQ,EAAI,EAC9BC,EAAU,OAAOD,CAAQ,EAAI,EAC7BC,EAAU,OAAOD,CAAQ,EAAI,EAC7BC,EAAU,OAAOD,CAAQ,EAAI,GACpBhR,IAAU,IACnByjB,EAAgB,SAAS9S,CAAS,EAAIK,EAE1C,CACAyS,EAAgB,YAAY9S,CAAS,EAAI,CAC3C,CAEA,MAAMiT,EAAaH,EAAgB,aAAa9S,CAAS,EACzD,GAAIiT,IAAe,EAAG,SAEtB,MAAMC,EAAaJ,EAAgB,WAAW9S,CAAS,EACjDmT,EAAcL,EAAgB,YAAY9S,CAAS,EAEzD,GAAI7E,EAAM,aAAa8X,EAAYnU,CAAQ,GAAKA,EAAS,YAAYmU,CAAU,EAAG,CAChF,MAAMG,EAAaF,EAAa,EAAI,EAAI,EACxCpU,EAAS,QAAQmU,CAAU,EAAIG,EAC/BtU,EAAS,UAAUmU,CAAU,EAAIG,EACjCtU,EAAS,WAAWmU,CAAU,EAAIG,EAClCtU,EAAS,SAASmU,CAAU,EAAIG,EAE5BD,IAAgB,GAAK,CAACL,EAAgB,mBAAmB9S,CAAS,IACpEmC,EAAK,MAAMrD,EAAS,QAAQmU,CAAU,CAAC,EAAIE,EAC3ChR,EAAK,MAAMrD,EAAS,UAAUmU,CAAU,CAAC,EAAIE,EAC7ChR,EAAK,MAAMrD,EAAS,WAAWmU,CAAU,CAAC,EAAIE,EAC9ChR,EAAK,MAAMrD,EAAS,SAASmU,CAAU,CAAC,EAAIE,EAC5CL,EAAgB,mBAAmB9S,CAAS,EAAI,EAEpD,CAEA,MAAMqT,EAAQP,EAAgB,MAAM9S,CAAS,EACvCsT,EAAWR,EAAgB,SAAS9S,CAAS,EAC7CuT,EAAWT,EAAgB,SAAS9S,CAAS,EAC7CwT,EAAU5U,EAAM,WAAWqU,CAAU,EACrCQ,EAAUhV,EAAY,WAAWuB,CAAS,EAEhDM,EAAU,OAAO2S,CAAU,EAAIC,EAC/B5S,EAAU,OAAO2S,CAAU,EAAIC,EAC/B5S,EAAU,OAAO2S,CAAU,EAAIC,EAE/BtU,EAAM,YAAYqU,CAAU,EAAII,EAAQ,EAAI,EAAI,EAE5CA,EAAQ,IACV/S,EAAU,KAAK2S,CAAU,EAAIK,GAAYE,EAAUF,GAAYD,EAC/D/S,EAAU,KAAK2S,CAAU,EAAIM,GAAYE,EAAUF,GAAYF,GAGjE,MAAMK,EAASZ,EAAgB,SAAS9S,CAAS,EACjD,GAAI0T,IAAW,EAAG,CAChB,MAAMC,EAAab,EAAgB,WAAW9S,CAAS,EACjD4T,EAAOd,EAAgB,KAAK9S,CAAS,EAW3C,GATAM,EAAU,OAAOoT,CAAM,EAAIE,EAC3BtT,EAAU,OAAOoT,CAAM,EAAIE,EAC3BtT,EAAU,OAAOoT,CAAM,EAAIE,EAE3BhV,EAAM,YAAY8U,CAAM,EAAIC,EAAa,EAAI,EAAI,EAEjDrT,EAAU,KAAKoT,CAAM,EAAI9U,EAAM,WAAW8U,CAAM,EAChDpT,EAAU,KAAKoT,CAAM,EAAIjV,EAAY,WAAWuB,CAAS,EAErD7E,EAAM,aAAauY,EAAQ5U,CAAQ,GAAKA,EAAS,YAAY4U,CAAM,EAAG,CACxE,MAAMN,EAAaQ,EAAO,EAAI,EAAI,EAClC9U,EAAS,QAAQ4U,CAAM,EAAIN,EAC3BtU,EAAS,UAAU4U,CAAM,EAAIN,EAC7BtU,EAAS,WAAW4U,CAAM,EAAIN,EAC9BtU,EAAS,SAAS4U,CAAM,EAAIN,CAC9B,CACF,CAEA,MAAMS,EAASf,EAAgB,SAAS9S,CAAS,EAC3C4T,EAAOd,EAAgB,KAAK9S,CAAS,EACrC8T,EAAchB,EAAgB,YAAY9S,CAAS,EACnD+T,EAAajB,EAAgB,WAAW9S,CAAS,EACjDgU,EAAalB,EAAgB,WAAW9S,CAAS,EAEvD,UAAWK,KAAYwK,GAAiB1P,EAAM,KAAK,EAAG,CACpD,GAAIyD,EAAM,OAAOyB,CAAQ,IAAML,EAAW,SAE1C,IAAIiU,EACA5T,IAAawT,EACfI,EAAc,KAAK,IAAIH,EAAaC,CAAU,EACrC1T,IAAaqT,EACtBO,EAAc,KAAK,IAAIH,EAAaE,CAAU,EAAIJ,EAElDK,EAAcH,EAEhBlJ,EAAY,MAAMvK,CAAQ,EAAI4T,CAChC,CAEA,UAAW5T,KAAY0D,GAAgB5I,EAAM,KAAK,EAAG,CACnD,GAAIyD,EAAM,OAAOyB,CAAQ,IAAML,EAAW,SAE1C,IAAIiU,EACA5T,IAAawT,EACfI,EAAc,KAAK,IAAIH,EAAaC,CAAU,EACrC1T,IAAaqT,EACtBO,EAAc,KAAK,IAAIH,EAAaE,CAAU,EAAIJ,EAElDK,EAAcH,EAEhBhQ,GAAW,MAAMzD,CAAQ,EAAI4T,CAC/B,CAEA,MAAMC,EAAWpB,EAAgB,SAAS9S,CAAS,EACnD,GAAIkU,EAAW,GAAKL,IAAW,GAAKH,IAAW,EAAG,CAChD,MAAMS,EAAavJ,EAAY,QAAQiJ,CAAM,EACvCO,EAAaxJ,EAAY,QAAQ8I,CAAM,EACvCW,EAAYzJ,EAAY,UAAUiJ,CAAM,EACxCS,GAAY1J,EAAY,UAAU8I,CAAM,EAE9C,GAAIS,GAAcC,GAAcC,GAAaC,GAAW,CACtD,MAAMC,GAAYlQ,EAAe,KAAKgQ,CAAS,EACzCG,GAAYnQ,EAAe,KAAKiQ,EAAS,EACzCG,IAAQF,GAAYC,IAAa,EAEvClC,EAAgB,MAAM6B,CAAU,EAAIM,GAAOF,GAC3CjC,EAAgB,UAAU6B,CAAU,EAAID,EACxC5B,EAAgB,MAAM8B,CAAU,EAAIK,GAAOD,GAC3ClC,EAAgB,UAAU8B,CAAU,EAAIF,CAC1C,CACF,SAAWL,IAAW,GAAKH,IAAW,EAAG,CACvC,MAAMS,EAAavJ,EAAY,QAAQiJ,CAAM,EACvCO,EAAaxJ,EAAY,QAAQ8I,CAAM,EACzCS,GAAcC,IAChB9B,EAAgB,UAAU6B,CAAU,EAAI,EACxC7B,EAAgB,UAAU8B,CAAU,EAAI,EAE5C,CAEA,MAAMM,EAAQ5B,EAAgB,MAAM9S,CAAS,EACvC2U,EAAQ7B,EAAgB,MAAM9S,CAAS,EACvC4U,EAAQ9B,EAAgB,MAAM9S,CAAS,EACvC6U,GAAQ/B,EAAgB,MAAM9S,CAAS,EACvC8U,EAAQhC,EAAgB,MAAM9S,CAAS,EACvC+U,GAAQjC,EAAgB,MAAM9S,CAAS,EACvCgV,GAASlC,EAAgB,OAAO9S,CAAS,EACzCiV,GAAYnC,EAAgB,UAAU9S,CAAS,EAC/CkV,GAASpC,EAAgB,OAAO9S,CAAS,EACzCmV,GAASrC,EAAgB,OAAO9S,CAAS,EAE/C,UAAWK,KAAY2L,GAAsB7Q,EAAM,KAAK,EAAG,CAEzD,GADI,CAACA,EAAM,aAAakF,EAAUzB,CAAK,GACnCA,EAAM,OAAOyB,CAAQ,IAAML,EAAW,SAE1C,MAAM3Q,EAAQuP,EAAM,MAAMyB,CAAQ,EAClC,IAAI+U,EAAYC,GAAYC,GAc5B,GAbIjV,IAAawT,GACfuB,EAAK,KAAK,IAAIJ,GAAQN,CAAK,EAC3BW,GAAK,KAAK,IAAIH,GAAQP,CAAK,EAC3BW,GAAK,KAAK,IAAIH,GAAQP,CAAK,GAClBvU,IAAaqT,GACtB0B,EAAK,KAAK,IAAIJ,GAAQH,EAAK,EAAIjB,EAC/ByB,GAAK,KAAK,IAAIH,GAAQJ,CAAK,EAAIlB,EAC/B0B,GAAK,KAAK,IAAIH,GAAQJ,EAAK,EAAInB,IAE/BwB,EAAKJ,GACLK,GAAKH,GACLI,GAAKH,IAEHF,GAAY,EAAG,CACjB,MAAM7C,GAAgB/iB,EAAQ,GACxBkmB,GAAa,KAAK,IAAI,EAAG,KAAK,IAAI,GAAIN,GAAY7C,IAAiB,EAAG,CAAC,EAC7EgD,EAAK,KAAK,IAAIA,EAAIG,EAAU,CAC9B,CACAxJ,EAAiB,OAAO1L,CAAQ,EAAI+U,EACpCrJ,EAAiB,OAAO1L,CAAQ,EAAIgV,GACpCtJ,EAAiB,OAAO1L,CAAQ,EAAIiV,GACpCvJ,EAAiB,SAAS1L,CAAQ,EAAIyS,EAAgB,SAAS9S,CAAS,EACxE+L,EAAiB,SAAS1L,CAAQ,EAAIyS,EAAgB,SAAS9S,CAAS,EACxE+L,EAAiB,SAAS1L,CAAQ,EAAIyS,EAAgB,SAAS9S,CAAS,CAC1E,CAEA,MAAMwV,GAAY1C,EAAgB,UAAU9S,CAAS,EAC/CyV,GAAa3C,EAAgB,WAAW9S,CAAS,EACjD0V,GAAW5C,EAAgB,SAAS9S,CAAS,EAC7C2V,GAAc7C,EAAgB,YAAY9S,CAAS,EAEzD,UAAWK,KAAY4O,GAAoB9T,EAAM,KAAK,EAAG,CAEvD,GADI,CAACA,EAAM,aAAakF,EAAUzB,CAAK,GACnCA,EAAM,OAAOyB,CAAQ,IAAML,EAAW,SAE1C,MAAM3Q,EAAQuP,EAAM,MAAMyB,CAAQ,EAClC,IAAImE,EACAnE,IAAaqT,EACflP,EAAQgR,GACCnmB,IAAU,GAAKA,IAAU,GAAKA,IAAU,EACjDmV,EAAQiR,GAERjR,EAAQ,EAEVwK,EAAe,MAAM3O,CAAQ,EAAImE,EACjCwK,EAAe,YAAY3O,CAAQ,EAAIqV,GAAW,GAAM,EAAI,EAC5D1G,EAAe,OAAO3O,CAAQ,EAAIsV,EACpC,CAEA,MAAMhE,GAAOmB,EAAgB,KAAK9S,CAAS,EACrC4R,GAAQkB,EAAgB,MAAM9S,CAAS,EACzC7E,EAAM,aAAa6E,EAAWqQ,EAAkB,IAClDA,GAAmB,KAAKrQ,CAAS,EAAI2R,GACrCtB,GAAmB,MAAMrQ,CAAS,EAAI4R,IAGxC,MAAMgE,GAAW9C,EAAgB,SAAS9S,CAAS,EACnD,GAAI4V,GAAW,EAAG,CAChB,MAAM5K,EAAea,GAAuB,aAAa7L,CAAS,EAC5DyP,EAAeV,GAAqB,aAAa/O,CAAS,EAEhE,UAAWK,KAAY2L,GAAsB7Q,EAAM,KAAK,EAAG,CAGzD,GAFI,CAACA,EAAM,aAAakF,EAAUzB,CAAK,GACnCA,EAAM,OAAOyB,CAAQ,IAAML,GAC3B,CAAC+L,EAAiB,YAAY1L,CAAQ,EAAG,SAE7C,MAAMwV,GAAW9J,EAAiB,SAAS1L,CAAQ,EAC7CyV,GAAW/J,EAAiB,SAAS1L,CAAQ,EACnD,GAAI,CAACwV,IAAY,CAACC,GAAU,SAG5B,MAAMtH,GADSzC,EAAiB,OAAO1L,CAAQ,GACrB,EAAI0L,EAAiB,SAAS1L,CAAQ,EAAI,IAC9D0V,GAAU/K,EAAe,EAAKwD,GAAUiB,EACxCuG,GAAS,GAEf1D,EAAgB,MAAMuD,EAAQ,EAAIG,GAClC1D,EAAgB,UAAUuD,EAAQ,EAAID,GACtCtD,EAAgB,MAAMwD,EAAQ,EAAIC,GAClCzD,EAAgB,UAAUwD,EAAQ,EAAIF,EACxC,CACF,KACE,WAAWvV,KAAY2L,GAAsB7Q,EAAM,KAAK,EAAG,CAGzD,GAFI,CAACA,EAAM,aAAakF,EAAUzB,CAAK,GACnCA,EAAM,OAAOyB,CAAQ,IAAML,GAC3B,CAAC+L,EAAiB,YAAY1L,CAAQ,EAAG,SAE7C,MAAMwV,EAAW9J,EAAiB,SAAS1L,CAAQ,EAC7CyV,EAAW/J,EAAiB,SAAS1L,CAAQ,EAC/CwV,IAAUvD,EAAgB,UAAUuD,CAAQ,EAAI,GAChDC,IAAUxD,EAAgB,UAAUwD,CAAQ,EAAI,EACtD,CAGF,MAAMG,GAAiBnD,EAAgB,eAAe9S,CAAS,EACzDkW,GAAiBpD,EAAgB,eAAe9S,CAAS,EAC/D,UAAWK,KAAYwK,GAAiB1P,EAAM,KAAK,EAAG,CAEpD,GADIyD,EAAM,OAAOyB,CAAQ,IAAML,GAC3B,CAAC4K,EAAY,YAAYvK,CAAQ,EAAG,SAExC,MAAM8V,EAAcvL,EAAY,YAAYvK,CAAQ,EACpD,GAAI8V,EAAa,CAEf,MAAM/D,GADQxT,EAAM,MAAMyB,CAAQ,EACJ,IACxB+V,GAAqB,KAAK,IAC9B,EACA,KAAK,IAAI,GAAIH,GAAiB7D,IAAiB,EAAG,CAAA,EAE9CiE,GACJD,GAAqB,GAAMA,GAAqB,GAAK,EAAIA,IAAsB,EACjF9D,EAAgB,UAAU6D,CAAW,EAAIE,EAC3C,CAEA,GAAIH,GAAiB,EAAG,CACtB,MAAM7mB,EAAQuP,EAAM,MAAMyB,CAAQ,EAC5BiW,GAAS,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,EACvCC,GAAQD,GAAOjnB,EAAQinB,GAAO,MAAM,EAEpCE,GADSN,GAAiBK,GAAQ,EAAK,EACnB,GAC1B3L,EAAY,OAAOvK,CAAQ,EAAImW,GAAY,EAAI,CACjD,MACE5L,EAAY,OAAOvK,CAAQ,EAAI,CAEnC,CACF,CACF,CACF,EAEaoW,GAAqC,CAChD,WAAY,CAAE,gBAAA3D,CAAA,EACd,QAAS,CAACE,EAAqB,EAC/B,OAAQ,CACN,SAAU,CACR,oBAAqB,CACnB,WAAY,EACZ,MAAO,EACP,WAAY,EACZ,KAAM,EACN,SAAU,EACV,SAAU,IACV,YAAa,EACb,aAAc,EACd,SAAU,EACV,SAAU,EACV,YAAa,EACb,WAAY,EACZ,WAAY,EACZ,SAAU,EACV,MAAO,EACP,MAAO,EACP,MAAO,EACP,MAAO,EACP,MAAO,EACP,MAAO,EACP,OAAQ,EACR,UAAW,EACX,OAAQ,EACR,OAAQ,EACR,SAAU,EACV,SAAU,EACV,SAAU,EACV,UAAW,EACX,WAAY,EACZ,SAAU,EACV,KAAM,EACN,MAAO,EACP,YAAa,EACb,SAAU,EACV,eAAgB,EAChB,eAAgB,EAChB,YAAa,EACb,mBAAoB,CAAA,CACtB,CACF,CAEJ,ECrZa0D,EAAgBhY,EAAqB,CAChD,OAAQC,EAAW,IACnB,OAAQA,EAAW,IACnB,OAAQA,EAAW,IACnB,MAAOA,EAAW,KAClB,cAAeA,EAAW,IAC1B,aAAcA,EAAW,IACzB,SAAUA,EAAW,IACrB,MAAOA,EAAW,IAClB,YAAaA,EAAW,IACxB,eAAgBA,EAAW,IAC3B,iBAAkBA,EAAW,IAC7B,aAAcA,EAAW,IACzB,gBAAiBA,EAAW,IAC5B,kBAAmBA,EAAW,IAC9B,YAAaA,EAAW,IACxB,YAAaA,EAAW,IACxB,YAAaA,EAAW,IACxB,YAAaA,EAAW,GAC1B,CAAC,EAEKgY,GAAqB3X,EAAiB,CAAC0X,EAAepW,CAAS,CAAC,EAEtE,SAAS4B,GACP/G,EACA4J,EACA3E,EACA+D,EACQ,CACR,MAAMjI,EAAMf,EAAM,aAAA,EAClB,OAAAA,EAAM,aAAae,EAAKoE,EAAW,CAAE,KAAM,EAAG,KAAM,EAAG,KAAM,CAAA,CAAG,EAChEnF,EAAM,aAAae,EAAKmI,EAAgB,CAAA,CAAE,EAC1ClJ,EAAM,aAAae,EAAKqE,GAAQ,CAAE,OAAQwE,EAAW,EACrD5J,EAAM,aAAae,EAAKiG,EAAM,CAC5B,QAAS,EACT,QAAS,EACT,QAAS,EACT,MAAA/B,EACA,UAAA+D,EACA,QAAS,EACT,SAAU,EACV,WAAY,EACZ,UAAW,EACX,QAAS,CAAA,CACV,EACMjI,CACT,CAEA,SAASiT,GACPhU,EACA4J,EACA3E,EACAD,EACAsQ,EACQ,CACR,MAAMvU,EAAMf,EAAM,aAAA,EAClB,OAAAA,EAAM,aAAae,EAAKoE,EAAW,CAAE,KAAM,EAAG,KAAM,EAAG,KAAM,CAAA,CAAG,EAChEnF,EAAM,aAAae,EAAKmI,EAAgB,CAAA,CAAE,EAC1ClJ,EAAM,aAAae,EAAKqE,GAAQ,CAAE,OAAQwE,EAAW,EACrD5J,EAAM,aAAae,EAAKsE,GAAM,CAC5B,SAAAL,EACA,MAAAC,EACA,MAAO,CAAA,CACR,EACDK,GAAetF,EAAOe,EAAKuU,CAAO,EAC3BvU,CACT,CAEA,MAAM0a,GAAwC,CAC5C,MAAO,aACP,OAAOzb,EAAO,CACZ,UAAWe,KAAOya,GAAmBxb,EAAM,KAAK,EAAG,CACjD,GAAIub,EAAc,YAAYxa,CAAG,EAAG,SAEpC,MAAMkE,EAAQsW,EAAc,MAAMxa,CAAG,EAC/BiE,EAAWuW,EAAc,SAASxa,CAAG,EACrCiI,EAAY,EAElBuS,EAAc,YAAYxa,CAAG,EAAIgG,GAAiB/G,EAAOe,EAAKkE,EAAO+D,CAAS,EAC9EuS,EAAc,eAAexa,CAAG,EAAIgG,GAAiB/G,EAAOe,EAAKkE,EAAO+D,CAAS,EACjFuS,EAAc,iBAAiBxa,CAAG,EAAIgG,GAAiB/G,EAAOe,EAAKkE,EAAO+D,CAAS,EACnFuS,EAAc,aAAaxa,CAAG,EAAIgG,GAAiB/G,EAAOe,EAAKkE,EAAO+D,CAAS,EAC/EuS,EAAc,gBAAgBxa,CAAG,EAAIgG,GAAiB/G,EAAOe,EAAKkE,EAAO+D,CAAS,EAClFuS,EAAc,kBAAkBxa,CAAG,EAAIgG,GAAiB/G,EAAOe,EAAKkE,EAAO+D,CAAS,EAEpF,MAAM0S,EAASH,EAAc,OAAOxa,CAAG,EACjC4a,EAASJ,EAAc,OAAOxa,CAAG,EACjC6a,EAASL,EAAc,OAAOxa,CAAG,EACvCwa,EAAc,YAAYxa,CAAG,EAAIiT,GAC/BhU,EACAe,EACAkE,EACAD,EACA,OAAO0W,CAAM,CAAA,EAEfH,EAAc,YAAYxa,CAAG,EAAIiT,GAC/BhU,EACAe,EACAkE,EACAD,EACA,OAAO2W,CAAM,CAAA,EAEfJ,EAAc,YAAYxa,CAAG,EAAIiT,GAC/BhU,EACAe,EACAkE,EACAD,EACA,OAAO4W,CAAM,CAAA,EAGfL,EAAc,YAAYxa,CAAG,EAAI,CACnC,CACF,CACF,EAEM8a,GAAyC,CAC7C,MAAO,aACP,OAAO7b,EAAO,CACZ,UAAWe,KAAOya,GAAmBxb,EAAM,KAAK,EAAG,CACjD,GAAI,CAACub,EAAc,YAAYxa,CAAG,EAAG,SAErC,MAAM+a,EAAgBP,EAAc,cAAcxa,CAAG,EAC/Cgb,EAAeR,EAAc,aAAaxa,CAAG,EAC7CsI,EAAQkS,EAAc,MAAMxa,CAAG,EAE/B+G,EAAcgU,EAAgB,EAAKzS,EACnC2S,EAAWD,EAAe,IAC1BE,EAAc5S,EAAQ,EAAI,EAAI,EAE9B6S,EAAUX,EAAc,YAAYxa,CAAG,EACvCob,EAAaZ,EAAc,eAAexa,CAAG,EAC7Cqb,EAAeb,EAAc,iBAAiBxa,CAAG,EACjDsb,EAAWd,EAAc,aAAaxa,CAAG,EACzCub,EAAcf,EAAc,gBAAgBxa,CAAG,EAC/Cwb,EAAgBhB,EAAc,kBAAkBxa,CAAG,EACnDyb,EAAQjB,EAAc,YAAYxa,CAAG,EACrC0b,EAAQlB,EAAc,YAAYxa,CAAG,EAE3CoE,EAAU,KAAK+W,CAAO,EAAI,CAACH,EAAe,EAC1C5W,EAAU,KAAK+W,CAAO,EAAIpU,EAC1Bd,EAAK,QAAQkV,CAAO,EAAIF,EAAW3S,EACnCrC,EAAK,QAAQkV,CAAO,EAAI,EACxBlV,EAAK,QAAQkV,CAAO,EAAID,EAExB9W,EAAU,KAAKgX,CAAU,EAAI,CAACJ,EAAe,EAC7C5W,EAAU,KAAKgX,CAAU,EAAI,CAACrU,EAC9Bd,EAAK,QAAQmV,CAAU,EAAIH,EAAW3S,EACtCrC,EAAK,QAAQmV,CAAU,EAAI,EAC3BnV,EAAK,QAAQmV,CAAU,EAAIF,EAE3B9W,EAAU,KAAKiX,CAAY,EAAI,CAACL,EAAe,EAC/C5W,EAAU,KAAKiX,CAAY,EAAI,CAACtU,EAChCd,EAAK,QAAQoV,CAAY,EAAI,EAC7BpV,EAAK,QAAQoV,CAAY,EAAIN,EAAgBzS,EAC7CrC,EAAK,QAAQoV,CAAY,EAAIH,EAE7B9W,EAAU,KAAKkX,CAAQ,EAAIN,EAAe,EAC1C5W,EAAU,KAAKkX,CAAQ,EAAIvU,EAC3Bd,EAAK,QAAQqV,CAAQ,EAAI,CAACL,EAAW3S,EACrCrC,EAAK,QAAQqV,CAAQ,EAAI,EACzBrV,EAAK,QAAQqV,CAAQ,EAAIJ,EAEzB9W,EAAU,KAAKmX,CAAW,EAAIP,EAAe,EAC7C5W,EAAU,KAAKmX,CAAW,EAAI,CAACxU,EAC/Bd,EAAK,QAAQsV,CAAW,EAAI,CAACN,EAAW3S,EACxCrC,EAAK,QAAQsV,CAAW,EAAI,EAC5BtV,EAAK,QAAQsV,CAAW,EAAIL,EAE5B9W,EAAU,KAAKoX,CAAa,EAAIR,EAAe,EAC/C5W,EAAU,KAAKoX,CAAa,EAAI,CAACzU,EACjCd,EAAK,QAAQuV,CAAa,EAAI,EAC9BvV,EAAK,QAAQuV,CAAa,EAAIT,EAAgBzS,EAC9CrC,EAAK,QAAQuV,CAAa,EAAIN,EAE9B,MAAMS,EAAQnB,EAAc,YAAYxa,CAAG,EACrC4b,EAAcb,EAAgB,EAAKzS,EACzClE,EAAU,KAAKqX,CAAK,EAAIG,EACxBxX,EAAU,KAAKsX,CAAK,EAAI,EACxBtX,EAAU,KAAKuX,CAAK,EAAI,CAACC,EACzBxX,EAAU,OAAOqX,CAAK,EAAInT,EAC1BlE,EAAU,OAAOqX,CAAK,EAAInT,EAC1BlE,EAAU,OAAOsX,CAAK,EAAIpT,EAC1BlE,EAAU,OAAOsX,CAAK,EAAIpT,EAC1BlE,EAAU,OAAOuX,CAAK,EAAIrT,EAC1BlE,EAAU,OAAOuX,CAAK,EAAIrT,CAC5B,CACF,CACF,EAEauT,GAAmC,CAC9C,WAAY,CAAE,cAAArB,CAAA,EACd,QAAS,CAACE,GAA0BI,EAAyB,EAC7D,OAAQ,CACN,SAAU,CACR,iBAAkB,CAChB,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,MAAO,SACP,cAAe,EACf,aAAc,EACd,SAAU,GACV,MAAO,EACP,YAAa,EACb,eAAgB,EAChB,iBAAkB,EAClB,aAAc,EACd,gBAAiB,EACjB,kBAAmB,EACnB,YAAa,EACb,YAAa,EACb,YAAa,EACb,YAAa,CAAA,CACf,CACF,CAEJ,ECxNagB,EAAatZ,EAAqB,CAC7C,YAAaC,EAAW,IACxB,KAAMA,EAAW,IACjB,WAAYA,EAAW,IACvB,MAAOA,EAAW,IAClB,MAAOA,EAAW,IAClB,MAAOA,EAAW,IAClB,YAAaA,EAAW,IACxB,YAAaA,EAAW,IACxB,YAAaA,EAAW,IACxB,IAAKA,EAAW,IAChB,IAAKA,EAAW,IAChB,IAAKA,EAAW,IAChB,UAAWA,EAAW,IACtB,UAAWA,EAAW,IACtB,UAAWA,EAAW,IACtB,IAAKA,EAAW,IAChB,UAAWA,EAAW,IACtB,MAAOA,EAAW,KAClB,SAAUA,EAAW,IACrB,UAAWA,EAAW,IACtB,YAAaA,EAAW,GAC1B,CAAC,EAEKsZ,GAAkBjZ,EAAiB,CAACgZ,EAAY1X,CAAS,CAAC,EAEhE,SAAS6O,GACPhU,EACA4J,EACA3E,EACAD,EACAsQ,EACAyH,EACAC,EACQ,CACR,MAAMjc,EAAMf,EAAM,aAAA,EAClB,OAAAA,EAAM,aAAae,EAAKoE,EAAW,CACjC,KAAA4X,EACA,KAAAC,EACA,KAAM,EACN,OAAQ,EACR,OAAQ,EACR,OAAQ,CAAA,CACT,EACDhd,EAAM,aAAae,EAAKmI,EAAgB,CAAA,CAAE,EAC1ClJ,EAAM,aAAae,EAAKqE,GAAQ,CAAE,OAAQwE,EAAW,EACrD5J,EAAM,aAAae,EAAKsE,GAAM,CAC5B,SAAAL,EACA,MAAAC,EACA,MAAO,CAAA,CACR,EACDK,GAAetF,EAAOe,EAAKuU,CAAO,EAC3BvU,CACT,CAEA,MAAMkc,GAAgB,IAChBC,GAAc,IAEdC,GAAU,CACd,MAAO,EACP,IAAK,IACL,MAAO,IACP,IAAK,IACL,MAAO,IACP,IAAK,EACP,EAEMC,GAAS,IAEf,SAAStH,GAAMvpB,EAAewpB,EAAaC,EAAqB,CAC9D,OAAO,KAAK,IAAID,EAAK,KAAK,IAAIC,EAAKzpB,CAAK,CAAC,CAC3C,CAEA,MAAM8wB,GAAqC,CACzC,MAAO,aACP,OAAOrd,EAAO,CACZ,UAAWe,KAAO+b,GAAgB9c,EAAM,KAAK,EAAG,CAC9C,GAAI6c,EAAW,YAAY9b,CAAG,EAAG,SAEjC,MAAMkE,EAAQ4X,EAAW,MAAM9b,CAAG,EAC5BiE,EAAW6X,EAAW,SAAS9b,CAAG,EAClCuc,EAAYT,EAAW,UAAU9b,CAAG,EAEpCwc,EAAQ,CAACD,EAAW,EAAG,CAACA,CAAS,EAEvCT,EAAW,MAAM9b,CAAG,EAAIiT,GACtBhU,EACAe,EACAkE,EACAD,EACA,IACAiY,GACAM,EAAM,CAAC,CAAA,EAETV,EAAW,MAAM9b,CAAG,EAAIiT,GACtBhU,EACAe,EACAkE,EACAD,EACA,IACAiY,GACAM,EAAM,CAAC,CAAA,EAETV,EAAW,MAAM9b,CAAG,EAAIiT,GACtBhU,EACAe,EACAkE,EACAD,EACA,IACAiY,GACAM,EAAM,CAAC,CAAA,EAGTV,EAAW,IAAI9b,CAAG,EAAIiT,GACpBhU,EACAe,EACAkE,EACAD,EACA,IACAkY,GACAK,EAAM,CAAC,CAAA,EAETV,EAAW,IAAI9b,CAAG,EAAIiT,GACpBhU,EACAe,EACAkE,EACAD,EACA,IACAkY,GACAK,EAAM,CAAC,CAAA,EAETV,EAAW,IAAI9b,CAAG,EAAIiT,GACpBhU,EACAe,EACAkE,EACAD,EACA,IACAkY,GACAK,EAAM,CAAC,CAAA,EAGTV,EAAW,YAAY9b,CAAG,EAAIiP,GAAahQ,EAAO6c,EAAW,MAAM9b,CAAG,EAAG,QAAS,CAChF,MAAO,EACP,UAAW,EACX,KAAM,gBAAA,CACP,EAED8b,EAAW,YAAY9b,CAAG,EAAIiP,GAAahQ,EAAO6c,EAAW,MAAM9b,CAAG,EAAG,QAAS,CAChF,MAAO,EACP,UAAW,EACX,KAAM,gBAAA,CACP,EAED8b,EAAW,YAAY9b,CAAG,EAAIiP,GAAahQ,EAAO6c,EAAW,MAAM9b,CAAG,EAAG,QAAS,CAChF,MAAO,EACP,UAAW,EACX,KAAM,gBAAA,CACP,EAED8b,EAAW,UAAU9b,CAAG,EAAIiP,GAAahQ,EAAO6c,EAAW,IAAI9b,CAAG,EAAG,QAAS,CAC5E,MAAO,EACP,UAAW,EACX,KAAM,gBAAA,CACP,EAED8b,EAAW,UAAU9b,CAAG,EAAIiP,GAAahQ,EAAO6c,EAAW,IAAI9b,CAAG,EAAG,QAAS,CAC5E,MAAO,EACP,UAAW,EACX,KAAM,gBAAA,CACP,EAED8b,EAAW,UAAU9b,CAAG,EAAIiP,GAAahQ,EAAO6c,EAAW,IAAI9b,CAAG,EAAG,QAAS,CAC5E,MAAO,EACP,UAAW,EACX,KAAM,gBAAA,CACP,EAED,MAAMyc,EAAe,EACrBX,EAAW,IAAI9b,CAAG,EAAIiT,GAAiBhU,EAAOe,EAAKkE,EAAOD,EAAU,KAAMwY,EAAc,CAAC,EAEzFX,EAAW,UAAU9b,CAAG,EAAIiP,GAAahQ,EAAO6c,EAAW,IAAI9b,CAAG,EAAG,QAAS,CAC5E,MAAO,EACP,UAAW,EACX,KAAM,gBAAA,CACP,EAED8b,EAAW,YAAY9b,CAAG,EAAI,CAChC,CACF,CACF,EAEM0c,GAAsC,CAC1C,MAAO,aACP,OAAOzd,EAAO,CACZ,UAAWe,KAAO+b,GAAgB9c,EAAM,KAAK,EAAG,CAC9C,GAAI,CAAC6c,EAAW,YAAY9b,CAAG,EAAG,SAElC,MAAM6F,EAAIiW,EAAW,YAAY9b,CAAG,EAEpCoW,EAAgB,UAAU0F,EAAW,YAAY9b,CAAG,CAAC,EACnD,EAAI+U,IAAOlP,EAAIuW,GAAQ,OAASC,GAAQ,EAAG,CAAC,EAC9CjG,EAAgB,UAAU0F,EAAW,UAAU9b,CAAG,CAAC,EACjD,EAAI+U,IAAOlP,EAAIuW,GAAQ,KAAOC,GAAQ,EAAG,CAAC,EAC5CjG,EAAgB,UAAU0F,EAAW,YAAY9b,CAAG,CAAC,EACnD,EAAI+U,IAAOlP,EAAIuW,GAAQ,OAASC,GAAQ,EAAG,CAAC,EAC9CjG,EAAgB,UAAU0F,EAAW,UAAU9b,CAAG,CAAC,EACjD,EAAI+U,IAAOlP,EAAIuW,GAAQ,KAAOC,GAAQ,EAAG,CAAC,EAC5CjG,EAAgB,UAAU0F,EAAW,YAAY9b,CAAG,CAAC,EACnD,EAAI+U,IAAOlP,EAAIuW,GAAQ,OAASC,GAAQ,EAAG,CAAC,EAC9CjG,EAAgB,UAAU0F,EAAW,UAAU9b,CAAG,CAAC,EACjD,EAAI+U,IAAOlP,EAAIuW,GAAQ,KAAOC,GAAQ,EAAG,CAAC,EAE5C,MAAM5G,EAAOqG,EAAW,KAAK9b,CAAG,EAC1B2c,EAAab,EAAW,WAAW9b,CAAG,EACtC4c,EAASd,EAAW,IAAI9b,CAAG,EAEjCoW,EAAgB,UAAU0F,EAAW,UAAU9b,CAAG,CAAC,EAAI,EAAIyV,EAE3D,MAAMoH,EAAc,EAAIF,EAAa,GACrCvY,EAAU,OAAOwY,CAAM,EAAIC,EAC3BzY,EAAU,OAAOwY,CAAM,EAAIC,EAC3BzY,EAAU,OAAOwY,CAAM,EAAIC,CAC7B,CACF,CACF,EAEaC,GAAgC,CAC3C,WAAY,CAAE,WAAAhB,CAAA,EACd,QAAS,CAACQ,GAAuBI,EAAsB,EACvD,OAAQ,CACN,SAAU,CACR,cAAe,CACb,YAAa,EACb,KAAM,EACN,WAAY,EACZ,MAAO,EACP,MAAO,EACP,MAAO,EACP,YAAa,EACb,YAAa,EACb,YAAa,EACb,IAAK,EACL,IAAK,EACL,IAAK,EACL,UAAW,EACX,UAAW,EACX,UAAW,EACX,IAAK,EACL,UAAW,EACX,MAAO,SACP,SAAU,GACV,UAAW,GACX,YAAa,CAAA,CACf,CACF,CAEJ,EChQaK,EAAkBva,EAAqB,CAClD,QAASC,EAAW,IACpB,UAAWA,EAAW,IACtB,QAASA,EAAW,IACpB,aAAcA,EAAW,IACzB,aAAcA,EAAW,IACzB,QAASA,EAAW,IACpB,QAASA,EAAW,IACpB,GAAIA,EAAW,IACf,KAAMA,EAAW,IACjB,GAAIA,EAAW,IACf,QAASA,EAAW,IACpB,QAASA,EAAW,IACpB,YAAaA,EAAW,IACxB,SAAUA,EAAW,IACrB,SAAUA,EAAW,IACrB,OAAQA,EAAW,KACnB,SAAUA,EAAW,KACrB,OAAQA,EAAW,KACnB,YAAaA,EAAW,KACxB,SAAUA,EAAW,IACrB,QAASA,EAAW,IACpB,YAAaA,EAAW,GAC1B,CAAC,EAEKua,GAAuBla,EAAiB,CAACia,EAAiB3Y,CAAS,CAAC,EAE1E,SAAS6O,GACPhU,EACA4J,EACA3E,EACAD,EACAsQ,EACAyH,EACQ,CACR,MAAMhc,EAAMf,EAAM,aAAA,EAClB,OAAAA,EAAM,aAAae,EAAKoE,EAAW,CACjC,KAAA4X,EACA,KAAM,EACN,KAAM,EACN,OAAQ,EACR,OAAQ,EACR,OAAQ,CAAA,CACT,EACD/c,EAAM,aAAae,EAAKmI,EAAgB,CAAA,CAAE,EAC1ClJ,EAAM,aAAae,EAAKqE,GAAQ,CAAE,OAAQwE,EAAW,EACrD5J,EAAM,aAAae,EAAKsE,GAAM,CAC5B,SAAAL,EACA,MAAAC,EACA,MAAO,CAAA,CACR,EACDK,GAAetF,EAAOe,EAAKuU,CAAO,EAC3BvU,CACT,CAEA,MAAMid,GAA0C,CAC9C,MAAO,aACP,OAAOhe,EAAO,CACZ,UAAWe,KAAOgd,GAAqB/d,EAAM,KAAK,EAAG,CACnD,GAAI8d,EAAgB,YAAY/c,CAAG,EAAG,SAEtC,MAAMqQ,EAAS0M,EAAgB,OAAO/c,CAAG,EACnCkd,EAAWH,EAAgB,SAAS/c,CAAG,EACvCsQ,EAASyM,EAAgB,OAAO/c,CAAG,EACnCiE,EAAW8Y,EAAgB,SAAS/c,CAAG,EACvCgS,EAAU+K,EAAgB,QAAQ/c,CAAG,EAErCmd,EAAcJ,EAAgB,YAAY/c,CAAG,GAAKkd,EAExDH,EAAgB,QAAQ/c,CAAG,EAAIiT,GAAiBhU,EAAOe,EAAKqQ,EAAQpM,EAAU,IAAK,CAAC+N,CAAO,EAC3F+K,EAAgB,UAAU/c,CAAG,EAAIiT,GAAiBhU,EAAOe,EAAKkd,EAAUjZ,EAAU,IAAK,CAAC,EACxF8Y,EAAgB,QAAQ/c,CAAG,EAAIiT,GAAiBhU,EAAOe,EAAKsQ,EAAQrM,EAAU,IAAK+N,CAAO,EAC1F+K,EAAgB,aAAa/c,CAAG,EAAIiT,GAClChU,EACAe,EACAkd,EACAjZ,EACA,IACA+N,EAAU,CAAA,EAEZ+K,EAAgB,aAAa/c,CAAG,EAAIiT,GAClChU,EACAe,EACAmd,EACAlZ,EACA,IACA+N,EAAU,CAAA,EAGZ+K,EAAgB,QAAQ/c,CAAG,EAAIiP,GAAahQ,EAAO8d,EAAgB,QAAQ/c,CAAG,EAAG,QAAS,CACxF,MAAO,KACP,UAAW,EACX,KAAM,gBAAA,CACP,EACD+c,EAAgB,QAAQ/c,CAAG,EAAIiP,GAAahQ,EAAO8d,EAAgB,QAAQ/c,CAAG,EAAG,QAAS,CACxF,MAAO,KACP,UAAW,EACX,KAAM,gBAAA,CACP,EAED+c,EAAgB,YAAY/c,CAAG,EAAI,CACrC,CACF,CACF,EAEMod,GAA2C,CAC/C,MAAO,aACP,OAAOne,EAAO,CACZ,UAAWe,KAAOgd,GAAqB/d,EAAM,KAAK,EAAG,CACnD,GAAI,CAAC8d,EAAgB,YAAY/c,CAAG,EAAG,SAEvC,MAAMkZ,EAAK6D,EAAgB,GAAG/c,CAAG,EAC3Bqd,EAAON,EAAgB,KAAK/c,CAAG,EAC/BmZ,EAAK4D,EAAgB,GAAG/c,CAAG,EAC3Bsd,EAAUP,EAAgB,QAAQ/c,CAAG,EACrCud,EAAUR,EAAgB,QAAQ/c,CAAG,EAErC0Q,EAAUqM,EAAgB,QAAQ/c,CAAG,EACrCwd,EAAYT,EAAgB,UAAU/c,CAAG,EACzC2Q,EAAUoM,EAAgB,QAAQ/c,CAAG,EACrCyd,EAAeV,EAAgB,aAAa/c,CAAG,EAC/C0d,EAAeX,EAAgB,aAAa/c,CAAG,EAErDoE,EAAU,OAAOsM,CAAO,EAAIwI,EAC5B9U,EAAU,OAAOsM,CAAO,EAAIwI,EAC5B9U,EAAU,OAAOsM,CAAO,EAAIwI,EAE5B9U,EAAU,OAAOoZ,CAAS,EAAIH,EAC9BjZ,EAAU,OAAOoZ,CAAS,EAAIH,EAC9BjZ,EAAU,OAAOoZ,CAAS,EAAIH,EAE9BjZ,EAAU,OAAOuM,CAAO,EAAIwI,EAC5B/U,EAAU,OAAOuM,CAAO,EAAIwI,EAC5B/U,EAAU,OAAOuM,CAAO,EAAIwI,EAE5B/U,EAAU,OAAOqZ,CAAY,EAAIH,EACjClZ,EAAU,OAAOqZ,CAAY,EAAIH,EACjClZ,EAAU,OAAOqZ,CAAY,EAAIH,EAEjClZ,EAAU,OAAOsZ,CAAY,EAAIH,EACjCnZ,EAAU,OAAOsZ,CAAY,EAAIH,EACjCnZ,EAAU,OAAOsZ,CAAY,EAAIH,EAEjCnH,EAAgB,UAAU2G,EAAgB,QAAQ/c,CAAG,CAAC,EAAI+c,EAAgB,SAAS/c,CAAG,EACtFoW,EAAgB,UAAU2G,EAAgB,QAAQ/c,CAAG,CAAC,EAAI+c,EAAgB,SAAS/c,CAAG,CACxF,CACF,CACF,EAEa2d,GAAqC,CAChD,WAAY,CAAE,gBAAAZ,CAAA,EACd,QAAS,CAACE,GAA4BG,EAA2B,EACjE,OAAQ,CACN,SAAU,CACR,oBAAqB,CACnB,QAAS,EACT,UAAW,EACX,QAAS,EACT,aAAc,EACd,aAAc,EACd,QAAS,EACT,QAAS,EACT,GAAI,EACJ,KAAM,EACN,GAAI,EACJ,QAAS,EACT,QAAS,EACT,YAAa,EACb,SAAU,EACV,SAAU,EACV,OAAQ,SACR,SAAU,SACV,OAAQ,SACR,YAAa,SACb,SAAU,EACV,QAAS,GACT,YAAa,CAAA,CACf,CACF,CAEJ,ECrLaQ,GAASpb,EAAqB,CACzC,WAAYC,EAAW,IACvB,MAAOA,EAAW,KAClB,SAAUA,EAAW,IACrB,MAAOA,EAAW,IAClB,YAAaA,EAAW,GAC1B,CAAC,EAEKob,GAAc/a,EAAiB,CAAC8a,GAAQxZ,CAAS,CAAC,EAElD0Z,GAAiC,CACrC,MAAO,aACP,OAAO7e,EAAO,CACZ,UAAWe,KAAO6d,GAAY5e,EAAM,KAAK,EAAG,CAC1C,GAAI2e,GAAO,YAAY5d,CAAG,EAAG,SAE7B,MAAMkE,EAAQ0Z,GAAO,MAAM5d,CAAG,EACxBiE,EAAW2Z,GAAO,SAAS5d,CAAG,EAE9BmT,EAAalU,EAAM,aAAA,EACzBA,EAAM,aAAakU,EAAY/O,EAAW,CACxC,KAAM,EACN,KAAM,EACN,KAAM,EACN,OAAQ,EACR,OAAQ,EACR,OAAQ,CAAA,CACT,EACDnF,EAAM,aAAakU,EAAYhL,EAAgB,CAAA,CAAE,EACjDlJ,EAAM,aAAakU,EAAY9O,GAAQ,CAAE,OAAQrE,EAAK,EACtDf,EAAM,aAAakU,EAAY7O,GAAM,CACnC,SAAAL,EACA,MAAAC,EACA,MAAO,CAAA,CACR,EACDK,GAAetF,EAAOkU,EAAY,GAAG,EAErCyK,GAAO,WAAW5d,CAAG,EAAImT,EACzByK,GAAO,YAAY5d,CAAG,EAAI,CAC5B,CACF,CACF,EAEM+d,GAAkC,CACtC,MAAO,aACP,OAAO9e,EAAO,CACZ,UAAWe,KAAO6d,GAAY5e,EAAM,KAAK,EAAG,CAC1C,GAAI,CAAC2e,GAAO,YAAY5d,CAAG,EAAG,SAE9B,MAAMsI,EAAQsV,GAAO,MAAM5d,CAAG,EACxBmT,EAAayK,GAAO,WAAW5d,CAAG,EAExCoE,EAAU,OAAO+O,CAAU,EAAI7K,EAC/BlE,EAAU,OAAO+O,CAAU,EAAI7K,EAC/BlE,EAAU,OAAO+O,CAAU,EAAI7K,CACjC,CACF,CACF,EAEa0V,GAA4B,CACvC,WAAY,CAAE,OAAAJ,EAAA,EACd,QAAS,CAACE,GAAmBC,EAAkB,EAC/C,OAAQ,CACN,SAAU,CACR,UAAW,CACT,WAAY,EACZ,MAAO,QACP,SAAU,IACV,MAAO,EACP,YAAa,CAAA,CACf,CACF,CAEJ,ECzEaE,EAAgBzb,EAAqB,CAChD,aAAcC,EAAW,IACzB,QAASA,EAAW,IACpB,UAAWA,EAAW,IACtB,QAASA,EAAW,IACpB,aAAcA,EAAW,IACzB,YAAaA,EAAW,IACxB,QAASA,EAAW,IACpB,OAAQA,EAAW,KACnB,OAAQA,EAAW,KACnB,OAAQA,EAAW,KACnB,WAAYA,EAAW,KACvB,SAAUA,EAAW,IACrB,QAASA,EAAW,IACpB,MAAOA,EAAW,IAClB,YAAaA,EAAW,GAC1B,CAAC,EAEKyb,GAAqBpb,EAAiB,CAACmb,EAAe7Z,CAAS,CAAC,EAEtE,SAAS6O,GACPhU,EACA4J,EACA3E,EACAD,EACAsQ,EACAyH,EACQ,CACR,MAAMhc,EAAMf,EAAM,aAAA,EAClB,OAAAA,EAAM,aAAae,EAAKoE,EAAW,CACjC,KAAA4X,EACA,KAAM,EACN,KAAM,EACN,OAAQ,EACR,OAAQ,EACR,OAAQ,CAAA,CACT,EACD/c,EAAM,aAAae,EAAKmI,EAAgB,CAAA,CAAE,EAC1ClJ,EAAM,aAAae,EAAKqE,GAAQ,CAAE,OAAQwE,EAAW,EACrD5J,EAAM,aAAae,EAAKsE,GAAM,CAC5B,SAAAL,EACA,MAAAC,EACA,MAAO,CAAA,CACR,EACDK,GAAetF,EAAOe,EAAKuU,CAAO,EAC3BvU,CACT,CAEA,MAAMme,GAAwC,CAC5C,MAAO,aACP,OAAOlf,EAAO,CACZ,UAAWe,KAAOke,GAAmBjf,EAAM,KAAK,EAAG,CACjD,GAAIgf,EAAc,YAAYje,CAAG,EAAG,SAEpC,MAAMqQ,EAAS4N,EAAc,OAAOje,CAAG,EACjCsQ,EAAS2N,EAAc,OAAOje,CAAG,EACjCuQ,EAAS0N,EAAc,OAAOje,CAAG,EACjCoe,EAAaH,EAAc,WAAWje,CAAG,EACzCiE,EAAWga,EAAc,SAASje,CAAG,EACrCgS,EAAUiM,EAAc,QAAQje,CAAG,EAEnCqe,EAASrM,EAAU,EACzBiM,EAAc,aAAaje,CAAG,EAAIiT,GAChChU,EACAe,EACAoe,EACAna,EACA,IACA,CAACoa,CAAA,EAEHJ,EAAc,QAAQje,CAAG,EAAIiT,GAC3BhU,EACAe,EACAqQ,EACApM,EACA,IACA,CAACoa,EAASrM,CAAA,EAEZiM,EAAc,UAAUje,CAAG,EAAIiT,GAC7BhU,EACAe,EACAoe,EACAna,EACA,IACA,CAACoa,EAASrM,EAAU,CAAA,EAEtBiM,EAAc,QAAQje,CAAG,EAAIiT,GAC3BhU,EACAe,EACAsQ,EACArM,EACA,IACA,CAACoa,EAASrM,EAAU,CAAA,EAEtBiM,EAAc,aAAaje,CAAG,EAAIiT,GAChChU,EACAe,EACAoe,EACAna,EACA,IACA,CAACoa,EAASrM,EAAU,CAAA,EAEtBiM,EAAc,YAAYje,CAAG,EAAIiT,GAC/BhU,EACAe,EACAoe,EACAna,EACA,IACA,CAACoa,EAASrM,EAAU,CAAA,EAEtBiM,EAAc,QAAQje,CAAG,EAAIiT,GAC3BhU,EACAe,EACAuQ,EACAtM,EACA,IACA,CAACoa,EAASrM,EAAU,CAAA,EAGtBiM,EAAc,YAAYje,CAAG,EAAI,CACnC,CACF,CACF,EAEMse,GAAyC,CAC7C,MAAO,aACP,OAAOrf,EAAO,CACZ,UAAWe,KAAOke,GAAmBjf,EAAM,KAAK,EAAG,CACjD,GAAI,CAACgf,EAAc,YAAYje,CAAG,EAAG,SAErC,MAAMsI,EAAQ2V,EAAc,MAAMje,CAAG,EAE/Bue,EAAW,CACfN,EAAc,aAAaje,CAAG,EAC9Bie,EAAc,QAAQje,CAAG,EACzBie,EAAc,UAAUje,CAAG,EAC3Bie,EAAc,QAAQje,CAAG,EACzBie,EAAc,aAAaje,CAAG,EAC9Bie,EAAc,YAAYje,CAAG,EAC7Bie,EAAc,QAAQje,CAAG,CAAA,EAG3B,UAAWwD,KAAU+a,EACnBna,EAAU,OAAOZ,CAAM,EAAI8E,EAC3BlE,EAAU,OAAOZ,CAAM,EAAI8E,EAC3BlE,EAAU,OAAOZ,CAAM,EAAI8E,CAE/B,CACF,CACF,EAEakW,GAAmC,CAC9C,WAAY,CAAE,cAAAP,CAAA,EACd,QAAS,CAACE,GAA0BG,EAAyB,EAC7D,OAAQ,CACN,SAAU,CACR,kBAAmB,CACjB,aAAc,EACd,QAAS,EACT,UAAW,EACX,QAAS,EACT,aAAc,EACd,YAAa,EACb,QAAS,EACT,OAAQ,SACR,OAAQ,SACR,OAAQ,QACR,WAAY,SACZ,SAAU,IACV,QAAS,IACT,MAAO,EACP,YAAa,CAAA,CACf,CACF,CAEJ,ECnLAG,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA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","x_google_ignoreList":[1]}