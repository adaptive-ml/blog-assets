{"version":3,"file":"main-DKqv9Rs8.js","sources":["../../src/main.ts"],"sourcesContent":["import '@blog-components/blog/blog-theme.css';\nimport './components.css';\nimport { initializeBlogCanvases, type DemoConfig } from '@blog-components/blog';\nimport { createSequenceControllerPlugin, SequenceController } from '@blog-components/plugins';\nimport {\n  IntroPlugin,\n  StageAnimationPlugin,\n  TextOutputPlugin,\n  TextInputPlugin,\n  MultipleOutputsPlugin,\n  NeuralNetworkPlugin,\n  ScaleShakerPlugin,\n  PositionShakerPlugin,\n} from './shared';\nimport {\n  injectSequences,\n  injectGenerateOutputsSequences,\n  injectScoreResponsesSequences,\n  injectTokenWeightingSequences,\n  STEP_SEQUENCES,\n  GENERATE_OUTPUTS_SEQUENCES,\n  SCORE_RESPONSES_SEQUENCES,\n  TOKEN_WEIGHTING_SEQUENCES,\n} from './blog/sequences';\nimport { STEP_CONTENT } from './blog/step-content';\n\nconst demos: DemoConfig[] = [\n  {\n    canvasId: 'canvas-1',\n    createPlugin: () => [\n      createSequenceControllerPlugin(STEP_SEQUENCES),\n      StageAnimationPlugin,\n      IntroPlugin,\n      TextOutputPlugin,\n      TextInputPlugin,\n      MultipleOutputsPlugin,\n      ScaleShakerPlugin,\n      PositionShakerPlugin,\n      NeuralNetworkPlugin,\n    ],\n    setupUI: (state) => {\n      const controller = state.getEntityByName('controller');\n      if (controller === null) return;\n\n      const minStep = 1;\n      const maxStep = STEP_CONTENT.length;\n      SequenceController.targetStep[controller] = minStep;\n\n      const btnPrev = document.getElementById('btn-prev') as HTMLButtonElement | null;\n      const btnNext = document.getElementById('btn-next') as HTMLButtonElement | null;\n      const counterEl = document.getElementById('step-counter');\n      const titleEl = document.getElementById('step-title');\n      const descEl = document.getElementById('step-description');\n\n      const updateUI = () => {\n        const step = SequenceController.targetStep[controller];\n\n        if (btnPrev) btnPrev.disabled = step <= minStep;\n        if (btnNext) btnNext.disabled = step >= maxStep;\n\n        const contentIndex = step - 1;\n        const content = STEP_CONTENT[contentIndex] ?? { title: '', description: '' };\n\n        if (counterEl) counterEl.textContent = `Step ${step} of ${maxStep}`;\n        if (titleEl) titleEl.textContent = content.title;\n        if (descEl) descEl.textContent = content.description;\n      };\n\n      const measureMaxHeight = () => {\n        if (!descEl) return;\n        descEl.style.height = 'auto';\n        let maxHeight = 0;\n        for (const content of STEP_CONTENT) {\n          descEl.textContent = content.description;\n          maxHeight = Math.max(maxHeight, descEl.offsetHeight);\n        }\n        descEl.style.height = `${maxHeight}px`;\n        updateUI();\n      };\n\n      measureMaxHeight();\n      window.addEventListener('resize', measureMaxHeight);\n\n      btnPrev?.addEventListener('click', () => {\n        const step = SequenceController.targetStep[controller];\n        if (step > minStep) {\n          SequenceController.targetStep[controller] = step - 1;\n        }\n      });\n\n      btnNext?.addEventListener('click', () => {\n        const step = SequenceController.targetStep[controller];\n        if (step < maxStep) {\n          SequenceController.targetStep[controller] = step + 1;\n        }\n      });\n\n      state.registerSystem({ group: 'simulation', update: updateUI });\n    },\n  },\n  {\n    canvasId: 'canvas-2',\n    createPlugin: () => [\n      createSequenceControllerPlugin(GENERATE_OUTPUTS_SEQUENCES),\n      StageAnimationPlugin,\n      TextInputPlugin,\n      MultipleOutputsPlugin,\n      NeuralNetworkPlugin,\n    ],\n    setupUI: (state) => {\n      const controller = state.getEntityByName('controller');\n      if (controller === null) return;\n\n      const btn = document.getElementById('btn-generate-outputs') as HTMLButtonElement | null;\n      if (!btn) return;\n\n      btn.addEventListener('click', () => {\n        const currentStep = SequenceController.targetStep[controller];\n        const newStep = currentStep === 0 ? 1 : 0;\n        SequenceController.targetStep[controller] = newStep;\n        btn.classList.toggle('active', newStep === 1);\n      });\n    },\n  },\n  {\n    canvasId: 'canvas-3',\n    createPlugin: () => [\n      createSequenceControllerPlugin(SCORE_RESPONSES_SEQUENCES),\n      StageAnimationPlugin,\n      MultipleOutputsPlugin,\n      ScaleShakerPlugin,\n      NeuralNetworkPlugin,\n    ],\n    setupUI: (state) => {\n      const controller = state.getEntityByName('controller');\n      if (controller === null) return;\n\n      const btn = document.getElementById('btn-score-responses') as HTMLButtonElement | null;\n      if (!btn) return;\n\n      btn.addEventListener('click', () => {\n        const currentStep = SequenceController.targetStep[controller];\n        const newStep = currentStep === 0 ? 1 : 0;\n        SequenceController.targetStep[controller] = newStep;\n        btn.classList.toggle('active', newStep === 1);\n      });\n    },\n  },\n  {\n    canvasId: 'canvas-4',\n    createPlugin: () => [\n      createSequenceControllerPlugin(TOKEN_WEIGHTING_SEQUENCES),\n      StageAnimationPlugin,\n      IntroPlugin,\n      TextOutputPlugin,\n      NeuralNetworkPlugin,\n    ],\n    setupUI: (state) => {\n      const controller = state.getEntityByName('controller');\n      if (controller === null) return;\n\n      const toggle = document.getElementById('toggle-weighting');\n      const labelGrpo = document.getElementById('label-grpo');\n      const labelGspo = document.getElementById('label-gspo');\n      if (!toggle) return;\n\n      toggle.addEventListener('click', () => {\n        const currentStep = SequenceController.targetStep[controller];\n        const newStep = currentStep === 0 ? 1 : 0;\n        SequenceController.targetStep[controller] = newStep;\n        toggle.classList.toggle('active', newStep === 1);\n        labelGrpo?.classList.toggle('active', newStep === 0);\n        labelGspo?.classList.toggle('active', newStep === 1);\n      });\n    },\n  },\n];\n\nif (typeof document !== 'undefined') {\n  const init = () => {\n    const world1 = document.querySelector('world[canvas=\"#canvas-1\"]');\n    if (world1) {\n      injectSequences(world1);\n    }\n    const world2 = document.querySelector('world[canvas=\"#canvas-2\"]');\n    if (world2) {\n      injectGenerateOutputsSequences(world2);\n    }\n    const world3 = document.querySelector('world[canvas=\"#canvas-3\"]');\n    if (world3) {\n      injectScoreResponsesSequences(world3);\n    }\n    const world4 = document.querySelector('world[canvas=\"#canvas-4\"]');\n    if (world4) {\n      injectTokenWeightingSequences(world4);\n    }\n    initializeBlogCanvases(demos);\n  };\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n}\n"],"names":["demos","createSequenceControllerPlugin","STEP_SEQUENCES","StageAnimationPlugin","IntroPlugin","TextOutputPlugin","TextInputPlugin","MultipleOutputsPlugin","ScaleShakerPlugin","PositionShakerPlugin","NeuralNetworkPlugin","state","controller","minStep","maxStep","STEP_CONTENT","SequenceController","btnPrev","btnNext","counterEl","titleEl","descEl","updateUI","step","contentIndex","content","measureMaxHeight","maxHeight","GENERATE_OUTPUTS_SEQUENCES","btn","newStep","SCORE_RESPONSES_SEQUENCES","TOKEN_WEIGHTING_SEQUENCES","toggle","labelGrpo","labelGspo","init","world1","injectSequences","world2","injectGenerateOutputsSequences","world3","injectScoreResponsesSequences","world4","injectTokenWeightingSequences","initializeBlogCanvases"],"mappings":"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"}